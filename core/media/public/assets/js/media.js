/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 7);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Helpers; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Config_MediaConfig__ = __webpack_require__(1);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar Helpers = function () {\n    function Helpers() {\n        _classCallCheck(this, Helpers);\n    }\n\n    _createClass(Helpers, null, [{\n        key: 'getUrlParam',\n        value: function getUrlParam(paramName) {\n            var url = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n            if (!url) {\n                url = window.location.search;\n            }\n            var reParam = new RegExp('(?:[\\?&]|&)' + paramName + '=([^&]+)', 'i');\n            var match = url.match(reParam);\n            return match && match.length > 1 ? match[1] : null;\n        }\n    }, {\n        key: 'asset',\n        value: function asset(url) {\n            if (url.substring(0, 2) === '//' || url.substring(0, 7) === 'http://' || url.substring(0, 8) === 'https://') {\n                return url;\n            }\n\n            var baseUrl = RV_MEDIA_URL.base_url.substr(-1, 1) !== '/' ? RV_MEDIA_URL.base_url + '/' : RV_MEDIA_URL.base_url;\n\n            if (url.substring(0, 1) === '/') {\n                return baseUrl + url.substring(1);\n            }\n            return baseUrl + url;\n        }\n    }, {\n        key: 'showAjaxLoading',\n        value: function showAjaxLoading() {\n            var $element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : $('.rv-media-main');\n\n            $element.addClass('on-loading').append($('#rv_media_loading').html());\n        }\n    }, {\n        key: 'hideAjaxLoading',\n        value: function hideAjaxLoading() {\n            var $element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : $('.rv-media-main');\n\n            $element.removeClass('on-loading').find('.loading-wrapper').remove();\n        }\n    }, {\n        key: 'isOnAjaxLoading',\n        value: function isOnAjaxLoading() {\n            var $element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : $('.rv-media-items');\n\n            return $element.hasClass('on-loading');\n        }\n    }, {\n        key: 'jsonEncode',\n        value: function jsonEncode(object) {\n            \"use strict\";\n\n            if (typeof object === 'undefined') {\n                object = null;\n            }\n            return JSON.stringify(object);\n        }\n    }, {\n        key: 'jsonDecode',\n        value: function jsonDecode(jsonString, defaultValue) {\n            \"use strict\";\n\n            if (!jsonString) {\n                return defaultValue;\n            }\n            if (typeof jsonString === 'string') {\n                var result = void 0;\n                try {\n                    result = $.parseJSON(jsonString);\n                } catch (err) {\n                    result = defaultValue;\n                }\n                return result;\n            }\n            return jsonString;\n        }\n    }, {\n        key: 'getRequestParams',\n        value: function getRequestParams() {\n            if (window.rvMedia.options && window.rvMedia.options.open_in === 'modal') {\n                return $.extend(true, __WEBPACK_IMPORTED_MODULE_0__Config_MediaConfig__[\"a\" /* MediaConfig */].request_params, window.rvMedia.options || {});\n            }\n            return __WEBPACK_IMPORTED_MODULE_0__Config_MediaConfig__[\"a\" /* MediaConfig */].request_params;\n        }\n    }, {\n        key: 'getConfigs',\n        value: function getConfigs() {\n            return __WEBPACK_IMPORTED_MODULE_0__Config_MediaConfig__[\"a\" /* MediaConfig */];\n        }\n    }, {\n        key: 'storeConfig',\n        value: function storeConfig() {\n            localStorage.setItem('MediaConfig', Helpers.jsonEncode(__WEBPACK_IMPORTED_MODULE_0__Config_MediaConfig__[\"a\" /* MediaConfig */]));\n        }\n    }, {\n        key: 'storeRecentItems',\n        value: function storeRecentItems() {\n            localStorage.setItem('RecentItems', Helpers.jsonEncode(__WEBPACK_IMPORTED_MODULE_0__Config_MediaConfig__[\"b\" /* RecentItems */]));\n        }\n    }, {\n        key: 'addToRecent',\n        value: function addToRecent(id) {\n            if (id instanceof Array) {\n                _.each(id, function (value) {\n                    __WEBPACK_IMPORTED_MODULE_0__Config_MediaConfig__[\"b\" /* RecentItems */].push(value);\n                });\n            } else {\n                __WEBPACK_IMPORTED_MODULE_0__Config_MediaConfig__[\"b\" /* RecentItems */].push(id);\n            }\n        }\n    }, {\n        key: 'getItems',\n        value: function getItems() {\n            var items = [];\n            $('.js-media-list-title').each(function () {\n                var $box = $(this);\n                var data = $box.data() || {};\n                data.index_key = $box.index();\n                items.push(data);\n            });\n            return items;\n        }\n    }, {\n        key: 'getSelectedItems',\n        value: function getSelectedItems() {\n            var selected = [];\n            $('.js-media-list-title input[type=checkbox]:checked').each(function () {\n                var $box = $(this).closest('.js-media-list-title');\n                var data = $box.data() || {};\n                data.index_key = $box.index();\n                selected.push(data);\n            });\n            return selected;\n        }\n    }, {\n        key: 'getSelectedFiles',\n        value: function getSelectedFiles() {\n            var selected = [];\n            $('.js-media-list-title[data-context=file] input[type=checkbox]:checked').each(function () {\n                var $box = $(this).closest('.js-media-list-title');\n                var data = $box.data() || {};\n                data.index_key = $box.index();\n                selected.push(data);\n            });\n            return selected;\n        }\n    }, {\n        key: 'getSelectedFolder',\n        value: function getSelectedFolder() {\n            var selected = [];\n            $('.js-media-list-title[data-context=folder] input[type=checkbox]:checked').each(function () {\n                var $box = $(this).closest('.js-media-list-title');\n                var data = $box.data() || {};\n                data.index_key = $box.index();\n                selected.push(data);\n            });\n            return selected;\n        }\n    }, {\n        key: 'isUseInModal',\n        value: function isUseInModal() {\n            return Helpers.getUrlParam('media-action') === 'select-files' || window.rvMedia && window.rvMedia.options && window.rvMedia.options.open_in === 'modal';\n        }\n    }, {\n        key: 'resetPagination',\n        value: function resetPagination() {\n            RV_MEDIA_CONFIG.pagination = { paged: 1, posts_per_page: 40, in_process_get_media: false, has_more: true };\n        }\n    }]);\n\n    return Helpers;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9yZXNvdXJjZXMvYXNzZXRzL2pzL0FwcC9IZWxwZXJzL0hlbHBlcnMuanM/NjJiYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge01lZGlhQ29uZmlnLCBSZWNlbnRJdGVtc30gZnJvbSAnLi4vQ29uZmlnL01lZGlhQ29uZmlnJztcblxuZXhwb3J0IGNsYXNzIEhlbHBlcnMge1xuICAgIHN0YXRpYyBnZXRVcmxQYXJhbShwYXJhbU5hbWUsIHVybCA9IG51bGwpIHtcbiAgICAgICAgaWYgKCF1cmwpIHtcbiAgICAgICAgICAgIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJlUGFyYW0gPSBuZXcgUmVnRXhwKCcoPzpbXFw/Jl18JiknICsgcGFyYW1OYW1lICsgJz0oW14mXSspJywgJ2knKTtcbiAgICAgICAgbGV0IG1hdGNoID0gdXJsLm1hdGNoKHJlUGFyYW0pO1xuICAgICAgICByZXR1cm4gKCBtYXRjaCAmJiBtYXRjaC5sZW5ndGggPiAxICkgPyBtYXRjaFsxXSA6IG51bGw7XG4gICAgfVxuXG4gICAgc3RhdGljIGFzc2V0KHVybCkge1xuICAgICAgICBpZiAodXJsLnN1YnN0cmluZygwLCAyKSA9PT0gJy8vJyB8fCB1cmwuc3Vic3RyaW5nKDAsIDcpID09PSAnaHR0cDovLycgfHwgdXJsLnN1YnN0cmluZygwLCA4KSA9PT0gJ2h0dHBzOi8vJykge1xuICAgICAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBiYXNlVXJsID0gUlZfTUVESUFfVVJMLmJhc2VfdXJsLnN1YnN0cigtMSwgMSkgIT09ICcvJyA/IFJWX01FRElBX1VSTC5iYXNlX3VybCArICcvJyA6IFJWX01FRElBX1VSTC5iYXNlX3VybDtcblxuICAgICAgICBpZiAodXJsLnN1YnN0cmluZygwLCAxKSA9PT0gJy8nKSB7XG4gICAgICAgICAgICByZXR1cm4gYmFzZVVybCArIHVybC5zdWJzdHJpbmcoMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJhc2VVcmwgKyB1cmw7XG4gICAgfVxuXG4gICAgc3RhdGljIHNob3dBamF4TG9hZGluZygkZWxlbWVudCA9ICQoJy5ydi1tZWRpYS1tYWluJykpIHtcbiAgICAgICAgJGVsZW1lbnRcbiAgICAgICAgICAgIC5hZGRDbGFzcygnb24tbG9hZGluZycpXG4gICAgICAgICAgICAuYXBwZW5kKCQoJyNydl9tZWRpYV9sb2FkaW5nJykuaHRtbCgpKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgaGlkZUFqYXhMb2FkaW5nKCRlbGVtZW50ID0gJCgnLnJ2LW1lZGlhLW1haW4nKSkge1xuICAgICAgICAkZWxlbWVudFxuICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdvbi1sb2FkaW5nJylcbiAgICAgICAgICAgIC5maW5kKCcubG9hZGluZy13cmFwcGVyJykucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgc3RhdGljIGlzT25BamF4TG9hZGluZygkZWxlbWVudCA9ICQoJy5ydi1tZWRpYS1pdGVtcycpKSB7XG4gICAgICAgIHJldHVybiAkZWxlbWVudC5oYXNDbGFzcygnb24tbG9hZGluZycpO1xuICAgIH1cblxuICAgIHN0YXRpYyBqc29uRW5jb2RlKG9iamVjdCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgaWYgKHR5cGVvZiBvYmplY3QgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBvYmplY3QgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmplY3QpO1xuICAgIH07XG5cbiAgICBzdGF0aWMganNvbkRlY29kZShqc29uU3RyaW5nLCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIGlmICghanNvblN0cmluZykge1xuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGpzb25TdHJpbmcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBsZXQgcmVzdWx0O1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSAkLnBhcnNlSlNPTihqc29uU3RyaW5nKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGpzb25TdHJpbmc7XG4gICAgfTtcblxuICAgIHN0YXRpYyBnZXRSZXF1ZXN0UGFyYW1zKCkge1xuICAgICAgICBpZiAod2luZG93LnJ2TWVkaWEub3B0aW9ucyAmJiB3aW5kb3cucnZNZWRpYS5vcHRpb25zLm9wZW5faW4gPT09ICdtb2RhbCcpIHtcbiAgICAgICAgICAgIHJldHVybiAkLmV4dGVuZCh0cnVlLCBNZWRpYUNvbmZpZy5yZXF1ZXN0X3BhcmFtcywgd2luZG93LnJ2TWVkaWEub3B0aW9ucyB8fCB7fSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIE1lZGlhQ29uZmlnLnJlcXVlc3RfcGFyYW1zO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRDb25maWdzKCkge1xuICAgICAgICByZXR1cm4gTWVkaWFDb25maWc7XG4gICAgfVxuXG4gICAgc3RhdGljIHN0b3JlQ29uZmlnKCkge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnTWVkaWFDb25maWcnLCBIZWxwZXJzLmpzb25FbmNvZGUoTWVkaWFDb25maWcpKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgc3RvcmVSZWNlbnRJdGVtcygpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ1JlY2VudEl0ZW1zJywgSGVscGVycy5qc29uRW5jb2RlKFJlY2VudEl0ZW1zKSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGFkZFRvUmVjZW50KGlkKSB7XG4gICAgICAgIGlmIChpZCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICBfLmVhY2goaWQsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIFJlY2VudEl0ZW1zLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBSZWNlbnRJdGVtcy5wdXNoKGlkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBnZXRJdGVtcygpIHtcbiAgICAgICAgbGV0IGl0ZW1zID0gW107XG4gICAgICAgICQoJy5qcy1tZWRpYS1saXN0LXRpdGxlJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsZXQgJGJveCA9ICQodGhpcyk7XG4gICAgICAgICAgICBsZXQgZGF0YSA9ICRib3guZGF0YSgpIHx8IHt9O1xuICAgICAgICAgICAgZGF0YS5pbmRleF9rZXkgPSAkYm94LmluZGV4KCk7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRTZWxlY3RlZEl0ZW1zKCkge1xuICAgICAgICBsZXQgc2VsZWN0ZWQgPSBbXTtcbiAgICAgICAgJCgnLmpzLW1lZGlhLWxpc3QtdGl0bGUgaW5wdXRbdHlwZT1jaGVja2JveF06Y2hlY2tlZCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbGV0ICRib3ggPSAkKHRoaXMpLmNsb3Nlc3QoJy5qcy1tZWRpYS1saXN0LXRpdGxlJyk7XG4gICAgICAgICAgICBsZXQgZGF0YSA9ICRib3guZGF0YSgpIHx8IHt9O1xuICAgICAgICAgICAgZGF0YS5pbmRleF9rZXkgPSAkYm94LmluZGV4KCk7XG4gICAgICAgICAgICBzZWxlY3RlZC5wdXNoKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHNlbGVjdGVkO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRTZWxlY3RlZEZpbGVzKCkge1xuICAgICAgICBsZXQgc2VsZWN0ZWQgPSBbXTtcbiAgICAgICAgJCgnLmpzLW1lZGlhLWxpc3QtdGl0bGVbZGF0YS1jb250ZXh0PWZpbGVdIGlucHV0W3R5cGU9Y2hlY2tib3hdOmNoZWNrZWQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxldCAkYm94ID0gJCh0aGlzKS5jbG9zZXN0KCcuanMtbWVkaWEtbGlzdC10aXRsZScpO1xuICAgICAgICAgICAgbGV0IGRhdGEgPSAkYm94LmRhdGEoKSB8fCB7fTtcbiAgICAgICAgICAgIGRhdGEuaW5kZXhfa2V5ID0gJGJveC5pbmRleCgpO1xuICAgICAgICAgICAgc2VsZWN0ZWQucHVzaChkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzZWxlY3RlZDtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0U2VsZWN0ZWRGb2xkZXIoKSB7XG4gICAgICAgIGxldCBzZWxlY3RlZCA9IFtdO1xuICAgICAgICAkKCcuanMtbWVkaWEtbGlzdC10aXRsZVtkYXRhLWNvbnRleHQ9Zm9sZGVyXSBpbnB1dFt0eXBlPWNoZWNrYm94XTpjaGVja2VkJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsZXQgJGJveCA9ICQodGhpcykuY2xvc2VzdCgnLmpzLW1lZGlhLWxpc3QtdGl0bGUnKTtcbiAgICAgICAgICAgIGxldCBkYXRhID0gJGJveC5kYXRhKCkgfHwge307XG4gICAgICAgICAgICBkYXRhLmluZGV4X2tleSA9ICRib3guaW5kZXgoKTtcbiAgICAgICAgICAgIHNlbGVjdGVkLnB1c2goZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc2VsZWN0ZWQ7XG4gICAgfVxuXG4gICAgc3RhdGljIGlzVXNlSW5Nb2RhbCgpIHtcbiAgICAgICAgcmV0dXJuIEhlbHBlcnMuZ2V0VXJsUGFyYW0oJ21lZGlhLWFjdGlvbicpID09PSAnc2VsZWN0LWZpbGVzJyB8fCAod2luZG93LnJ2TWVkaWEgJiYgd2luZG93LnJ2TWVkaWEub3B0aW9ucyAmJiB3aW5kb3cucnZNZWRpYS5vcHRpb25zLm9wZW5faW4gPT09ICdtb2RhbCcpO1xuICAgIH1cblxuICAgIHN0YXRpYyByZXNldFBhZ2luYXRpb24oKSB7XG4gICAgICAgIFJWX01FRElBX0NPTkZJRy5wYWdpbmF0aW9uID0geyBwYWdlZDogMSwgcG9zdHNfcGVyX3BhZ2U6IDQwLCBpbl9wcm9jZXNzX2dldF9tZWRpYTogZmFsc2UsIGhhc19tb3JlOiB0cnVlfTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gcmVzb3VyY2VzL2Fzc2V0cy9qcy9BcHAvSGVscGVycy9IZWxwZXJzLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBO0FBQUE7QUFBQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFyQkE7QUFBQTtBQUFBO0FBdUJBO0FBQ0E7QUFBQTtBQUdBO0FBM0JBO0FBQUE7QUFBQTtBQTZCQTtBQUNBO0FBQUE7QUFHQTtBQWpDQTtBQUFBO0FBQUE7QUFtQ0E7QUFDQTtBQUFBO0FBQ0E7QUFyQ0E7QUFBQTtBQUFBO0FBd0NBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBN0NBO0FBQUE7QUFBQTtBQWdEQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTlEQTtBQUFBO0FBQUE7QUFpRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXJFQTtBQUFBO0FBQUE7QUF3RUE7QUFDQTtBQXpFQTtBQUFBO0FBQUE7QUE0RUE7QUFDQTtBQTdFQTtBQUFBO0FBQUE7QUFnRkE7QUFDQTtBQWpGQTtBQUFBO0FBQUE7QUFvRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTNGQTtBQUFBO0FBQUE7QUE4RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdEdBO0FBQUE7QUFBQTtBQXlHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFqSEE7QUFBQTtBQUFBO0FBb0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTVIQTtBQUFBO0FBQUE7QUErSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBdklBO0FBQUE7QUFBQTtBQTBJQTtBQUNBO0FBM0lBO0FBQUE7QUFBQTtBQThJQTtBQUNBO0FBL0lBO0FBQ0E7QUFEQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return MediaConfig; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return RecentItems; });\nvar MediaConfig = $.parseJSON(localStorage.getItem('MediaConfig')) || {};\n\nvar defaultConfig = {\n    app_key: '483a0xyzytz1242c0d520426e8ba366c530c3d9dxxx',\n    request_params: {\n        view_type: 'tiles',\n        filter: 'everything',\n        view_in: 'my_media',\n        search: '',\n        sort_by: 'created_at-desc',\n        folder_id: 0\n    },\n    hide_details_pane: false,\n    icons: {\n        folder: 'fa fa-folder-o'\n    },\n    actions_list: {\n        basic: [{\n            icon: 'fa fa-eye',\n            name: 'Preview',\n            action: 'preview',\n            order: 0,\n            class: 'rv-action-preview'\n        }],\n        file: [{\n            icon: 'fa fa-link',\n            name: 'Copy link',\n            action: 'copy_link',\n            order: 0,\n            class: 'rv-action-copy-link'\n        }, {\n            icon: 'fa fa-pencil',\n            name: 'Rename',\n            action: 'rename',\n            order: 1,\n            class: 'rv-action-rename'\n        }, {\n            icon: 'fa fa-copy',\n            name: 'Make a copy',\n            action: 'make_copy',\n            order: 2,\n            class: 'rv-action-make-copy'\n        }, {\n            icon: 'fa fa-dot-circle-o',\n            name: 'Set focus point',\n            action: 'set_focus_point',\n            order: 3,\n            class: 'rv-action-set-focus-point'\n        }],\n        user: [{\n            icon: 'fa fa-share-alt',\n            name: 'Share',\n            action: 'share',\n            order: 0,\n            class: 'rv-action-share'\n        }, {\n            icon: 'fa fa-ban',\n            name: 'Remove share',\n            action: 'remove_share',\n            order: 1,\n            class: 'rv-action-remove-share'\n        }, {\n            icon: 'fa fa-star',\n            name: 'Favorite',\n            action: 'favorite',\n            order: 2,\n            class: 'rv-action-favorite'\n        }, {\n            icon: 'fa fa-star-o',\n            name: 'Remove favorite',\n            action: 'remove_favorite',\n            order: 3,\n            class: 'rv-action-favorite'\n        }],\n        other: [{\n            icon: 'fa fa-download',\n            name: 'Download',\n            action: 'download',\n            order: 0,\n            class: 'rv-action-download'\n        }, {\n            icon: 'fa fa-trash',\n            name: 'Move to trash',\n            action: 'trash',\n            order: 1,\n            class: 'rv-action-trash'\n        }, {\n            icon: 'fa fa-eraser',\n            name: 'Delete permanently',\n            action: 'delete',\n            order: 2,\n            class: 'rv-action-delete'\n        }, {\n            icon: 'fa fa-undo',\n            name: 'Restore',\n            action: 'restore',\n            order: 3,\n            class: 'rv-action-restore'\n        }]\n    },\n    denied_download: ['youtube']\n};\n\nif (!MediaConfig.app_key || MediaConfig.app_key !== defaultConfig.app_key) {\n    MediaConfig = defaultConfig;\n}\n\nvar RecentItems = $.parseJSON(localStorage.getItem('RecentItems')) || [];\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9yZXNvdXJjZXMvYXNzZXRzL2pzL0FwcC9Db25maWcvTWVkaWFDb25maWcuanM/YjlkYyJdLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgTWVkaWFDb25maWcgPSAkLnBhcnNlSlNPTihsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnTWVkaWFDb25maWcnKSkgfHwge307XG5cbmxldCBkZWZhdWx0Q29uZmlnID0ge1xuICAgIGFwcF9rZXk6ICc0ODNhMHh5enl0ejEyNDJjMGQ1MjA0MjZlOGJhMzY2YzUzMGMzZDlkeHh4JyxcbiAgICByZXF1ZXN0X3BhcmFtczoge1xuICAgICAgICB2aWV3X3R5cGU6ICd0aWxlcycsXG4gICAgICAgIGZpbHRlcjogJ2V2ZXJ5dGhpbmcnLFxuICAgICAgICB2aWV3X2luOiAnbXlfbWVkaWEnLFxuICAgICAgICBzZWFyY2g6ICcnLFxuICAgICAgICBzb3J0X2J5OiAnY3JlYXRlZF9hdC1kZXNjJyxcbiAgICAgICAgZm9sZGVyX2lkOiAwLFxuICAgIH0sXG4gICAgaGlkZV9kZXRhaWxzX3BhbmU6IGZhbHNlLFxuICAgIGljb25zOiB7XG4gICAgICAgIGZvbGRlcjogJ2ZhIGZhLWZvbGRlci1vJyxcbiAgICB9LFxuICAgIGFjdGlvbnNfbGlzdDoge1xuICAgICAgICBiYXNpYzogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGljb246ICdmYSBmYS1leWUnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdQcmV2aWV3JyxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdwcmV2aWV3JyxcbiAgICAgICAgICAgICAgICBvcmRlcjogMCxcbiAgICAgICAgICAgICAgICBjbGFzczogJ3J2LWFjdGlvbi1wcmV2aWV3JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIGZpbGU6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpY29uOiAnZmEgZmEtbGluaycsXG4gICAgICAgICAgICAgICAgbmFtZTogJ0NvcHkgbGluaycsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAnY29weV9saW5rJyxcbiAgICAgICAgICAgICAgICBvcmRlcjogMCxcbiAgICAgICAgICAgICAgICBjbGFzczogJ3J2LWFjdGlvbi1jb3B5LWxpbmsnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpY29uOiAnZmEgZmEtcGVuY2lsJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnUmVuYW1lJyxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdyZW5hbWUnLFxuICAgICAgICAgICAgICAgIG9yZGVyOiAxLFxuICAgICAgICAgICAgICAgIGNsYXNzOiAncnYtYWN0aW9uLXJlbmFtZScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGljb246ICdmYSBmYS1jb3B5JyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnTWFrZSBhIGNvcHknLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogJ21ha2VfY29weScsXG4gICAgICAgICAgICAgICAgb3JkZXI6IDIsXG4gICAgICAgICAgICAgICAgY2xhc3M6ICdydi1hY3Rpb24tbWFrZS1jb3B5JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWNvbjogJ2ZhIGZhLWRvdC1jaXJjbGUtbycsXG4gICAgICAgICAgICAgICAgbmFtZTogJ1NldCBmb2N1cyBwb2ludCcsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAnc2V0X2ZvY3VzX3BvaW50JyxcbiAgICAgICAgICAgICAgICBvcmRlcjogMyxcbiAgICAgICAgICAgICAgICBjbGFzczogJ3J2LWFjdGlvbi1zZXQtZm9jdXMtcG9pbnQnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgdXNlcjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGljb246ICdmYSBmYS1zaGFyZS1hbHQnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdTaGFyZScsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAnc2hhcmUnLFxuICAgICAgICAgICAgICAgIG9yZGVyOiAwLFxuICAgICAgICAgICAgICAgIGNsYXNzOiAncnYtYWN0aW9uLXNoYXJlJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWNvbjogJ2ZhIGZhLWJhbicsXG4gICAgICAgICAgICAgICAgbmFtZTogJ1JlbW92ZSBzaGFyZScsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAncmVtb3ZlX3NoYXJlJyxcbiAgICAgICAgICAgICAgICBvcmRlcjogMSxcbiAgICAgICAgICAgICAgICBjbGFzczogJ3J2LWFjdGlvbi1yZW1vdmUtc2hhcmUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpY29uOiAnZmEgZmEtc3RhcicsXG4gICAgICAgICAgICAgICAgbmFtZTogJ0Zhdm9yaXRlJyxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdmYXZvcml0ZScsXG4gICAgICAgICAgICAgICAgb3JkZXI6IDIsXG4gICAgICAgICAgICAgICAgY2xhc3M6ICdydi1hY3Rpb24tZmF2b3JpdGUnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpY29uOiAnZmEgZmEtc3Rhci1vJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnUmVtb3ZlIGZhdm9yaXRlJyxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdyZW1vdmVfZmF2b3JpdGUnLFxuICAgICAgICAgICAgICAgIG9yZGVyOiAzLFxuICAgICAgICAgICAgICAgIGNsYXNzOiAncnYtYWN0aW9uLWZhdm9yaXRlJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIG90aGVyOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWNvbjogJ2ZhIGZhLWRvd25sb2FkJyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnRG93bmxvYWQnLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogJ2Rvd25sb2FkJyxcbiAgICAgICAgICAgICAgICBvcmRlcjogMCxcbiAgICAgICAgICAgICAgICBjbGFzczogJ3J2LWFjdGlvbi1kb3dubG9hZCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGljb246ICdmYSBmYS10cmFzaCcsXG4gICAgICAgICAgICAgICAgbmFtZTogJ01vdmUgdG8gdHJhc2gnLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogJ3RyYXNoJyxcbiAgICAgICAgICAgICAgICBvcmRlcjogMSxcbiAgICAgICAgICAgICAgICBjbGFzczogJ3J2LWFjdGlvbi10cmFzaCcsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGljb246ICdmYSBmYS1lcmFzZXInLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdEZWxldGUgcGVybWFuZW50bHknLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogJ2RlbGV0ZScsXG4gICAgICAgICAgICAgICAgb3JkZXI6IDIsXG4gICAgICAgICAgICAgICAgY2xhc3M6ICdydi1hY3Rpb24tZGVsZXRlJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWNvbjogJ2ZhIGZhLXVuZG8nLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdSZXN0b3JlJyxcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdyZXN0b3JlJyxcbiAgICAgICAgICAgICAgICBvcmRlcjogMyxcbiAgICAgICAgICAgICAgICBjbGFzczogJ3J2LWFjdGlvbi1yZXN0b3JlJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgfSxcbiAgICBkZW5pZWRfZG93bmxvYWQ6IFtcbiAgICAgICAgJ3lvdXR1YmUnLFxuICAgIF0sXG59O1xuXG5pZiAoIU1lZGlhQ29uZmlnLmFwcF9rZXkgfHwgTWVkaWFDb25maWcuYXBwX2tleSAhPT0gZGVmYXVsdENvbmZpZy5hcHBfa2V5KSB7XG4gICAgTWVkaWFDb25maWcgPSBkZWZhdWx0Q29uZmlnO1xufVxuXG5sZXQgUmVjZW50SXRlbXMgPSAkLnBhcnNlSlNPTihsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnUmVjZW50SXRlbXMnKSkgfHwgW107XG5cbmV4cG9ydCB7TWVkaWFDb25maWcsIFJlY2VudEl0ZW1zfTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyByZXNvdXJjZXMvYXNzZXRzL2pzL0FwcC9Db25maWcvTWVkaWFDb25maWcuanMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFRQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBUUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUE1RkE7QUFxR0E7QUFuSEE7QUFDQTtBQXVIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return MessageService; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar MessageService = function () {\n    function MessageService() {\n        _classCallCheck(this, MessageService);\n    }\n\n    _createClass(MessageService, null, [{\n        key: 'showMessage',\n        value: function showMessage(type, message, messageHeader) {\n            toastr.options = {\n                closeButton: true,\n                progressBar: true,\n                positionClass: 'toast-bottom-right',\n                onclick: null,\n                showDuration: 1000,\n                hideDuration: 1000,\n                timeOut: 10000,\n                extendedTimeOut: 1000,\n                showEasing: 'swing',\n                hideEasing: 'linear',\n                showMethod: 'fadeIn',\n                hideMethod: 'fadeOut'\n            };\n            toastr[type](message, messageHeader);\n        }\n    }, {\n        key: 'handleError',\n        value: function handleError(data) {\n            if (typeof data.responseJSON !== 'undefined') {\n                if (typeof data.responseJSON.message !== 'undefined') {\n                    MessageService.showMessage('error', data.responseJSON.message, RV_MEDIA_CONFIG.translations.message.error_header);\n                } else {\n                    $.each(data.responseJSON, function (index, el) {\n                        $.each(el, function (key, item) {\n                            MessageService.showMessage('error', item, RV_MEDIA_CONFIG.translations.message.error_header);\n                        });\n                    });\n                }\n            } else {\n                MessageService.showMessage('error', data.statusText, RV_MEDIA_CONFIG.translations.message.error_header);\n            }\n        }\n    }]);\n\n    return MessageService;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9yZXNvdXJjZXMvYXNzZXRzL2pzL0FwcC9TZXJ2aWNlcy9NZXNzYWdlU2VydmljZS5qcz9jYmY5Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBNZXNzYWdlU2VydmljZSB7XG4gICAgc3RhdGljIHNob3dNZXNzYWdlKHR5cGUsIG1lc3NhZ2UsIG1lc3NhZ2VIZWFkZXIpIHtcbiAgICAgICAgdG9hc3RyLm9wdGlvbnMgPSB7XG4gICAgICAgICAgICBjbG9zZUJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICAgIHByb2dyZXNzQmFyOiB0cnVlLFxuICAgICAgICAgICAgcG9zaXRpb25DbGFzczogJ3RvYXN0LWJvdHRvbS1yaWdodCcsXG4gICAgICAgICAgICBvbmNsaWNrOiBudWxsLFxuICAgICAgICAgICAgc2hvd0R1cmF0aW9uOiAxMDAwLFxuICAgICAgICAgICAgaGlkZUR1cmF0aW9uOiAxMDAwLFxuICAgICAgICAgICAgdGltZU91dDogMTAwMDAsXG4gICAgICAgICAgICBleHRlbmRlZFRpbWVPdXQ6IDEwMDAsXG4gICAgICAgICAgICBzaG93RWFzaW5nOiAnc3dpbmcnLFxuICAgICAgICAgICAgaGlkZUVhc2luZzogJ2xpbmVhcicsXG4gICAgICAgICAgICBzaG93TWV0aG9kOiAnZmFkZUluJyxcbiAgICAgICAgICAgIGhpZGVNZXRob2Q6ICdmYWRlT3V0J1xuICAgICAgICB9O1xuICAgICAgICB0b2FzdHJbdHlwZV0obWVzc2FnZSwgbWVzc2FnZUhlYWRlcik7XG4gICAgfVxuXG4gICAgc3RhdGljIGhhbmRsZUVycm9yKGRhdGEpIHtcbiAgICAgICAgaWYgKHR5cGVvZiAoZGF0YS5yZXNwb25zZUpTT04pICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiAoZGF0YS5yZXNwb25zZUpTT04ubWVzc2FnZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2hvd01lc3NhZ2UoJ2Vycm9yJywgZGF0YS5yZXNwb25zZUpTT04ubWVzc2FnZSwgUlZfTUVESUFfQ09ORklHLnRyYW5zbGF0aW9ucy5tZXNzYWdlLmVycm9yX2hlYWRlcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQuZWFjaChkYXRhLnJlc3BvbnNlSlNPTiwgZnVuY3Rpb24gKGluZGV4LCBlbCkge1xuICAgICAgICAgICAgICAgICAgICAkLmVhY2goZWwsIGZ1bmN0aW9uIChrZXksIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNob3dNZXNzYWdlKCdlcnJvcicsIGl0ZW0sIFJWX01FRElBX0NPTkZJRy50cmFuc2xhdGlvbnMubWVzc2FnZS5lcnJvcl9oZWFkZXIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNob3dNZXNzYWdlKCdlcnJvcicsIGRhdGEuc3RhdHVzVGV4dCwgUlZfTUVESUFfQ09ORklHLnRyYW5zbGF0aW9ucy5tZXNzYWdlLmVycm9yX2hlYWRlcik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHJlc291cmNlcy9hc3NldHMvanMvQXBwL1NlcnZpY2VzL01lc3NhZ2VTZXJ2aWNlLmpzIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBY0E7QUFDQTtBQWpCQTtBQUFBO0FBQUE7QUFvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWpDQTtBQUNBO0FBREE7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return MediaService; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Config_MediaConfig__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Services_MessageService__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Services_ActionsService__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__Services_ContextMenuService__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__Views_MediaList__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__Views_MediaDetails__ = __webpack_require__(10);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\n\n\n\nvar MediaService = function () {\n    function MediaService() {\n        _classCallCheck(this, MediaService);\n\n        this.MediaList = new __WEBPACK_IMPORTED_MODULE_5__Views_MediaList__[\"a\" /* MediaList */]();\n        this.MediaDetails = new __WEBPACK_IMPORTED_MODULE_6__Views_MediaDetails__[\"a\" /* MediaDetails */]();\n        this.breadcrumbTemplate = $('#rv_media_breadcrumb_item').html();\n    }\n\n    _createClass(MediaService, [{\n        key: 'getMedia',\n        value: function getMedia() {\n            var reload = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n            var is_popup = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n            var load_more_file = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n            if (typeof RV_MEDIA_CONFIG.pagination != 'undefined') {\n                if (RV_MEDIA_CONFIG.pagination.in_process_get_media) {\n                    return;\n                } else {\n                    RV_MEDIA_CONFIG.pagination.in_process_get_media = true;\n                }\n            }\n\n            var _self = this;\n\n            _self.getFileDetails({\n                icon: 'fa fa-picture-o',\n                nothing_selected: ''\n            });\n\n            var params = __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getRequestParams();\n\n            if (params.view_in === 'recent') {\n                params.recent_items = __WEBPACK_IMPORTED_MODULE_0__Config_MediaConfig__[\"b\" /* RecentItems */];\n            }\n\n            if (is_popup === true) {\n                params.is_popup = true;\n            } else {\n                params.is_popup = undefined;\n            }\n\n            params.onSelectFiles = undefined;\n\n            if (typeof params.search != 'undefined' && params.search != '' && typeof params.selected_file_id != 'undefined') {\n                params.selected_file_id = undefined;\n            }\n\n            params.load_more_file = load_more_file;\n            if (typeof RV_MEDIA_CONFIG.pagination != 'undefined') {\n                params.paged = RV_MEDIA_CONFIG.pagination.paged;\n                params.posts_per_page = RV_MEDIA_CONFIG.pagination.posts_per_page;\n            }\n            $.ajax({\n                url: RV_MEDIA_URL.get_media,\n                type: 'GET',\n                data: params,\n                dataType: 'json',\n                beforeSend: function beforeSend() {\n                    __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].showAjaxLoading();\n                },\n                success: function success(res) {\n                    _self.MediaList.renderData(res.data, reload, load_more_file);\n                    _self.fetchQuota();\n                    _self.renderBreadcrumbs(res.data.breadcrumbs);\n                    MediaService.refreshFilter();\n                    __WEBPACK_IMPORTED_MODULE_3__Services_ActionsService__[\"a\" /* ActionsService */].renderActions();\n\n                    if (typeof RV_MEDIA_CONFIG.pagination != 'undefined') {\n                        if (typeof RV_MEDIA_CONFIG.pagination.paged != 'undefined') {\n                            RV_MEDIA_CONFIG.pagination.paged += 1;\n                        }\n\n                        if (typeof RV_MEDIA_CONFIG.pagination.in_process_get_media != 'undefined') {\n                            RV_MEDIA_CONFIG.pagination.in_process_get_media = false;\n                        }\n\n                        if (typeof RV_MEDIA_CONFIG.pagination.posts_per_page != 'undefined' && res.data.files.length < RV_MEDIA_CONFIG.pagination.posts_per_page && typeof RV_MEDIA_CONFIG.pagination.has_more != 'undefined') {\n                            RV_MEDIA_CONFIG.pagination.has_more = false;\n                        }\n                    }\n                },\n                complete: function complete(data) {\n                    __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].hideAjaxLoading();\n                },\n                error: function error(data) {\n                    __WEBPACK_IMPORTED_MODULE_2__Services_MessageService__[\"a\" /* MessageService */].handleError(data);\n                }\n            });\n        }\n    }, {\n        key: 'getFileDetails',\n        value: function getFileDetails(data) {\n            this.MediaDetails.renderData(data);\n        }\n    }, {\n        key: 'fetchQuota',\n        value: function fetchQuota() {\n            $.ajax({\n                url: RV_MEDIA_URL.get_quota,\n                type: 'GET',\n                dataType: 'json',\n                beforeSend: function beforeSend() {},\n                success: function success(res) {\n                    var data = res.data;\n\n                    $('.rv-media-aside-bottom .used-analytics span').html(data.used + ' / ' + data.quota);\n                    $('.rv-media-aside-bottom .progress-bar').css({\n                        width: data.percent + '%'\n                    });\n                },\n                error: function error(data) {\n                    __WEBPACK_IMPORTED_MODULE_2__Services_MessageService__[\"a\" /* MessageService */].handleError(data);\n                }\n            });\n        }\n    }, {\n        key: 'renderBreadcrumbs',\n        value: function renderBreadcrumbs(breadcrumbItems) {\n            var _self = this;\n            var $breadcrumbContainer = $('.rv-media-breadcrumb .breadcrumb');\n            $breadcrumbContainer.find('li').remove();\n\n            _.each(breadcrumbItems, function (value, index) {\n                var template = _self.breadcrumbTemplate;\n                template = template.replace(/__name__/gi, value.name || '').replace(/__icon__/gi, value.icon ? '<i class=\"' + value.icon + '\"></i>' : '').replace(/__folderId__/gi, value.id || 0);\n                $breadcrumbContainer.append($(template));\n            });\n            $('.rv-media-container').attr('data-breadcrumb-count', _.size(breadcrumbItems));\n        }\n    }], [{\n        key: 'refreshFilter',\n        value: function refreshFilter() {\n            var $rvMediaContainer = $('.rv-media-container');\n            var view_in = __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getRequestParams().view_in;\n            if (view_in !== 'my_media' && (view_in !== 'shared' && view_in !== 'shared_with_me' && view_in !== 'public' || __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getRequestParams().folder_id == 0)) {\n                $('.rv-media-actions .btn:not([data-type=\"refresh\"]):not(label)').addClass('disabled');\n                $rvMediaContainer.attr('data-allow-upload', 'false');\n            } else {\n                $('.rv-media-actions .btn:not([data-type=\"refresh\"]):not(label)').removeClass('disabled');\n                $rvMediaContainer.attr('data-allow-upload', 'true');\n            }\n\n            $('.rv-media-actions .btn.js-rv-media-change-filter-group').removeClass('disabled');\n\n            var $empty_trash_btn = $('.rv-media-actions .btn[data-action=\"empty_trash\"]');\n            if (view_in === 'trash') {\n                $empty_trash_btn.removeClass('hidden').removeClass('disabled');\n                if (!_.size(__WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getItems())) {\n                    $empty_trash_btn.addClass('hidden').addClass('disabled');\n                }\n            } else {\n                $empty_trash_btn.addClass('hidden');\n            }\n\n            __WEBPACK_IMPORTED_MODULE_4__Services_ContextMenuService__[\"a\" /* ContextMenuService */].destroyContext();\n            __WEBPACK_IMPORTED_MODULE_4__Services_ContextMenuService__[\"a\" /* ContextMenuService */].initContext();\n\n            $rvMediaContainer.attr('data-view-in', view_in);\n        }\n    }]);\n\n    return MediaService;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9yZXNvdXJjZXMvYXNzZXRzL2pzL0FwcC9TZXJ2aWNlcy9NZWRpYVNlcnZpY2UuanM/ZTZjZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1JlY2VudEl0ZW1zfSBmcm9tICcuLi9Db25maWcvTWVkaWFDb25maWcnO1xuaW1wb3J0IHtIZWxwZXJzfSBmcm9tICcuLi9IZWxwZXJzL0hlbHBlcnMnO1xuaW1wb3J0IHtNZXNzYWdlU2VydmljZX0gZnJvbSAnLi4vU2VydmljZXMvTWVzc2FnZVNlcnZpY2UnO1xuaW1wb3J0IHtBY3Rpb25zU2VydmljZX0gZnJvbSAnLi4vU2VydmljZXMvQWN0aW9uc1NlcnZpY2UnO1xuaW1wb3J0IHtDb250ZXh0TWVudVNlcnZpY2V9IGZyb20gJy4uL1NlcnZpY2VzL0NvbnRleHRNZW51U2VydmljZSc7XG5pbXBvcnQge01lZGlhTGlzdH0gZnJvbSAnLi4vVmlld3MvTWVkaWFMaXN0JztcbmltcG9ydCB7TWVkaWFEZXRhaWxzfSBmcm9tICcuLi9WaWV3cy9NZWRpYURldGFpbHMnO1xuXG5leHBvcnQgY2xhc3MgTWVkaWFTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5NZWRpYUxpc3QgPSBuZXcgTWVkaWFMaXN0KCk7XG4gICAgICAgIHRoaXMuTWVkaWFEZXRhaWxzID0gbmV3IE1lZGlhRGV0YWlscygpO1xuICAgICAgICB0aGlzLmJyZWFkY3J1bWJUZW1wbGF0ZSA9ICQoJyNydl9tZWRpYV9icmVhZGNydW1iX2l0ZW0nKS5odG1sKCk7XG4gICAgfVxuXG4gICAgZ2V0TWVkaWEocmVsb2FkID0gZmFsc2UsIGlzX3BvcHVwID0gZmFsc2UsIGxvYWRfbW9yZV9maWxlID0gZmFsc2UpIHtcbiAgICAgICAgaWYodHlwZW9mIFJWX01FRElBX0NPTkZJRy5wYWdpbmF0aW9uICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpZiAoUlZfTUVESUFfQ09ORklHLnBhZ2luYXRpb24uaW5fcHJvY2Vzc19nZXRfbWVkaWEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIFJWX01FRElBX0NPTkZJRy5wYWdpbmF0aW9uLmluX3Byb2Nlc3NfZ2V0X21lZGlhID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBfc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgX3NlbGYuZ2V0RmlsZURldGFpbHMoe1xuICAgICAgICAgICAgaWNvbjogJ2ZhIGZhLXBpY3R1cmUtbycsXG4gICAgICAgICAgICBub3RoaW5nX3NlbGVjdGVkOiAnJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IHBhcmFtcyA9IEhlbHBlcnMuZ2V0UmVxdWVzdFBhcmFtcygpO1xuXG4gICAgICAgIGlmIChwYXJhbXMudmlld19pbiA9PT0gJ3JlY2VudCcpIHtcbiAgICAgICAgICAgIHBhcmFtcy5yZWNlbnRfaXRlbXMgPSBSZWNlbnRJdGVtcztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc19wb3B1cCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgcGFyYW1zLmlzX3BvcHVwID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNle1xuICAgICAgICAgICAgcGFyYW1zLmlzX3BvcHVwID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyYW1zLm9uU2VsZWN0RmlsZXMgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBwYXJhbXMuc2VhcmNoICE9ICd1bmRlZmluZWQnICYmIHBhcmFtcy5zZWFyY2ggIT0gJycgJiYgdHlwZW9mIHBhcmFtcy5zZWxlY3RlZF9maWxlX2lkICE9ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBwYXJhbXMuc2VsZWN0ZWRfZmlsZV9pZCA9IHVuZGVmaW5lZFxuICAgICAgICB9XG5cbiAgICAgICAgcGFyYW1zLmxvYWRfbW9yZV9maWxlID0gbG9hZF9tb3JlX2ZpbGU7XG4gICAgICAgIGlmICh0eXBlb2YgUlZfTUVESUFfQ09ORklHLnBhZ2luYXRpb24gIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHBhcmFtcy5wYWdlZCA9IFJWX01FRElBX0NPTkZJRy5wYWdpbmF0aW9uLnBhZ2VkO1xuICAgICAgICAgICAgcGFyYW1zLnBvc3RzX3Blcl9wYWdlID0gUlZfTUVESUFfQ09ORklHLnBhZ2luYXRpb24ucG9zdHNfcGVyX3BhZ2U7XG4gICAgICAgIH1cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogUlZfTUVESUFfVVJMLmdldF9tZWRpYSxcbiAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgICAgZGF0YTogcGFyYW1zLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBIZWxwZXJzLnNob3dBamF4TG9hZGluZygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICBfc2VsZi5NZWRpYUxpc3QucmVuZGVyRGF0YShyZXMuZGF0YSwgcmVsb2FkLCBsb2FkX21vcmVfZmlsZSk7XG4gICAgICAgICAgICAgICAgX3NlbGYuZmV0Y2hRdW90YSgpO1xuICAgICAgICAgICAgICAgIF9zZWxmLnJlbmRlckJyZWFkY3J1bWJzKHJlcy5kYXRhLmJyZWFkY3J1bWJzKTtcbiAgICAgICAgICAgICAgICBNZWRpYVNlcnZpY2UucmVmcmVzaEZpbHRlcigpO1xuICAgICAgICAgICAgICAgIEFjdGlvbnNTZXJ2aWNlLnJlbmRlckFjdGlvbnMoKTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgUlZfTUVESUFfQ09ORklHLnBhZ2luYXRpb24gIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBSVl9NRURJQV9DT05GSUcucGFnaW5hdGlvbi5wYWdlZCAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgUlZfTUVESUFfQ09ORklHLnBhZ2luYXRpb24ucGFnZWQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgUlZfTUVESUFfQ09ORklHLnBhZ2luYXRpb24uaW5fcHJvY2Vzc19nZXRfbWVkaWEgIT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFJWX01FRElBX0NPTkZJRy5wYWdpbmF0aW9uLmluX3Byb2Nlc3NfZ2V0X21lZGlhID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIFJWX01FRElBX0NPTkZJRy5wYWdpbmF0aW9uLnBvc3RzX3Blcl9wYWdlICE9ICd1bmRlZmluZWQnICYmIHJlcy5kYXRhLmZpbGVzLmxlbmd0aCA8IFJWX01FRElBX0NPTkZJRy5wYWdpbmF0aW9uLnBvc3RzX3Blcl9wYWdlICYmIHR5cGVvZiBSVl9NRURJQV9DT05GSUcucGFnaW5hdGlvbi5oYXNfbW9yZSAhPSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgUlZfTUVESUFfQ09ORklHLnBhZ2luYXRpb24uaGFzX21vcmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBIZWxwZXJzLmhpZGVBamF4TG9hZGluZygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLmhhbmRsZUVycm9yKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRGaWxlRGV0YWlscyhkYXRhKSB7XG4gICAgICAgIHRoaXMuTWVkaWFEZXRhaWxzLnJlbmRlckRhdGEoZGF0YSk7XG4gICAgfVxuXG4gICAgZmV0Y2hRdW90YSgpIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogUlZfTUVESUFfVVJMLmdldF9xdW90YSxcbiAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHJlcy5kYXRhO1xuXG4gICAgICAgICAgICAgICAgJCgnLnJ2LW1lZGlhLWFzaWRlLWJvdHRvbSAudXNlZC1hbmFseXRpY3Mgc3BhbicpLmh0bWwoZGF0YS51c2VkICsgJyAvICcgKyBkYXRhLnF1b3RhKTtcbiAgICAgICAgICAgICAgICAkKCcucnYtbWVkaWEtYXNpZGUtYm90dG9tIC5wcm9ncmVzcy1iYXInKS5jc3Moe1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogZGF0YS5wZXJjZW50ICsgJyUnLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLmhhbmRsZUVycm9yKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXJCcmVhZGNydW1icyhicmVhZGNydW1iSXRlbXMpIHtcbiAgICAgICAgbGV0IF9zZWxmID0gdGhpcztcbiAgICAgICAgbGV0ICRicmVhZGNydW1iQ29udGFpbmVyID0gJCgnLnJ2LW1lZGlhLWJyZWFkY3J1bWIgLmJyZWFkY3J1bWInKTtcbiAgICAgICAgJGJyZWFkY3J1bWJDb250YWluZXIuZmluZCgnbGknKS5yZW1vdmUoKTtcblxuICAgICAgICBfLmVhY2goYnJlYWRjcnVtYkl0ZW1zLCBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgICAgICAgICBsZXQgdGVtcGxhdGUgPSBfc2VsZi5icmVhZGNydW1iVGVtcGxhdGU7XG4gICAgICAgICAgICB0ZW1wbGF0ZSA9IHRlbXBsYXRlXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL19fbmFtZV9fL2dpLCB2YWx1ZS5uYW1lIHx8ICcnKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9fX2ljb25fXy9naSwgdmFsdWUuaWNvbiA/ICc8aSBjbGFzcz1cIicgKyB2YWx1ZS5pY29uICsgJ1wiPjwvaT4nIDogJycpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL19fZm9sZGVySWRfXy9naSwgdmFsdWUuaWQgfHwgMCk7XG4gICAgICAgICAgICAkYnJlYWRjcnVtYkNvbnRhaW5lci5hcHBlbmQoJCh0ZW1wbGF0ZSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgJCgnLnJ2LW1lZGlhLWNvbnRhaW5lcicpLmF0dHIoJ2RhdGEtYnJlYWRjcnVtYi1jb3VudCcsIF8uc2l6ZShicmVhZGNydW1iSXRlbXMpKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgcmVmcmVzaEZpbHRlcigpIHtcbiAgICAgICAgbGV0ICRydk1lZGlhQ29udGFpbmVyID0gJCgnLnJ2LW1lZGlhLWNvbnRhaW5lcicpO1xuICAgICAgICBsZXQgdmlld19pbiA9IEhlbHBlcnMuZ2V0UmVxdWVzdFBhcmFtcygpLnZpZXdfaW47XG4gICAgICAgIGlmICh2aWV3X2luICE9PSAnbXlfbWVkaWEnICYmICgodmlld19pbiAhPT0gJ3NoYXJlZCcgJiYgdmlld19pbiAhPT0gJ3NoYXJlZF93aXRoX21lJyAmJiB2aWV3X2luICE9PSAncHVibGljJykgfHwgSGVscGVycy5nZXRSZXF1ZXN0UGFyYW1zKCkuZm9sZGVyX2lkID09IDApKSB7XG4gICAgICAgICAgICAkKCcucnYtbWVkaWEtYWN0aW9ucyAuYnRuOm5vdChbZGF0YS10eXBlPVwicmVmcmVzaFwiXSk6bm90KGxhYmVsKScpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgJHJ2TWVkaWFDb250YWluZXIuYXR0cignZGF0YS1hbGxvdy11cGxvYWQnLCAnZmFsc2UnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJy5ydi1tZWRpYS1hY3Rpb25zIC5idG46bm90KFtkYXRhLXR5cGU9XCJyZWZyZXNoXCJdKTpub3QobGFiZWwpJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAkcnZNZWRpYUNvbnRhaW5lci5hdHRyKCdkYXRhLWFsbG93LXVwbG9hZCcsICd0cnVlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAkKCcucnYtbWVkaWEtYWN0aW9ucyAuYnRuLmpzLXJ2LW1lZGlhLWNoYW5nZS1maWx0ZXItZ3JvdXAnKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcblxuICAgICAgICBsZXQgJGVtcHR5X3RyYXNoX2J0biA9ICQoJy5ydi1tZWRpYS1hY3Rpb25zIC5idG5bZGF0YS1hY3Rpb249XCJlbXB0eV90cmFzaFwiXScpO1xuICAgICAgICBpZiAodmlld19pbiA9PT0gJ3RyYXNoJykge1xuICAgICAgICAgICAgJGVtcHR5X3RyYXNoX2J0bi5yZW1vdmVDbGFzcygnaGlkZGVuJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICBpZiAoIV8uc2l6ZShIZWxwZXJzLmdldEl0ZW1zKCkpKSB7XG4gICAgICAgICAgICAgICAgJGVtcHR5X3RyYXNoX2J0bi5hZGRDbGFzcygnaGlkZGVuJykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkZW1wdHlfdHJhc2hfYnRuLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIENvbnRleHRNZW51U2VydmljZS5kZXN0cm95Q29udGV4dCgpO1xuICAgICAgICBDb250ZXh0TWVudVNlcnZpY2UuaW5pdENvbnRleHQoKTtcblxuICAgICAgICAkcnZNZWRpYUNvbnRhaW5lci5hdHRyKCdkYXRhLXZpZXctaW4nLCB2aWV3X2luKTtcbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHJlc291cmNlcy9hc3NldHMvanMvQXBwL1NlcnZpY2VzL01lZGlhU2VydmljZS5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQUE7QUFBQTtBQU9BO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsQ0E7QUFvQ0E7QUFsRkE7QUFBQTtBQUFBO0FBcUZBO0FBQ0E7QUF0RkE7QUFBQTtBQUFBO0FBeUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBakJBO0FBbUJBO0FBNUdBO0FBQUE7QUFBQTtBQStHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBNUhBO0FBQUE7QUFBQTtBQStIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF6SkE7QUFDQTtBQURBO0FBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ActionsService; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Config_MediaConfig__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Services_MessageService__ = __webpack_require__(2);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\nvar ActionsService = function () {\n    function ActionsService() {\n        _classCallCheck(this, ActionsService);\n    }\n\n    _createClass(ActionsService, null, [{\n        key: 'handleDropdown',\n        value: function handleDropdown() {\n            var selected = _.size(__WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getSelectedItems());\n\n            ActionsService.renderActions();\n\n            if (selected > 0) {\n                $('.rv-dropdown-actions').removeClass('disabled');\n            } else {\n                $('.rv-dropdown-actions').addClass('disabled');\n            }\n        }\n    }, {\n        key: 'handlePreview',\n        value: function handlePreview() {\n            var selected = [];\n\n            _.each(__WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getSelectedFiles(), function (value, index) {\n                if (_.contains(['image', 'youtube', 'pdf', 'text', 'video'], value.type)) {\n                    selected.push({\n                        src: value.url\n                    });\n                    __WEBPACK_IMPORTED_MODULE_0__Config_MediaConfig__[\"b\" /* RecentItems */].push(value.id);\n                }\n            });\n\n            if (_.size(selected) > 0) {\n                $.fancybox.open(selected);\n                __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].storeRecentItems();\n            } else {\n                this.handleGlobalAction('download');\n            }\n        }\n    }, {\n        key: 'handleCopyLink',\n        value: function handleCopyLink() {\n            var links = '';\n            _.each(__WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getSelectedFiles(), function (value, index) {\n                if (!_.isEmpty(links)) {\n                    links += '\\n';\n                }\n                links += value.full_url;\n            });\n            var $clipboardTemp = $('.js-rv-clipboard-temp');\n            $clipboardTemp.data('clipboard-text', links);\n            new Clipboard('.js-rv-clipboard-temp', {\n                text: function text(trigger) {\n                    return links;\n                }\n            });\n            __WEBPACK_IMPORTED_MODULE_2__Services_MessageService__[\"a\" /* MessageService */].showMessage('success', RV_MEDIA_CONFIG.translations.clipboard.success, RV_MEDIA_CONFIG.translations.message.success_header);\n            $clipboardTemp.trigger('click');\n        }\n    }, {\n        key: 'handleGlobalAction',\n        value: function handleGlobalAction(type, callback) {\n            var selected = [];\n            _.each(__WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getSelectedItems(), function (value, index) {\n                selected.push({\n                    is_folder: value.is_folder,\n                    id: value.id,\n                    full_url: value.full_url,\n                    focus: value.focus\n                });\n            });\n\n            switch (type) {\n                case 'rename':\n                    $('#modal_rename_items').modal('show').find('form.rv-form').data('action', type);\n                    break;\n                case 'copy_link':\n                    ActionsService.handleCopyLink();\n                    break;\n                case 'preview':\n                    ActionsService.handlePreview();\n                    break;\n                case 'set_focus_point':\n                    var modal = $('#modal_set_focus_point');\n                    if (selected[0].focus.length === 0) {\n                        modal.find('.helper-tool-data-attr').val('');\n                        modal.find('.helper-tool-css3-val').val('');\n                        modal.find('.helper-tool-reticle-css').val('');\n                        $('.reticle').removeAttr('style');\n                    } else {\n                        modal.find('.helper-tool-data-attr').val(selected[0].focus.data_attribute);\n                        modal.find('.helper-tool-css3-val').val(selected[0].focus.css_bg_position);\n                        modal.find('.helper-tool-reticle-css').val(selected[0].focus.retice_css);\n                        $('.reticle').prop('style', selected[0].focus.retice_css);\n                    }\n                    modal.modal('show').find('form.rv-form').data('action', type).data('image', selected[0].full_url);\n                    break;\n                case 'trash':\n                    $('#modal_trash_items').modal('show').find('form.rv-form').data('action', type);\n                    break;\n                case 'delete':\n                    $('#modal_delete_items').modal('show').find('form.rv-form').data('action', type);\n                    break;\n                case 'share':\n                    $('#modal_share_items').modal('show').find('form.rv-form').data('action', type);\n                    break;\n                case 'empty_trash':\n                    $('#modal_empty_trash').modal('show').find('form.rv-form').data('action', type);\n                    break;\n                case 'download':\n                    var downloadLink = RV_MEDIA_URL.download;\n                    var count = 0;\n                    _.each(__WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getSelectedItems(), function (value, index) {\n                        if (!_.contains(__WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getConfigs().denied_download, value.mime_type)) {\n                            downloadLink += (count === 0 ? '?' : '&') + 'selected[' + count + '][is_folder]=' + value.is_folder + '&selected[' + count + '][id]=' + value.id;\n                            count++;\n                        }\n                    });\n                    if (downloadLink !== RV_MEDIA_URL.download) {\n                        window.open(downloadLink, '_blank');\n                    } else {\n                        __WEBPACK_IMPORTED_MODULE_2__Services_MessageService__[\"a\" /* MessageService */].showMessage('error', RV_MEDIA_CONFIG.translations.download.error, RV_MEDIA_CONFIG.translations.message.error_header);\n                    }\n                    break;\n                default:\n                    ActionsService.processAction({\n                        selected: selected,\n                        action: type\n                    }, callback);\n                    break;\n            }\n        }\n    }, {\n        key: 'processAction',\n        value: function processAction(data) {\n            var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n            $.ajax({\n                url: RV_MEDIA_URL.global_actions,\n                type: 'POST',\n                data: data,\n                dataType: 'json',\n                beforeSend: function beforeSend() {\n                    __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].showAjaxLoading();\n                },\n                success: function success(res) {\n                    __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].resetPagination();\n                    if (!res.error) {\n                        __WEBPACK_IMPORTED_MODULE_2__Services_MessageService__[\"a\" /* MessageService */].showMessage('success', res.message, RV_MEDIA_CONFIG.translations.message.success_header);\n                    } else {\n                        __WEBPACK_IMPORTED_MODULE_2__Services_MessageService__[\"a\" /* MessageService */].showMessage('error', res.message, RV_MEDIA_CONFIG.translations.message.error_header);\n                    }\n                    if (callback) {\n                        callback(res);\n                    }\n                },\n                complete: function complete(data) {\n                    __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].hideAjaxLoading();\n                },\n                error: function error(data) {\n                    __WEBPACK_IMPORTED_MODULE_2__Services_MessageService__[\"a\" /* MessageService */].handleError(data);\n                }\n            });\n        }\n    }, {\n        key: 'renderRenameItems',\n        value: function renderRenameItems() {\n            var VIEW = $('#rv_media_rename_item').html();\n            var $itemsWrapper = $('#modal_rename_items .rename-items').empty();\n\n            _.each(__WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getSelectedItems(), function (value, index) {\n                var item = VIEW.replace(/__icon__/gi, value.icon || 'fa fa-file-o').replace(/__placeholder__/gi, 'Input file name').replace(/__value__/gi, value.name);\n                var $item = $(item);\n                $item.data('id', value.id);\n                $item.data('is_folder', value.is_folder);\n                $item.data('name', value.name);\n                $itemsWrapper.append($item);\n            });\n        }\n    }, {\n        key: 'renderActions',\n        value: function renderActions() {\n            var hasFolderSelected = __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getSelectedFolder().length > 0;\n\n            var ACTION_TEMPLATE = $('#rv_action_item').html();\n            var initialized_item = 0;\n            var $dropdownActions = $('.rv-dropdown-actions .dropdown-menu');\n            $dropdownActions.empty();\n\n            var actionsList = $.extend({}, true, __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getConfigs().actions_list);\n\n            if (hasFolderSelected) {\n                actionsList.basic = _.reject(actionsList.basic, function (item) {\n                    return item.action === 'preview';\n                });\n                actionsList.file = _.reject(actionsList.file, function (item) {\n                    return item.action === 'copy_link';\n                });\n                actionsList.file = _.reject(actionsList.file, function (item) {\n                    return item.action === 'set_focus_point';\n                });\n\n                if (!_.contains(RV_MEDIA_CONFIG.permissions, 'folders.create')) {\n                    actionsList.file = _.reject(actionsList.file, function (item) {\n                        return item.action === 'make_copy';\n                    });\n                }\n\n                if (!_.contains(RV_MEDIA_CONFIG.permissions, 'folders.edit')) {\n                    actionsList.file = _.reject(actionsList.file, function (item) {\n                        return _.contains(['rename'], item.action);\n                    });\n\n                    actionsList.user = _.reject(actionsList.user, function (item) {\n                        return _.contains(['rename', 'share', 'remove_share', 'un_share'], item.action);\n                    });\n                }\n\n                if (!_.contains(RV_MEDIA_CONFIG.permissions, 'folders.trash')) {\n                    actionsList.other = _.reject(actionsList.other, function (item) {\n                        return _.contains(['trash', 'restore'], item.action);\n                    });\n                }\n\n                if (!_.contains(RV_MEDIA_CONFIG.permissions, 'folders.delete')) {\n                    actionsList.other = _.reject(actionsList.other, function (item) {\n                        return _.contains(['delete'], item.action);\n                    });\n                }\n            }\n\n            var selectedFiles = __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getSelectedFiles();\n            if (selectedFiles.length > 0 && selectedFiles[0].type !== 'image') {\n                actionsList.file = _.reject(actionsList.file, function (item) {\n                    return item.action === 'set_focus_point';\n                });\n            }\n\n            var can_preview = false;\n            _.each(selectedFiles, function (value) {\n                if (_.contains(['image', 'youtube', 'pdf', 'text', 'video'], value.type)) {\n                    can_preview = true;\n                }\n            });\n\n            if (!can_preview) {\n                actionsList.basic = _.reject(actionsList.basic, function (item) {\n                    return item.action === 'preview';\n                });\n            }\n\n            if (RV_MEDIA_CONFIG.mode === 'simple') {\n                actionsList.user = _.reject(actionsList.user, function (item) {\n                    return _.contains(['share', 'remove_share', 'un_share'], item.action);\n                });\n            }\n\n            if (selectedFiles.length > 0) {\n                if (!_.contains(RV_MEDIA_CONFIG.permissions, 'files.create')) {\n                    actionsList.file = _.reject(actionsList.file, function (item) {\n                        return item.action === 'make_copy';\n                    });\n                }\n\n                if (!_.contains(RV_MEDIA_CONFIG.permissions, 'files.edit')) {\n                    actionsList.file = _.reject(actionsList.file, function (item) {\n                        return _.contains(['rename', 'set_focus_point'], item.action);\n                    });\n\n                    actionsList.user = _.reject(actionsList.user, function (item) {\n                        return _.contains(['share', 'remove_share', 'un_share'], item.action);\n                    });\n                }\n\n                if (!_.contains(RV_MEDIA_CONFIG.permissions, 'files.trash')) {\n                    actionsList.other = _.reject(actionsList.other, function (item) {\n                        return _.contains(['trash', 'restore'], item.action);\n                    });\n                }\n\n                if (!_.contains(RV_MEDIA_CONFIG.permissions, 'files.delete')) {\n                    actionsList.other = _.reject(actionsList.other, function (item) {\n                        return _.contains(['delete'], item.action);\n                    });\n                }\n            }\n\n            _.each(actionsList, function (action, key) {\n                _.each(action, function (item, index) {\n                    var is_break = false;\n                    switch (__WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getRequestParams().view_in) {\n                        case 'my_media':\n                            if (_.contains(['remove_favorite', 'delete', 'restore', 'remove_share'], item.action)) {\n                                is_break = true;\n                            }\n                            break;\n                        case 'shared':\n                            if (_.contains(['remove_favorite', 'delete', 'restore', 'make_copy', 'remove_share'], item.action)) {\n                                is_break = true;\n                            }\n                            break;\n                        case 'shared_with_me':\n                            if (_.contains(['remove_favorite', 'delete', 'restore', 'make_copy', 'share'], item.action)) {\n                                is_break = true;\n                            }\n                            break;\n                        case 'public':\n                            if (_.contains(['remove_favorite', 'delete', 'restore', 'make_copy', 'share', 'remove_share'], item.action)) {\n                                is_break = true;\n                            }\n                            break;\n                        case 'recent':\n                            if (_.contains(['remove_favorite', 'delete', 'restore', 'make_copy', 'remove_share'], item.action)) {\n                                is_break = true;\n                            }\n                            break;\n                        case 'favorites':\n                            if (_.contains(['favorite', 'delete', 'restore', 'make_copy', 'remove_share'], item.action)) {\n                                is_break = true;\n                            }\n                            break;\n                        case 'trash':\n                            if (!_.contains(['preview', 'delete', 'restore', 'rename', 'download'], item.action)) {\n                                is_break = true;\n                            }\n                            break;\n                    }\n                    if (!is_break) {\n                        var template = ACTION_TEMPLATE.replace(/__action__/gi, item.action || '').replace(/__icon__/gi, item.icon || '').replace(/__name__/gi, RV_MEDIA_CONFIG.translations.actions_list[key][item.action] || item.name);\n                        if (!index && initialized_item) {\n                            template = '<li role=\"separator\" class=\"divider\"></li>' + template;\n                        }\n                        $dropdownActions.append(template);\n                    }\n                });\n                if (action.length > 0) {\n                    initialized_item++;\n                }\n            });\n        }\n    }]);\n\n    return ActionsService;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9yZXNvdXJjZXMvYXNzZXRzL2pzL0FwcC9TZXJ2aWNlcy9BY3Rpb25zU2VydmljZS5qcz9jMjM5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7UmVjZW50SXRlbXN9IGZyb20gJy4uL0NvbmZpZy9NZWRpYUNvbmZpZyc7XG5pbXBvcnQge0hlbHBlcnN9IGZyb20gJy4uL0hlbHBlcnMvSGVscGVycyc7XG5pbXBvcnQge01lc3NhZ2VTZXJ2aWNlfSBmcm9tICcuLi9TZXJ2aWNlcy9NZXNzYWdlU2VydmljZSc7XG5cbmV4cG9ydCBjbGFzcyBBY3Rpb25zU2VydmljZSB7XG4gICAgc3RhdGljIGhhbmRsZURyb3Bkb3duKCkge1xuICAgICAgICBsZXQgc2VsZWN0ZWQgPSBfLnNpemUoSGVscGVycy5nZXRTZWxlY3RlZEl0ZW1zKCkpO1xuXG4gICAgICAgIEFjdGlvbnNTZXJ2aWNlLnJlbmRlckFjdGlvbnMoKTtcblxuICAgICAgICBpZiAoc2VsZWN0ZWQgPiAwKSB7XG4gICAgICAgICAgICAkKCcucnYtZHJvcGRvd24tYWN0aW9ucycpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCgnLnJ2LWRyb3Bkb3duLWFjdGlvbnMnKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN0YXRpYyBoYW5kbGVQcmV2aWV3KCkge1xuICAgICAgICBsZXQgc2VsZWN0ZWQgPSBbXTtcblxuICAgICAgICBfLmVhY2goSGVscGVycy5nZXRTZWxlY3RlZEZpbGVzKCksIGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChfLmNvbnRhaW5zKFsnaW1hZ2UnLCAneW91dHViZScsICdwZGYnLCAndGV4dCcsICd2aWRlbyddLCB2YWx1ZS50eXBlKSkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBzcmM6IHZhbHVlLnVybFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFJlY2VudEl0ZW1zLnB1c2godmFsdWUuaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoXy5zaXplKHNlbGVjdGVkKSA+IDApIHtcbiAgICAgICAgICAgICQuZmFuY3lib3gub3BlbihzZWxlY3RlZCk7XG4gICAgICAgICAgICBIZWxwZXJzLnN0b3JlUmVjZW50SXRlbXMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlR2xvYmFsQWN0aW9uKCdkb3dubG9hZCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc3RhdGljIGhhbmRsZUNvcHlMaW5rKCkge1xuICAgICAgICBsZXQgbGlua3MgPSAnJztcbiAgICAgICAgXy5lYWNoKEhlbHBlcnMuZ2V0U2VsZWN0ZWRGaWxlcygpLCBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoIV8uaXNFbXB0eShsaW5rcykpIHtcbiAgICAgICAgICAgICAgICBsaW5rcyArPSAnXFxuJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxpbmtzICs9IHZhbHVlLmZ1bGxfdXJsO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0ICRjbGlwYm9hcmRUZW1wID0gJCgnLmpzLXJ2LWNsaXBib2FyZC10ZW1wJyk7XG4gICAgICAgICRjbGlwYm9hcmRUZW1wLmRhdGEoJ2NsaXBib2FyZC10ZXh0JywgbGlua3MpO1xuICAgICAgICBuZXcgQ2xpcGJvYXJkKCcuanMtcnYtY2xpcGJvYXJkLXRlbXAnLCB7XG4gICAgICAgICAgICB0ZXh0OiBmdW5jdGlvbiAodHJpZ2dlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBsaW5rcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNob3dNZXNzYWdlKCdzdWNjZXNzJywgUlZfTUVESUFfQ09ORklHLnRyYW5zbGF0aW9ucy5jbGlwYm9hcmQuc3VjY2VzcywgUlZfTUVESUFfQ09ORklHLnRyYW5zbGF0aW9ucy5tZXNzYWdlLnN1Y2Nlc3NfaGVhZGVyKTtcbiAgICAgICAgJGNsaXBib2FyZFRlbXAudHJpZ2dlcignY2xpY2snKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgaGFuZGxlR2xvYmFsQWN0aW9uKHR5cGUsIGNhbGxiYWNrKSB7XG4gICAgICAgIGxldCBzZWxlY3RlZCA9IFtdO1xuICAgICAgICBfLmVhY2goSGVscGVycy5nZXRTZWxlY3RlZEl0ZW1zKCksIGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIHNlbGVjdGVkLnB1c2goe1xuICAgICAgICAgICAgICAgIGlzX2ZvbGRlcjogdmFsdWUuaXNfZm9sZGVyLFxuICAgICAgICAgICAgICAgIGlkOiB2YWx1ZS5pZCxcbiAgICAgICAgICAgICAgICBmdWxsX3VybDogdmFsdWUuZnVsbF91cmwsXG4gICAgICAgICAgICAgICAgZm9jdXM6IHZhbHVlLmZvY3VzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSAncmVuYW1lJzpcbiAgICAgICAgICAgICAgICAkKCcjbW9kYWxfcmVuYW1lX2l0ZW1zJykubW9kYWwoJ3Nob3cnKS5maW5kKCdmb3JtLnJ2LWZvcm0nKS5kYXRhKCdhY3Rpb24nLCB0eXBlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2NvcHlfbGluayc6XG4gICAgICAgICAgICAgICAgQWN0aW9uc1NlcnZpY2UuaGFuZGxlQ29weUxpbmsoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3ByZXZpZXcnOlxuICAgICAgICAgICAgICAgIEFjdGlvbnNTZXJ2aWNlLmhhbmRsZVByZXZpZXcoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3NldF9mb2N1c19wb2ludCc6XG4gICAgICAgICAgICAgICAgbGV0IG1vZGFsID0gJCgnI21vZGFsX3NldF9mb2N1c19wb2ludCcpO1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZFswXS5mb2N1cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwuZmluZCgnLmhlbHBlci10b29sLWRhdGEtYXR0cicpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLmZpbmQoJy5oZWxwZXItdG9vbC1jc3MzLXZhbCcpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLmZpbmQoJy5oZWxwZXItdG9vbC1yZXRpY2xlLWNzcycpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5yZXRpY2xlJykucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtb2RhbC5maW5kKCcuaGVscGVyLXRvb2wtZGF0YS1hdHRyJykudmFsKHNlbGVjdGVkWzBdLmZvY3VzLmRhdGFfYXR0cmlidXRlKTtcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwuZmluZCgnLmhlbHBlci10b29sLWNzczMtdmFsJykudmFsKHNlbGVjdGVkWzBdLmZvY3VzLmNzc19iZ19wb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLmZpbmQoJy5oZWxwZXItdG9vbC1yZXRpY2xlLWNzcycpLnZhbChzZWxlY3RlZFswXS5mb2N1cy5yZXRpY2VfY3NzKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnJldGljbGUnKS5wcm9wKCdzdHlsZScsIHNlbGVjdGVkWzBdLmZvY3VzLnJldGljZV9jc3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtb2RhbC5tb2RhbCgnc2hvdycpLmZpbmQoJ2Zvcm0ucnYtZm9ybScpLmRhdGEoJ2FjdGlvbicsIHR5cGUpLmRhdGEoJ2ltYWdlJywgc2VsZWN0ZWRbMF0uZnVsbF91cmwpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndHJhc2gnOlxuICAgICAgICAgICAgICAgICQoJyNtb2RhbF90cmFzaF9pdGVtcycpLm1vZGFsKCdzaG93JykuZmluZCgnZm9ybS5ydi1mb3JtJykuZGF0YSgnYWN0aW9uJywgdHlwZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgICQoJyNtb2RhbF9kZWxldGVfaXRlbXMnKS5tb2RhbCgnc2hvdycpLmZpbmQoJ2Zvcm0ucnYtZm9ybScpLmRhdGEoJ2FjdGlvbicsIHR5cGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnc2hhcmUnOlxuICAgICAgICAgICAgICAgICQoJyNtb2RhbF9zaGFyZV9pdGVtcycpLm1vZGFsKCdzaG93JykuZmluZCgnZm9ybS5ydi1mb3JtJykuZGF0YSgnYWN0aW9uJywgdHlwZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdlbXB0eV90cmFzaCc6XG4gICAgICAgICAgICAgICAgJCgnI21vZGFsX2VtcHR5X3RyYXNoJykubW9kYWwoJ3Nob3cnKS5maW5kKCdmb3JtLnJ2LWZvcm0nKS5kYXRhKCdhY3Rpb24nLCB0eXBlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2Rvd25sb2FkJzpcbiAgICAgICAgICAgICAgICBsZXQgZG93bmxvYWRMaW5rID0gUlZfTUVESUFfVVJMLmRvd25sb2FkO1xuICAgICAgICAgICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgXy5lYWNoKEhlbHBlcnMuZ2V0U2VsZWN0ZWRJdGVtcygpLCBmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghXy5jb250YWlucyhIZWxwZXJzLmdldENvbmZpZ3MoKS5kZW5pZWRfZG93bmxvYWQsIHZhbHVlLm1pbWVfdHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvd25sb2FkTGluayArPSAoY291bnQgPT09IDAgPyAnPycgOiAnJicpICsgJ3NlbGVjdGVkWycgKyBjb3VudCArICddW2lzX2ZvbGRlcl09JyArIHZhbHVlLmlzX2ZvbGRlciArICcmc2VsZWN0ZWRbJyArIGNvdW50ICsgJ11baWRdPScgKyB2YWx1ZS5pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoZG93bmxvYWRMaW5rICE9PSBSVl9NRURJQV9VUkwuZG93bmxvYWQpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oZG93bmxvYWRMaW5rLCAnX2JsYW5rJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2hvd01lc3NhZ2UoJ2Vycm9yJywgUlZfTUVESUFfQ09ORklHLnRyYW5zbGF0aW9ucy5kb3dubG9hZC5lcnJvciwgUlZfTUVESUFfQ09ORklHLnRyYW5zbGF0aW9ucy5tZXNzYWdlLmVycm9yX2hlYWRlcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBBY3Rpb25zU2VydmljZS5wcm9jZXNzQWN0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHNlbGVjdGVkLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IHR5cGVcbiAgICAgICAgICAgICAgICB9LCBjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgcHJvY2Vzc0FjdGlvbihkYXRhLCBjYWxsYmFjayA9IG51bGwpIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogUlZfTUVESUFfVVJMLmdsb2JhbF9hY3Rpb25zLFxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgSGVscGVycy5zaG93QWpheExvYWRpbmcoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgSGVscGVycy5yZXNldFBhZ2luYXRpb24oKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlcy5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zaG93TWVzc2FnZSgnc3VjY2VzcycsIHJlcy5tZXNzYWdlLCBSVl9NRURJQV9DT05GSUcudHJhbnNsYXRpb25zLm1lc3NhZ2Uuc3VjY2Vzc19oZWFkZXIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNob3dNZXNzYWdlKCdlcnJvcicsIHJlcy5tZXNzYWdlLCBSVl9NRURJQV9DT05GSUcudHJhbnNsYXRpb25zLm1lc3NhZ2UuZXJyb3JfaGVhZGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIEhlbHBlcnMuaGlkZUFqYXhMb2FkaW5nKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2UuaGFuZGxlRXJyb3IoZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyByZW5kZXJSZW5hbWVJdGVtcygpIHtcbiAgICAgICAgbGV0IFZJRVcgPSAkKCcjcnZfbWVkaWFfcmVuYW1lX2l0ZW0nKS5odG1sKCk7XG4gICAgICAgIGxldCAkaXRlbXNXcmFwcGVyID0gJCgnI21vZGFsX3JlbmFtZV9pdGVtcyAucmVuYW1lLWl0ZW1zJykuZW1wdHkoKTtcblxuICAgICAgICBfLmVhY2goSGVscGVycy5nZXRTZWxlY3RlZEl0ZW1zKCksIGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIGxldCBpdGVtID0gVklFV1xuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvX19pY29uX18vZ2ksIHZhbHVlLmljb24gfHwgJ2ZhIGZhLWZpbGUtbycpXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9fX3BsYWNlaG9sZGVyX18vZ2ksICdJbnB1dCBmaWxlIG5hbWUnKVxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvX192YWx1ZV9fL2dpLCB2YWx1ZS5uYW1lKVxuICAgICAgICAgICAgICAgIDtcbiAgICAgICAgICAgIGxldCAkaXRlbSA9ICQoaXRlbSk7XG4gICAgICAgICAgICAkaXRlbS5kYXRhKCdpZCcsIHZhbHVlLmlkKTtcbiAgICAgICAgICAgICRpdGVtLmRhdGEoJ2lzX2ZvbGRlcicsIHZhbHVlLmlzX2ZvbGRlcik7XG4gICAgICAgICAgICAkaXRlbS5kYXRhKCduYW1lJywgdmFsdWUubmFtZSk7XG4gICAgICAgICAgICAkaXRlbXNXcmFwcGVyLmFwcGVuZCgkaXRlbSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyByZW5kZXJBY3Rpb25zKCkge1xuICAgICAgICBsZXQgaGFzRm9sZGVyU2VsZWN0ZWQgPSBIZWxwZXJzLmdldFNlbGVjdGVkRm9sZGVyKCkubGVuZ3RoID4gMDtcblxuICAgICAgICBsZXQgQUNUSU9OX1RFTVBMQVRFID0gJCgnI3J2X2FjdGlvbl9pdGVtJykuaHRtbCgpO1xuICAgICAgICBsZXQgaW5pdGlhbGl6ZWRfaXRlbSA9IDA7XG4gICAgICAgIGxldCAkZHJvcGRvd25BY3Rpb25zID0gJCgnLnJ2LWRyb3Bkb3duLWFjdGlvbnMgLmRyb3Bkb3duLW1lbnUnKTtcbiAgICAgICAgJGRyb3Bkb3duQWN0aW9ucy5lbXB0eSgpO1xuXG4gICAgICAgIGxldCBhY3Rpb25zTGlzdCA9ICQuZXh0ZW5kKHt9LCB0cnVlLCBIZWxwZXJzLmdldENvbmZpZ3MoKS5hY3Rpb25zX2xpc3QpO1xuXG4gICAgICAgIGlmIChoYXNGb2xkZXJTZWxlY3RlZCkge1xuICAgICAgICAgICAgYWN0aW9uc0xpc3QuYmFzaWMgPSBfLnJlamVjdChhY3Rpb25zTGlzdC5iYXNpYywgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5hY3Rpb24gPT09ICdwcmV2aWV3JztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYWN0aW9uc0xpc3QuZmlsZSA9IF8ucmVqZWN0KGFjdGlvbnNMaXN0LmZpbGUsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uYWN0aW9uID09PSAnY29weV9saW5rJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYWN0aW9uc0xpc3QuZmlsZSA9IF8ucmVqZWN0KGFjdGlvbnNMaXN0LmZpbGUsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0uYWN0aW9uID09PSAnc2V0X2ZvY3VzX3BvaW50JztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoIV8uY29udGFpbnMoUlZfTUVESUFfQ09ORklHLnBlcm1pc3Npb25zLCAnZm9sZGVycy5jcmVhdGUnKSkge1xuICAgICAgICAgICAgICAgIGFjdGlvbnNMaXN0LmZpbGUgPSBfLnJlamVjdChhY3Rpb25zTGlzdC5maWxlLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5hY3Rpb24gPT09ICdtYWtlX2NvcHknO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIV8uY29udGFpbnMoUlZfTUVESUFfQ09ORklHLnBlcm1pc3Npb25zLCAnZm9sZGVycy5lZGl0JykpIHtcbiAgICAgICAgICAgICAgICBhY3Rpb25zTGlzdC5maWxlID0gXy5yZWplY3QoYWN0aW9uc0xpc3QuZmlsZSwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF8uY29udGFpbnMoWydyZW5hbWUnXSwgaXRlbS5hY3Rpb24pO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgYWN0aW9uc0xpc3QudXNlciA9IF8ucmVqZWN0KGFjdGlvbnNMaXN0LnVzZXIsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLmNvbnRhaW5zKFsncmVuYW1lJywgJ3NoYXJlJywgJ3JlbW92ZV9zaGFyZScsICd1bl9zaGFyZSddLCBpdGVtLmFjdGlvbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghXy5jb250YWlucyhSVl9NRURJQV9DT05GSUcucGVybWlzc2lvbnMsICdmb2xkZXJzLnRyYXNoJykpIHtcbiAgICAgICAgICAgICAgICBhY3Rpb25zTGlzdC5vdGhlciA9IF8ucmVqZWN0KGFjdGlvbnNMaXN0Lm90aGVyLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5jb250YWlucyhbJ3RyYXNoJywgJ3Jlc3RvcmUnXSwgaXRlbS5hY3Rpb24pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIV8uY29udGFpbnMoUlZfTUVESUFfQ09ORklHLnBlcm1pc3Npb25zLCAnZm9sZGVycy5kZWxldGUnKSkge1xuICAgICAgICAgICAgICAgIGFjdGlvbnNMaXN0Lm90aGVyID0gXy5yZWplY3QoYWN0aW9uc0xpc3Qub3RoZXIsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLmNvbnRhaW5zKFsnZGVsZXRlJ10sIGl0ZW0uYWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzZWxlY3RlZEZpbGVzID0gSGVscGVycy5nZXRTZWxlY3RlZEZpbGVzKCk7XG4gICAgICAgIGlmIChzZWxlY3RlZEZpbGVzLmxlbmd0aCA+IDAgJiYgc2VsZWN0ZWRGaWxlc1swXS50eXBlICE9PSAnaW1hZ2UnKSB7XG4gICAgICAgICAgICBhY3Rpb25zTGlzdC5maWxlID0gXy5yZWplY3QoYWN0aW9uc0xpc3QuZmlsZSwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5hY3Rpb24gPT09ICdzZXRfZm9jdXNfcG9pbnQnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgY2FuX3ByZXZpZXcgPSBmYWxzZTtcbiAgICAgICAgXy5lYWNoKHNlbGVjdGVkRmlsZXMsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKF8uY29udGFpbnMoWydpbWFnZScsICd5b3V0dWJlJywgJ3BkZicsICd0ZXh0JywgJ3ZpZGVvJ10sIHZhbHVlLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgY2FuX3ByZXZpZXcgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIWNhbl9wcmV2aWV3KSB7XG4gICAgICAgICAgICBhY3Rpb25zTGlzdC5iYXNpYyA9IF8ucmVqZWN0KGFjdGlvbnNMaXN0LmJhc2ljLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmFjdGlvbiA9PT0gJ3ByZXZpZXcnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoUlZfTUVESUFfQ09ORklHLm1vZGUgPT09ICdzaW1wbGUnKSB7XG4gICAgICAgICAgICBhY3Rpb25zTGlzdC51c2VyID0gXy5yZWplY3QoYWN0aW9uc0xpc3QudXNlciwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5jb250YWlucyhbJ3NoYXJlJywgJ3JlbW92ZV9zaGFyZScsICd1bl9zaGFyZSddLCBpdGVtLmFjdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxlY3RlZEZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGlmICghXy5jb250YWlucyhSVl9NRURJQV9DT05GSUcucGVybWlzc2lvbnMsICdmaWxlcy5jcmVhdGUnKSkge1xuICAgICAgICAgICAgICAgIGFjdGlvbnNMaXN0LmZpbGUgPSBfLnJlamVjdChhY3Rpb25zTGlzdC5maWxlLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5hY3Rpb24gPT09ICdtYWtlX2NvcHknO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIV8uY29udGFpbnMoUlZfTUVESUFfQ09ORklHLnBlcm1pc3Npb25zLCAnZmlsZXMuZWRpdCcpKSB7XG4gICAgICAgICAgICAgICAgYWN0aW9uc0xpc3QuZmlsZSA9IF8ucmVqZWN0KGFjdGlvbnNMaXN0LmZpbGUsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLmNvbnRhaW5zKFsncmVuYW1lJywgJ3NldF9mb2N1c19wb2ludCddLCBpdGVtLmFjdGlvbik7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBhY3Rpb25zTGlzdC51c2VyID0gXy5yZWplY3QoYWN0aW9uc0xpc3QudXNlciwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF8uY29udGFpbnMoWydzaGFyZScsICdyZW1vdmVfc2hhcmUnLCAndW5fc2hhcmUnXSwgaXRlbS5hY3Rpb24pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIV8uY29udGFpbnMoUlZfTUVESUFfQ09ORklHLnBlcm1pc3Npb25zLCAnZmlsZXMudHJhc2gnKSkge1xuICAgICAgICAgICAgICAgIGFjdGlvbnNMaXN0Lm90aGVyID0gXy5yZWplY3QoYWN0aW9uc0xpc3Qub3RoZXIsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLmNvbnRhaW5zKFsndHJhc2gnLCAncmVzdG9yZSddLCBpdGVtLmFjdGlvbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghXy5jb250YWlucyhSVl9NRURJQV9DT05GSUcucGVybWlzc2lvbnMsICdmaWxlcy5kZWxldGUnKSkge1xuICAgICAgICAgICAgICAgIGFjdGlvbnNMaXN0Lm90aGVyID0gXy5yZWplY3QoYWN0aW9uc0xpc3Qub3RoZXIsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLmNvbnRhaW5zKFsnZGVsZXRlJ10sIGl0ZW0uYWN0aW9uKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIF8uZWFjaChhY3Rpb25zTGlzdCwgZnVuY3Rpb24gKGFjdGlvbiwga2V5KSB7XG4gICAgICAgICAgICBfLmVhY2goYWN0aW9uLCBmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICBsZXQgaXNfYnJlYWsgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKEhlbHBlcnMuZ2V0UmVxdWVzdFBhcmFtcygpLnZpZXdfaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbXlfbWVkaWEnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF8uY29udGFpbnMoWydyZW1vdmVfZmF2b3JpdGUnLCAnZGVsZXRlJywgJ3Jlc3RvcmUnLCAncmVtb3ZlX3NoYXJlJ10sIGl0ZW0uYWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2JyZWFrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdzaGFyZWQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF8uY29udGFpbnMoWydyZW1vdmVfZmF2b3JpdGUnLCAnZGVsZXRlJywgJ3Jlc3RvcmUnLCAnbWFrZV9jb3B5JywgJ3JlbW92ZV9zaGFyZSddLCBpdGVtLmFjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19icmVhayA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2hhcmVkX3dpdGhfbWUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF8uY29udGFpbnMoWydyZW1vdmVfZmF2b3JpdGUnLCAnZGVsZXRlJywgJ3Jlc3RvcmUnLCAnbWFrZV9jb3B5JywgJ3NoYXJlJ10sIGl0ZW0uYWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2JyZWFrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdwdWJsaWMnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF8uY29udGFpbnMoWydyZW1vdmVfZmF2b3JpdGUnLCAnZGVsZXRlJywgJ3Jlc3RvcmUnLCAnbWFrZV9jb3B5JywgJ3NoYXJlJywgJ3JlbW92ZV9zaGFyZSddLCBpdGVtLmFjdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19icmVhayA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVjZW50JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfLmNvbnRhaW5zKFsncmVtb3ZlX2Zhdm9yaXRlJywgJ2RlbGV0ZScsICdyZXN0b3JlJywgJ21ha2VfY29weScsICdyZW1vdmVfc2hhcmUnXSwgaXRlbS5hY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfYnJlYWsgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2Zhdm9yaXRlcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXy5jb250YWlucyhbJ2Zhdm9yaXRlJywgJ2RlbGV0ZScsICdyZXN0b3JlJywgJ21ha2VfY29weScsICdyZW1vdmVfc2hhcmUnXSwgaXRlbS5hY3Rpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfYnJlYWsgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RyYXNoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghXy5jb250YWlucyhbJ3ByZXZpZXcnLCAnZGVsZXRlJywgJ3Jlc3RvcmUnLCAncmVuYW1lJywgJ2Rvd25sb2FkJ10sIGl0ZW0uYWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2JyZWFrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWlzX2JyZWFrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wbGF0ZSA9IEFDVElPTl9URU1QTEFURVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL19fYWN0aW9uX18vZ2ksIGl0ZW0uYWN0aW9uIHx8ICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL19faWNvbl9fL2dpLCBpdGVtLmljb24gfHwgJycpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvX19uYW1lX18vZ2ksIFJWX01FRElBX0NPTkZJRy50cmFuc2xhdGlvbnMuYWN0aW9uc19saXN0W2tleV1baXRlbS5hY3Rpb25dIHx8IGl0ZW0ubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaW5kZXggJiYgaW5pdGlhbGl6ZWRfaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGUgPSAnPGxpIHJvbGU9XCJzZXBhcmF0b3JcIiBjbGFzcz1cImRpdmlkZXJcIj48L2xpPicgKyB0ZW1wbGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAkZHJvcGRvd25BY3Rpb25zLmFwcGVuZCh0ZW1wbGF0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoYWN0aW9uLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplZF9pdGVtKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyByZXNvdXJjZXMvYXNzZXRzL2pzL0FwcC9TZXJ2aWNlcy9BY3Rpb25zU2VydmljZS5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhBO0FBQUE7QUFBQTtBQWNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQS9CQTtBQUFBO0FBQUE7QUFrQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQWxEQTtBQUFBO0FBQUE7QUFxREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQXpEQTtBQTJEQTtBQTFIQTtBQUFBO0FBQUE7QUE0SEE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBeEJBO0FBMEJBO0FBdkpBO0FBQUE7QUFBQTtBQTBKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF6S0E7QUFBQTtBQUFBO0FBNEtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW5DQTtBQXFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTVVQTtBQUNBO0FBREE7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4\n");

/***/ }),
/* 5 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"EditorService\", function() { return EditorService; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__App_Helpers_Helpers__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_Config_MediaConfig__ = __webpack_require__(1);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar EditorService = function () {\n    function EditorService() {\n        _classCallCheck(this, EditorService);\n    }\n\n    _createClass(EditorService, null, [{\n        key: 'editorSelectFile',\n        value: function editorSelectFile(selectedFiles) {\n\n            var is_ckeditor = __WEBPACK_IMPORTED_MODULE_0__App_Helpers_Helpers__[\"a\" /* Helpers */].getUrlParam('CKEditor') || __WEBPACK_IMPORTED_MODULE_0__App_Helpers_Helpers__[\"a\" /* Helpers */].getUrlParam('CKEditorFuncNum');\n\n            if (window.opener && is_ckeditor) {\n                var firstItem = _.first(selectedFiles);\n\n                window.opener.CKEDITOR.tools.callFunction(__WEBPACK_IMPORTED_MODULE_0__App_Helpers_Helpers__[\"a\" /* Helpers */].getUrlParam('CKEditorFuncNum'), firstItem.url);\n\n                if (window.opener) {\n                    window.close();\n                }\n            } else {\n                // No WYSIWYG editor found, use custom method.\n            }\n        }\n    }]);\n\n    return EditorService;\n}();\n\nvar rvMedia = function rvMedia(selector, options) {\n    _classCallCheck(this, rvMedia);\n\n    window.rvMedia = window.rvMedia || {};\n\n    var $body = $('body');\n\n    var defaultOptions = {\n        multiple: true,\n        type: '*',\n        onSelectFiles: function onSelectFiles(files, $el) {}\n    };\n\n    options = $.extend(true, defaultOptions, options);\n\n    var clickCallback = function clickCallback(event) {\n        event.preventDefault();\n        var $current = $(this);\n        $('#rv_media_modal').modal();\n\n        window.rvMedia.options = options;\n        window.rvMedia.options.open_in = 'modal';\n\n        window.rvMedia.$el = $current;\n\n        __WEBPACK_IMPORTED_MODULE_1__App_Config_MediaConfig__[\"a\" /* MediaConfig */].request_params.filter = 'everything';\n        __WEBPACK_IMPORTED_MODULE_0__App_Helpers_Helpers__[\"a\" /* Helpers */].storeConfig();\n\n        var ele_options = window.rvMedia.$el.data('rv-media');\n        if (typeof ele_options !== 'undefined' && ele_options.length > 0) {\n            ele_options = ele_options[0];\n            window.rvMedia.options = $.extend(true, window.rvMedia.options, ele_options || {});\n            if (typeof ele_options.selected_file_id !== 'undefined') {\n                window.rvMedia.options.is_popup = true;\n            } else if (typeof window.rvMedia.options.is_popup !== 'undefined') {\n                window.rvMedia.options.is_popup = undefined;\n            }\n        }\n\n        if ($('#rv_media_body .rv-media-container').length === 0) {\n            $('#rv_media_body').load(RV_MEDIA_URL.popup, function (data) {\n                if (data.error) {\n                    alert(data.message);\n                }\n                $('#rv_media_body').removeClass('media-modal-loading').closest('.modal-content').removeClass('bb-loading');\n            });\n        } else {\n            $(document).find('.rv-media-container .js-change-action[data-type=refresh]').trigger('click');\n        }\n    };\n\n    if (typeof selector === 'string') {\n        $body.on('click', selector, clickCallback);\n    } else {\n        selector.on('click', clickCallback);\n    }\n};\n\nwindow.RvMediaStandAlone = rvMedia;\n\n$('.js-insert-to-editor').off('click').on('click', function (event) {\n    event.preventDefault();\n    var selectedFiles = __WEBPACK_IMPORTED_MODULE_0__App_Helpers_Helpers__[\"a\" /* Helpers */].getSelectedFiles();\n    if (_.size(selectedFiles) > 0) {\n        EditorService.editorSelectFile(selectedFiles);\n    }\n});\n\n$.fn.rvMedia = function (options) {\n    var $selector = $(this);\n\n    __WEBPACK_IMPORTED_MODULE_1__App_Config_MediaConfig__[\"a\" /* MediaConfig */].request_params.filter = 'everything';\n    if (__WEBPACK_IMPORTED_MODULE_1__App_Config_MediaConfig__[\"a\" /* MediaConfig */].request_params.view_in === 'trash') {\n        $(document).find('.js-insert-to-editor').prop('disabled', true);\n    } else {\n        $(document).find('.js-insert-to-editor').prop('disabled', false);\n    }\n    __WEBPACK_IMPORTED_MODULE_0__App_Helpers_Helpers__[\"a\" /* Helpers */].storeConfig();\n\n    new rvMedia($selector, options);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9yZXNvdXJjZXMvYXNzZXRzL2pzL2ludGVncmF0ZS5qcz9jOGE3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SGVscGVyc30gZnJvbSAnLi9BcHAvSGVscGVycy9IZWxwZXJzJztcbmltcG9ydCB7TWVkaWFDb25maWd9IGZyb20gJy4vQXBwL0NvbmZpZy9NZWRpYUNvbmZpZyc7XG5cbmV4cG9ydCBjbGFzcyBFZGl0b3JTZXJ2aWNlIHtcbiAgICBzdGF0aWMgZWRpdG9yU2VsZWN0RmlsZShzZWxlY3RlZEZpbGVzKSB7XG5cbiAgICAgICAgbGV0IGlzX2NrZWRpdG9yID0gSGVscGVycy5nZXRVcmxQYXJhbSgnQ0tFZGl0b3InKSB8fCBIZWxwZXJzLmdldFVybFBhcmFtKCdDS0VkaXRvckZ1bmNOdW0nKTtcblxuICAgICAgICBpZiAod2luZG93Lm9wZW5lciAmJiBpc19ja2VkaXRvcikge1xuICAgICAgICAgICAgbGV0IGZpcnN0SXRlbSA9IF8uZmlyc3Qoc2VsZWN0ZWRGaWxlcyk7XG5cbiAgICAgICAgICAgIHdpbmRvdy5vcGVuZXIuQ0tFRElUT1IudG9vbHMuY2FsbEZ1bmN0aW9uKEhlbHBlcnMuZ2V0VXJsUGFyYW0oJ0NLRWRpdG9yRnVuY051bScpLCBmaXJzdEl0ZW0udXJsKTtcblxuICAgICAgICAgICAgaWYgKHdpbmRvdy5vcGVuZXIpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vIFdZU0lXWUcgZWRpdG9yIGZvdW5kLCB1c2UgY3VzdG9tIG1ldGhvZC5cbiAgICAgICAgfVxuICAgIH1cbn1cblxuY2xhc3MgcnZNZWRpYSB7XG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIG9wdGlvbnMpIHtcbiAgICAgICAgd2luZG93LnJ2TWVkaWEgPSB3aW5kb3cucnZNZWRpYSB8fCB7fTtcblxuICAgICAgICBsZXQgJGJvZHkgPSAkKCdib2R5Jyk7XG5cbiAgICAgICAgbGV0IGRlZmF1bHRPcHRpb25zID0ge1xuICAgICAgICAgICAgbXVsdGlwbGU6IHRydWUsXG4gICAgICAgICAgICB0eXBlOiAnKicsXG4gICAgICAgICAgICBvblNlbGVjdEZpbGVzOiBmdW5jdGlvbiAoZmlsZXMsICRlbCkge1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcblxuICAgICAgICBsZXQgY2xpY2tDYWxsYmFjayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGxldCAkY3VycmVudCA9ICQodGhpcyk7XG4gICAgICAgICAgICAkKCcjcnZfbWVkaWFfbW9kYWwnKS5tb2RhbCgpO1xuXG4gICAgICAgICAgICB3aW5kb3cucnZNZWRpYS5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgICAgIHdpbmRvdy5ydk1lZGlhLm9wdGlvbnMub3Blbl9pbiA9ICdtb2RhbCc7XG5cbiAgICAgICAgICAgIHdpbmRvdy5ydk1lZGlhLiRlbCA9ICRjdXJyZW50O1xuXG4gICAgICAgICAgICBNZWRpYUNvbmZpZy5yZXF1ZXN0X3BhcmFtcy5maWx0ZXIgPSAnZXZlcnl0aGluZyc7XG4gICAgICAgICAgICBIZWxwZXJzLnN0b3JlQ29uZmlnKCk7XG5cbiAgICAgICAgICAgIGxldCBlbGVfb3B0aW9ucyA9IHdpbmRvdy5ydk1lZGlhLiRlbC5kYXRhKCdydi1tZWRpYScpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlbGVfb3B0aW9ucyAhPT0gJ3VuZGVmaW5lZCcgJiYgZWxlX29wdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGVsZV9vcHRpb25zID0gZWxlX29wdGlvbnNbMF07XG4gICAgICAgICAgICAgICAgd2luZG93LnJ2TWVkaWEub3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHdpbmRvdy5ydk1lZGlhLm9wdGlvbnMsIGVsZV9vcHRpb25zIHx8IHt9KTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVsZV9vcHRpb25zLnNlbGVjdGVkX2ZpbGVfaWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5ydk1lZGlhLm9wdGlvbnMuaXNfcG9wdXAgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHdpbmRvdy5ydk1lZGlhLm9wdGlvbnMuaXNfcG9wdXAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5ydk1lZGlhLm9wdGlvbnMuaXNfcG9wdXAgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoJCgnI3J2X21lZGlhX2JvZHkgLnJ2LW1lZGlhLWNvbnRhaW5lcicpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICQoJyNydl9tZWRpYV9ib2R5JykubG9hZChSVl9NRURJQV9VUkwucG9wdXAsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChkYXRhLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICQoJyNydl9tZWRpYV9ib2R5JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZW1vdmVDbGFzcygnbWVkaWEtbW9kYWwtbG9hZGluZycpXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2xvc2VzdCgnLm1vZGFsLWNvbnRlbnQnKS5yZW1vdmVDbGFzcygnYmItbG9hZGluZycpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5maW5kKCcucnYtbWVkaWEtY29udGFpbmVyIC5qcy1jaGFuZ2UtYWN0aW9uW2RhdGEtdHlwZT1yZWZyZXNoXScpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICRib2R5Lm9uKCdjbGljaycsIHNlbGVjdG9yLCBjbGlja0NhbGxiYWNrKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlbGVjdG9yLm9uKCdjbGljaycsIGNsaWNrQ2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfVxufVxuXG53aW5kb3cuUnZNZWRpYVN0YW5kQWxvbmUgPSBydk1lZGlhO1xuXG4kKCcuanMtaW5zZXJ0LXRvLWVkaXRvcicpLm9mZignY2xpY2snKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGxldCBzZWxlY3RlZEZpbGVzID0gSGVscGVycy5nZXRTZWxlY3RlZEZpbGVzKCk7XG4gICAgaWYgKF8uc2l6ZShzZWxlY3RlZEZpbGVzKSA+IDApIHtcbiAgICAgICAgRWRpdG9yU2VydmljZS5lZGl0b3JTZWxlY3RGaWxlKHNlbGVjdGVkRmlsZXMpO1xuICAgIH1cbn0pO1xuXG4kLmZuLnJ2TWVkaWEgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIGxldCAkc2VsZWN0b3IgPSAkKHRoaXMpO1xuXG4gICAgTWVkaWFDb25maWcucmVxdWVzdF9wYXJhbXMuZmlsdGVyID0gJ2V2ZXJ5dGhpbmcnO1xuICAgIGlmIChNZWRpYUNvbmZpZy5yZXF1ZXN0X3BhcmFtcy52aWV3X2luID09PSAndHJhc2gnKSB7XG4gICAgICAgICQoZG9jdW1lbnQpLmZpbmQoJy5qcy1pbnNlcnQtdG8tZWRpdG9yJykucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKGRvY3VtZW50KS5maW5kKCcuanMtaW5zZXJ0LXRvLWVkaXRvcicpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgIH1cbiAgICBIZWxwZXJzLnN0b3JlQ29uZmlnKCk7XG5cbiAgICBuZXcgcnZNZWRpYSgkc2VsZWN0b3IsIG9wdGlvbnMpO1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyByZXNvdXJjZXMvYXNzZXRzL2pzL2ludGVncmF0ZS5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBaEJBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFrQkE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5\n");

/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return MediaList; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Helpers_Helpers__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Services_ActionsService__ = __webpack_require__(4);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar MediaList = function () {\n    function MediaList() {\n        _classCallCheck(this, MediaList);\n\n        this.group = {};\n        this.group.list = $('#rv_media_items_list').html();\n        this.group.tiles = $('#rv_media_items_tiles').html();\n\n        this.item = {};\n        this.item.list = $('#rv_media_items_list_element').html();\n        this.item.tiles = $('#rv_media_items_tiles_element').html();\n\n        this.$groupContainer = $('.rv-media-items');\n    }\n\n    _createClass(MediaList, [{\n        key: 'renderData',\n        value: function renderData(data) {\n            var reload = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n            var load_more_file = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n            var _self = this;\n            var MediaConfig = __WEBPACK_IMPORTED_MODULE_0__Helpers_Helpers__[\"a\" /* Helpers */].getConfigs();\n            var template = _self.group[__WEBPACK_IMPORTED_MODULE_0__Helpers_Helpers__[\"a\" /* Helpers */].getRequestParams().view_type];\n\n            var view_in = __WEBPACK_IMPORTED_MODULE_0__Helpers_Helpers__[\"a\" /* Helpers */].getRequestParams().view_in;\n\n            if (!_.contains(['my_media', 'public', 'trash', 'favorites', 'shared', 'shared_with_me', 'recent'], view_in)) {\n                view_in = 'my_media';\n            }\n\n            template = template.replace(/__noItemIcon__/gi, RV_MEDIA_CONFIG.translations.no_item[view_in].icon || '').replace(/__noItemTitle__/gi, RV_MEDIA_CONFIG.translations.no_item[view_in].title || '').replace(/__noItemMessage__/gi, RV_MEDIA_CONFIG.translations.no_item[view_in].message || '');\n\n            var $result = $(template);\n            var $itemsWrapper = $result.find('ul');\n\n            if (load_more_file && this.$groupContainer.find('.rv-media-grid ul').length > 0) {\n                $itemsWrapper = this.$groupContainer.find('.rv-media-grid ul');\n            }\n\n            if (_.size(data.folders) > 0 || _.size(data.files) > 0) {\n                $('.rv-media-items').addClass('has-items');\n            } else {\n                $('.rv-media-items').removeClass('has-items');\n            }\n\n            _.forEach(data.folders, function (value, index) {\n                var item = _self.item[__WEBPACK_IMPORTED_MODULE_0__Helpers_Helpers__[\"a\" /* Helpers */].getRequestParams().view_type];\n                item = item.replace(/__type__/gi, 'folder').replace(/__id__/gi, value.id).replace(/__name__/gi, value.name || '').replace(/__size__/gi, '').replace(/__date__/gi, value.created_at || '').replace(/__thumb__/gi, '<i class=\"fa fa-folder-o\"></i>');\n                var $item = $(item);\n                _.forEach(value, function (val, index) {\n                    $item.data(index, val);\n                });\n                $item.data('is_folder', true);\n                $item.data('icon', MediaConfig.icons.folder);\n                $itemsWrapper.append($item);\n            });\n\n            _.forEach(data.files, function (value) {\n                var item = _self.item[__WEBPACK_IMPORTED_MODULE_0__Helpers_Helpers__[\"a\" /* Helpers */].getRequestParams().view_type];\n                item = item.replace(/__type__/gi, 'file').replace(/__id__/gi, value.id).replace(/__name__/gi, value.name || '').replace(/__size__/gi, value.size || '').replace(/__date__/gi, value.created_at || '');\n                if (__WEBPACK_IMPORTED_MODULE_0__Helpers_Helpers__[\"a\" /* Helpers */].getRequestParams().view_type === 'list') {\n                    item = item.replace(/__thumb__/gi, '<i class=\"' + value.icon + '\"></i>');\n                } else {\n                    switch (value.mime_type) {\n                        case 'youtube':\n                            item = item.replace(/__thumb__/gi, '<img src=\"' + value.options.thumb + '\" alt=\"' + value.name + '\">');\n                            break;\n                        default:\n                            item = item.replace(/__thumb__/gi, value.thumb ? '<img src=\"' + value.thumb + '\" alt=\"' + value.name + '\">' : '<i class=\"' + value.icon + '\"></i>');\n                            break;\n                    }\n                }\n                var $item = $(item);\n                $item.data('is_folder', false);\n                _.forEach(value, function (val, index) {\n                    $item.data(index, val);\n                });\n                $itemsWrapper.append($item);\n            });\n            if (reload !== false) {\n                _self.$groupContainer.empty();\n            }\n\n            if (load_more_file && this.$groupContainer.find('.rv-media-grid ul').length > 0) {} else {\n                _self.$groupContainer.append($result);\n            }\n            _self.$groupContainer.find('.loading-wrapper').remove();\n            __WEBPACK_IMPORTED_MODULE_1__Services_ActionsService__[\"a\" /* ActionsService */].handleDropdown();\n\n            //trigger event click for file selected\n            $('.js-media-list-title[data-id=' + data.selected_file_id + ']').trigger('click');\n        }\n    }]);\n\n    return MediaList;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9yZXNvdXJjZXMvYXNzZXRzL2pzL0FwcC9WaWV3cy9NZWRpYUxpc3QuanM/ZDIxOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0hlbHBlcnN9IGZyb20gJy4uL0hlbHBlcnMvSGVscGVycyc7XG5pbXBvcnQge0FjdGlvbnNTZXJ2aWNlfSBmcm9tICcuLi9TZXJ2aWNlcy9BY3Rpb25zU2VydmljZSc7XG5cbmV4cG9ydCBjbGFzcyBNZWRpYUxpc3Qge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmdyb3VwID0ge307XG4gICAgICAgIHRoaXMuZ3JvdXAubGlzdCA9ICQoJyNydl9tZWRpYV9pdGVtc19saXN0JykuaHRtbCgpO1xuICAgICAgICB0aGlzLmdyb3VwLnRpbGVzID0gJCgnI3J2X21lZGlhX2l0ZW1zX3RpbGVzJykuaHRtbCgpO1xuXG4gICAgICAgIHRoaXMuaXRlbSA9IHt9O1xuICAgICAgICB0aGlzLml0ZW0ubGlzdCA9ICQoJyNydl9tZWRpYV9pdGVtc19saXN0X2VsZW1lbnQnKS5odG1sKCk7XG4gICAgICAgIHRoaXMuaXRlbS50aWxlcyA9ICQoJyNydl9tZWRpYV9pdGVtc190aWxlc19lbGVtZW50JykuaHRtbCgpO1xuXG4gICAgICAgIHRoaXMuJGdyb3VwQ29udGFpbmVyID0gJCgnLnJ2LW1lZGlhLWl0ZW1zJyk7XG4gICAgfVxuXG5cbiAgICByZW5kZXJEYXRhKGRhdGEsIHJlbG9hZCA9IGZhbHNlLCBsb2FkX21vcmVfZmlsZSA9IGZhbHNlKSB7XG4gICAgICAgIGxldCBfc2VsZiA9IHRoaXM7XG4gICAgICAgIGxldCBNZWRpYUNvbmZpZyA9IEhlbHBlcnMuZ2V0Q29uZmlncygpO1xuICAgICAgICBsZXQgdGVtcGxhdGUgPSBfc2VsZi5ncm91cFtIZWxwZXJzLmdldFJlcXVlc3RQYXJhbXMoKS52aWV3X3R5cGVdO1xuXG4gICAgICAgIGxldCB2aWV3X2luID0gSGVscGVycy5nZXRSZXF1ZXN0UGFyYW1zKCkudmlld19pbjtcblxuICAgICAgICBpZiAoIV8uY29udGFpbnMoWydteV9tZWRpYScsICdwdWJsaWMnLCAndHJhc2gnLCAnZmF2b3JpdGVzJywgJ3NoYXJlZCcsICdzaGFyZWRfd2l0aF9tZScsICdyZWNlbnQnXSwgdmlld19pbikpIHtcbiAgICAgICAgICAgIHZpZXdfaW4gPSAnbXlfbWVkaWEnO1xuICAgICAgICB9XG5cbiAgICAgICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZVxuICAgICAgICAgICAgLnJlcGxhY2UoL19fbm9JdGVtSWNvbl9fL2dpLCBSVl9NRURJQV9DT05GSUcudHJhbnNsYXRpb25zLm5vX2l0ZW1bdmlld19pbl0uaWNvbiB8fCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9fX25vSXRlbVRpdGxlX18vZ2ksIFJWX01FRElBX0NPTkZJRy50cmFuc2xhdGlvbnMubm9faXRlbVt2aWV3X2luXS50aXRsZSB8fCAnJylcbiAgICAgICAgICAgIC5yZXBsYWNlKC9fX25vSXRlbU1lc3NhZ2VfXy9naSwgUlZfTUVESUFfQ09ORklHLnRyYW5zbGF0aW9ucy5ub19pdGVtW3ZpZXdfaW5dLm1lc3NhZ2UgfHwgJycpO1xuXG4gICAgICAgIGxldCAkcmVzdWx0ID0gJCh0ZW1wbGF0ZSk7XG4gICAgICAgIGxldCAkaXRlbXNXcmFwcGVyID0gJHJlc3VsdC5maW5kKCd1bCcpO1xuXG4gICAgICAgIGlmIChsb2FkX21vcmVfZmlsZSAmJiB0aGlzLiRncm91cENvbnRhaW5lci5maW5kKCcucnYtbWVkaWEtZ3JpZCB1bCcpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICRpdGVtc1dyYXBwZXIgPSB0aGlzLiRncm91cENvbnRhaW5lci5maW5kKCcucnYtbWVkaWEtZ3JpZCB1bCcpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXy5zaXplKGRhdGEuZm9sZGVycykgPiAwIHx8IF8uc2l6ZShkYXRhLmZpbGVzKSA+IDApIHtcbiAgICAgICAgICAgICQoJy5ydi1tZWRpYS1pdGVtcycpLmFkZENsYXNzKCdoYXMtaXRlbXMnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJy5ydi1tZWRpYS1pdGVtcycpLnJlbW92ZUNsYXNzKCdoYXMtaXRlbXMnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF8uZm9yRWFjaChkYXRhLmZvbGRlcnMsIGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIGxldCBpdGVtID0gX3NlbGYuaXRlbVtIZWxwZXJzLmdldFJlcXVlc3RQYXJhbXMoKS52aWV3X3R5cGVdO1xuICAgICAgICAgICAgaXRlbSA9IGl0ZW1cbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvX190eXBlX18vZ2ksICdmb2xkZXInKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9fX2lkX18vZ2ksIHZhbHVlLmlkKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9fX25hbWVfXy9naSwgdmFsdWUubmFtZSB8fCAnJylcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvX19zaXplX18vZ2ksICcnKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9fX2RhdGVfXy9naSwgdmFsdWUuY3JlYXRlZF9hdCB8fCAnJylcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvX190aHVtYl9fL2dpLCAnPGkgY2xhc3M9XCJmYSBmYS1mb2xkZXItb1wiPjwvaT4nKTtcbiAgICAgICAgICAgIGxldCAkaXRlbSA9ICQoaXRlbSk7XG4gICAgICAgICAgICBfLmZvckVhY2godmFsdWUsIGZ1bmN0aW9uICh2YWwsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgJGl0ZW0uZGF0YShpbmRleCwgdmFsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJGl0ZW0uZGF0YSgnaXNfZm9sZGVyJywgdHJ1ZSk7XG4gICAgICAgICAgICAkaXRlbS5kYXRhKCdpY29uJywgTWVkaWFDb25maWcuaWNvbnMuZm9sZGVyKTtcbiAgICAgICAgICAgICRpdGVtc1dyYXBwZXIuYXBwZW5kKCRpdGVtKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgXy5mb3JFYWNoKGRhdGEuZmlsZXMsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgbGV0IGl0ZW0gPSBfc2VsZi5pdGVtW0hlbHBlcnMuZ2V0UmVxdWVzdFBhcmFtcygpLnZpZXdfdHlwZV07XG4gICAgICAgICAgICBpdGVtID0gaXRlbVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9fX3R5cGVfXy9naSwgJ2ZpbGUnKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9fX2lkX18vZ2ksIHZhbHVlLmlkKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9fX25hbWVfXy9naSwgdmFsdWUubmFtZSB8fCAnJylcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvX19zaXplX18vZ2ksIHZhbHVlLnNpemUgfHwgJycpXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL19fZGF0ZV9fL2dpLCB2YWx1ZS5jcmVhdGVkX2F0IHx8ICcnKTtcbiAgICAgICAgICAgIGlmIChIZWxwZXJzLmdldFJlcXVlc3RQYXJhbXMoKS52aWV3X3R5cGUgPT09ICdsaXN0Jykge1xuICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9fX3RodW1iX18vZ2ksICc8aSBjbGFzcz1cIicgKyB2YWx1ZS5pY29uICsgJ1wiPjwvaT4nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh2YWx1ZS5taW1lX3R5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAneW91dHViZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gaXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9fX3RodW1iX18vZ2ksICc8aW1nIHNyYz1cIicgKyB2YWx1ZS5vcHRpb25zLnRodW1iICsgJ1wiIGFsdD1cIicgKyB2YWx1ZS5uYW1lICsgJ1wiPicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gaXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9fX3RodW1iX18vZ2ksIHZhbHVlLnRodW1iID8gJzxpbWcgc3JjPVwiJyArIHZhbHVlLnRodW1iICsgJ1wiIGFsdD1cIicgKyB2YWx1ZS5uYW1lICsgJ1wiPicgOiAnPGkgY2xhc3M9XCInICsgdmFsdWUuaWNvbiArICdcIj48L2k+Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgJGl0ZW0gPSAkKGl0ZW0pO1xuICAgICAgICAgICAgJGl0ZW0uZGF0YSgnaXNfZm9sZGVyJywgZmFsc2UpO1xuICAgICAgICAgICAgXy5mb3JFYWNoKHZhbHVlLCBmdW5jdGlvbiAodmFsLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICRpdGVtLmRhdGEoaW5kZXgsIHZhbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRpdGVtc1dyYXBwZXIuYXBwZW5kKCRpdGVtKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChyZWxvYWQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICBfc2VsZi4kZ3JvdXBDb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsb2FkX21vcmVfZmlsZSAmJiB0aGlzLiRncm91cENvbnRhaW5lci5maW5kKCcucnYtbWVkaWEtZ3JpZCB1bCcpLmxlbmd0aCA+IDApIHtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX3NlbGYuJGdyb3VwQ29udGFpbmVyLmFwcGVuZCgkcmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgICBfc2VsZi4kZ3JvdXBDb250YWluZXIuZmluZCgnLmxvYWRpbmctd3JhcHBlcicpLnJlbW92ZSgpO1xuICAgICAgICBBY3Rpb25zU2VydmljZS5oYW5kbGVEcm9wZG93bigpO1xuXG4gICAgICAgIC8vdHJpZ2dlciBldmVudCBjbGljayBmb3IgZmlsZSBzZWxlY3RlZFxuICAgICAgICAkKCcuanMtbWVkaWEtbGlzdC10aXRsZVtkYXRhLWlkPScgKyBkYXRhLnNlbGVjdGVkX2ZpbGVfaWQgKyAnXScpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHJlc291cmNlcy9hc3NldHMvanMvQXBwL1ZpZXdzL01lZGlhTGlzdC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBQUE7QUFBQTtBQWNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFSQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXpHQTtBQUNBO0FBREE7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///6\n");

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

__webpack_require__(8);
module.exports = __webpack_require__(16);


/***/ }),
/* 8 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__App_Config_MediaConfig__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__App_Services_MediaService__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__App_Services_MessageService__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__App_Services_FolderService__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__App_Services_UploadService__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__App_Services_ActionsService__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__App_Externals_ExternalServices__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__integrate__ = __webpack_require__(5);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\n\n\n\n\n\nvar MediaManagement = function () {\n    function MediaManagement() {\n        _classCallCheck(this, MediaManagement);\n\n        this.MediaService = new __WEBPACK_IMPORTED_MODULE_2__App_Services_MediaService__[\"a\" /* MediaService */]();\n        this.UploadService = new __WEBPACK_IMPORTED_MODULE_5__App_Services_UploadService__[\"a\" /* UploadService */]();\n        this.FolderService = new __WEBPACK_IMPORTED_MODULE_4__App_Services_FolderService__[\"a\" /* FolderService */]();\n\n        new __WEBPACK_IMPORTED_MODULE_7__App_Externals_ExternalServices__[\"a\" /* ExternalServices */]();\n\n        this.$body = $('body');\n    }\n\n    _createClass(MediaManagement, [{\n        key: 'init',\n        value: function init() {\n            __WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].resetPagination();\n            this.setupLayout();\n\n            this.handleMediaList();\n            this.changeViewType();\n            this.changeFilter();\n            this.search();\n            this.handleActions();\n\n            this.UploadService.init();\n\n            this.handleModals();\n            this.scrollGetMore();\n        }\n    }, {\n        key: 'setupLayout',\n        value: function setupLayout() {\n            /**\n             * Sidebar\n             */\n            var $current_filter = $('.js-rv-media-change-filter[data-type=\"filter\"][data-value=\"' + __WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].getRequestParams().filter + '\"]');\n\n            $current_filter.closest('li').addClass('active').closest('.dropdown').find('.js-rv-media-filter-current').html('(' + $current_filter.html() + ')');\n\n            var $current_view_in = $('.js-rv-media-change-filter[data-type=\"view_in\"][data-value=\"' + __WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].getRequestParams().view_in + '\"]');\n\n            $current_view_in.closest('li').addClass('active').closest('.dropdown').find('.js-rv-media-filter-current').html('(' + $current_view_in.html() + ')');\n\n            if (__WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].isUseInModal()) {\n                $('.rv-media-footer').removeClass('hidden');\n            }\n\n            /**\n             * Sort\n             */\n            $('.js-rv-media-change-filter[data-type=\"sort_by\"][data-value=\"' + __WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].getRequestParams().sort_by + '\"]').closest('li').addClass('active');\n\n            /**\n             * Details pane\n             */\n            var $mediaDetailsCheckbox = $('#media_details_collapse');\n            $mediaDetailsCheckbox.prop('checked', __WEBPACK_IMPORTED_MODULE_0__App_Config_MediaConfig__[\"a\" /* MediaConfig */].hide_details_pane || false);\n            setTimeout(function () {\n                $('.rv-media-details').removeClass('hidden');\n            }, 300);\n            $mediaDetailsCheckbox.on('change', function (event) {\n                event.preventDefault();\n                __WEBPACK_IMPORTED_MODULE_0__App_Config_MediaConfig__[\"a\" /* MediaConfig */].hide_details_pane = $(this).is(':checked');\n                __WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].storeConfig();\n            });\n\n            $(document).on('click', 'button[data-dismiss-modal]', function () {\n                var modal = $(this).data('dismiss-modal');\n                $(modal).modal('hide');\n            });\n        }\n    }, {\n        key: 'handleMediaList',\n        value: function handleMediaList() {\n            var _self = this;\n\n            /*Ctrl key in Windows*/\n            var ctrl_key = false;\n\n            /*Command key in MAC*/\n            var meta_key = false;\n\n            /*Shift key*/\n            var shift_key = false;\n\n            $(document).on('keyup keydown', function (e) {\n                /*User hold ctrl key*/\n                ctrl_key = e.ctrlKey;\n                /*User hold command key*/\n                meta_key = e.metaKey;\n                /*User hold shift key*/\n                shift_key = e.shiftKey;\n            });\n\n            _self.$body.on('click', '.js-media-list-title', function (event) {\n                event.preventDefault();\n                var $current = $(this);\n\n                if (shift_key) {\n                    var firstItem = _.first(__WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].getSelectedItems());\n                    if (firstItem) {\n                        var firstIndex = firstItem.index_key;\n                        var currentIndex = $current.index();\n                        $('.rv-media-items li').each(function (index) {\n                            if (index > firstIndex && index <= currentIndex) {\n                                $(this).find('input[type=checkbox]').prop('checked', true);\n                            }\n                        });\n                    }\n                } else {\n                    if (!ctrl_key && !meta_key) {\n                        $current.closest('.rv-media-items').find('input[type=checkbox]').prop('checked', false);\n                    }\n                }\n\n                var $lineCheckBox = $current.find('input[type=checkbox]');\n                $lineCheckBox.prop('checked', true);\n                __WEBPACK_IMPORTED_MODULE_6__App_Services_ActionsService__[\"a\" /* ActionsService */].handleDropdown();\n\n                _self.MediaService.getFileDetails($current.data());\n            }).on('dblclick', '.js-media-list-title', function (event) {\n                event.preventDefault();\n                var data = $(this).data();\n                if (data.is_folder === true) {\n                    __WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].resetPagination();\n                    _self.FolderService.changeFolder(data.id);\n                } else {\n                    if (!__WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].isUseInModal()) {\n                        __WEBPACK_IMPORTED_MODULE_6__App_Services_ActionsService__[\"a\" /* ActionsService */].handlePreview();\n                    } else if (__WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].getConfigs().request_params.view_in !== 'trash') {\n                        var selectedFiles = __WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].getSelectedFiles();\n                        if (_.size(selectedFiles) > 0) {\n                            __WEBPACK_IMPORTED_MODULE_8__integrate__[\"EditorService\"].editorSelectFile(selectedFiles);\n                        }\n                    }\n                }\n            }).on('dblclick', '.js-up-one-level', function (event) {\n                event.preventDefault();\n                var count = $('.rv-media-breadcrumb .breadcrumb li').length;\n                $('.rv-media-breadcrumb .breadcrumb li:nth-child(' + (count - 1) + ') a').trigger('click');\n            }).on('contextmenu', '.js-context-menu', function (e) {\n                if (!$(this).find('input[type=checkbox]').is(':checked')) {\n                    $(this).trigger('click');\n                }\n            }).on('click contextmenu', '.rv-media-items', function (e) {\n                if (!_.size(e.target.closest('.js-context-menu'))) {\n                    $('.rv-media-items input[type=\"checkbox\"]').prop('checked', false);\n                    $('.rv-dropdown-actions').addClass('disabled');\n                    _self.MediaService.getFileDetails({\n                        icon: 'fa fa-picture-o',\n                        nothing_selected: ''\n                    });\n                }\n            });\n        }\n    }, {\n        key: 'changeViewType',\n        value: function changeViewType() {\n            var _self = this;\n            _self.$body.on('click', '.js-rv-media-change-view-type .btn', function (event) {\n                event.preventDefault();\n                var $current = $(this);\n                if ($current.hasClass('active')) {\n                    return;\n                }\n                $current.closest('.js-rv-media-change-view-type').find('.btn').removeClass('active');\n                $current.addClass('active');\n\n                __WEBPACK_IMPORTED_MODULE_0__App_Config_MediaConfig__[\"a\" /* MediaConfig */].request_params.view_type = $current.data('type');\n\n                if ($current.data('type') === 'trash') {\n                    $(document).find('.js-insert-to-editor').prop('disabled', true);\n                } else {\n                    $(document).find('.js-insert-to-editor').prop('disabled', false);\n                }\n\n                __WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].storeConfig();\n\n                _self.MediaService.getMedia(true, true);\n            });\n            $('.js-rv-media-change-view-type .btn[data-type=\"' + __WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].getRequestParams().view_type + '\"]').trigger('click');\n\n            this.bindIntegrateModalEvents();\n        }\n    }, {\n        key: 'changeFilter',\n        value: function changeFilter() {\n            var _self = this;\n            _self.$body.on('click', '.js-rv-media-change-filter', function (event) {\n                event.preventDefault();\n                if (!__WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].isOnAjaxLoading()) {\n                    var $current = $(this);\n                    var $parent = $current.closest('ul');\n                    var data = $current.data();\n\n                    __WEBPACK_IMPORTED_MODULE_0__App_Config_MediaConfig__[\"a\" /* MediaConfig */].request_params[data.type] = data.value;\n\n                    if (data.type === 'view_in') {\n                        __WEBPACK_IMPORTED_MODULE_0__App_Config_MediaConfig__[\"a\" /* MediaConfig */].request_params.folder_id = 0;\n                        if (data.value === 'trash') {\n                            $(document).find('.js-insert-to-editor').prop('disabled', true);\n                        } else {\n                            $(document).find('.js-insert-to-editor').prop('disabled', false);\n                        }\n                    }\n\n                    $current.closest('.dropdown').find('.js-rv-media-filter-current').html('(' + $current.html() + ')');\n\n                    __WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].storeConfig();\n                    __WEBPACK_IMPORTED_MODULE_2__App_Services_MediaService__[\"a\" /* MediaService */].refreshFilter();\n\n                    __WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].resetPagination();\n                    _self.MediaService.getMedia(true);\n\n                    $parent.find('> li').removeClass('active');\n                    $current.closest('li').addClass('active');\n                }\n            });\n        }\n    }, {\n        key: 'search',\n        value: function search() {\n            var _self = this;\n            $('.input-search-wrapper input[type=\"text\"]').val(__WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].getRequestParams().search || '');\n            _self.$body.on('submit', '.input-search-wrapper', function (event) {\n                event.preventDefault();\n                __WEBPACK_IMPORTED_MODULE_0__App_Config_MediaConfig__[\"a\" /* MediaConfig */].request_params.search = $(this).find('input[type=\"text\"]').val();\n\n                __WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].storeConfig();\n                _self.resetPagination();\n                _self.MediaService.getMedia(true);\n            });\n        }\n    }, {\n        key: 'handleActions',\n        value: function handleActions() {\n            var _self = this;\n\n            _self.$body.on('click', '.rv-media-actions .js-change-action[data-type=\"refresh\"]', function (event) {\n                event.preventDefault();\n\n                __WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].resetPagination();\n\n                var ele_options = typeof window.rvMedia.$el !== 'undefined' ? window.rvMedia.$el.data('rv-media') : undefined;\n                if (typeof ele_options !== 'undefined' && ele_options.length > 0 && typeof ele_options[0].selected_file_id !== 'undefined') {\n                    _self.MediaService.getMedia(true, true);\n                } else _self.MediaService.getMedia(true, false);\n            }).on('click', '.rv-media-items li.no-items', function (event) {\n                event.preventDefault();\n                $('.rv-media-header .rv-media-top-header .rv-media-actions .js-dropzone-upload').trigger('click');\n            }).on('submit', '.form-add-folder', function (event) {\n                event.preventDefault();\n                var $input = $(this).find('input[type=text]');\n                var folderName = $input.val();\n                _self.FolderService.create(folderName);\n                $input.val('');\n            }).on('click', '.js-change-folder', function (event) {\n                event.preventDefault();\n                var folderId = $(this).data('folder');\n                __WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].resetPagination();\n                _self.FolderService.changeFolder(folderId);\n            }).on('click', '.js-files-action', function (event) {\n                event.preventDefault();\n                __WEBPACK_IMPORTED_MODULE_6__App_Services_ActionsService__[\"a\" /* ActionsService */].handleGlobalAction($(this).data('action'), function (res) {\n                    __WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].resetPagination();\n                    _self.MediaService.getMedia(true);\n                });\n            });\n        }\n    }, {\n        key: 'handleModals',\n        value: function handleModals() {\n            var _self = this;\n            /*Rename files*/\n            _self.$body.on('show.bs.modal', '#modal_rename_items', function (event) {\n                __WEBPACK_IMPORTED_MODULE_6__App_Services_ActionsService__[\"a\" /* ActionsService */].renderRenameItems();\n            });\n            _self.$body.on('submit', '#modal_rename_items .form-rename', function (event) {\n                event.preventDefault();\n                var items = [];\n                var $form = $(this);\n\n                $('#modal_rename_items .form-control').each(function () {\n                    var $current = $(this);\n                    var data = $current.closest('.form-group').data();\n                    data.name = $current.val();\n                    items.push(data);\n                });\n\n                __WEBPACK_IMPORTED_MODULE_6__App_Services_ActionsService__[\"a\" /* ActionsService */].processAction({\n                    action: $form.data('action'),\n                    selected: items\n                }, function (res) {\n                    if (!res.error) {\n                        $form.closest('.modal').modal('hide');\n                        _self.MediaService.getMedia(true);\n                    } else {\n                        $('#modal_rename_items .form-group').each(function () {\n                            var $current = $(this);\n                            if (_.contains(res.data, $current.data('id'))) {\n                                $current.addClass('has-error');\n                            } else {\n                                $current.removeClass('has-error');\n                            }\n                        });\n                    }\n                });\n            });\n\n            /*Delete files*/\n            _self.$body.on('submit', '.form-delete-items', function (event) {\n                event.preventDefault();\n                var items = [];\n                var $form = $(this);\n\n                _.each(__WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].getSelectedItems(), function (value) {\n                    items.push({\n                        id: value.id,\n                        is_folder: value.is_folder\n                    });\n                });\n\n                __WEBPACK_IMPORTED_MODULE_6__App_Services_ActionsService__[\"a\" /* ActionsService */].processAction({\n                    action: $form.data('action'),\n                    selected: items\n                }, function (res) {\n                    $form.closest('.modal').modal('hide');\n                    if (!res.error) {\n                        _self.MediaService.getMedia(true);\n                    }\n                });\n            });\n\n            /*Empty trash*/\n            _self.$body.on('submit', '#modal_empty_trash .rv-form', function (event) {\n                event.preventDefault();\n                var $form = $(this);\n\n                __WEBPACK_IMPORTED_MODULE_6__App_Services_ActionsService__[\"a\" /* ActionsService */].processAction({\n                    action: $form.data('action')\n                }, function (res) {\n                    $form.closest('.modal').modal('hide');\n                    _self.MediaService.getMedia(true);\n                });\n            });\n\n            /*Share files*/\n            var users = [];\n            var $shareOption = $('#share_option');\n            var $shareToUsers = $('#share_to_users');\n            $shareOption.on('change', function (event) {\n                event.preventDefault();\n                if ($(this).val() === 'user') {\n                    $shareToUsers.closest('.form-group').removeClass('hidden');\n                } else {\n                    $shareToUsers.closest('.form-group').addClass('hidden');\n                }\n            }).trigger('change');\n            _self.$body.on('show.bs.modal', '#modal_share_items', function (event) {\n                $shareOption.val('no_share').trigger('change');\n                $shareToUsers.val('');\n\n                var selectedItems = __WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].getSelectedItems();\n\n                if (_.size(selectedItems) !== 1) {\n\n                    var is_public = true;\n                    $.each(selectedItems, function (index, el) {\n                        if (el.is_public == 0) {\n                            is_public = false;\n                        }\n                    });\n\n                    if (is_public) {\n                        $shareOption.val('everyone').trigger('change');\n                    } else {\n                        $.ajax({\n                            url: RV_MEDIA_URL.get_users,\n                            type: 'GET',\n                            dataType: 'json',\n                            success: function success(res) {\n                                if (!res.error) {\n                                    $shareToUsers.html('');\n                                    users = res.data;\n                                    _.each(users, function (value) {\n                                        var option = '<option value=\"' + value.id + '\">' + value.name + '</option>';\n                                        $shareToUsers.append(option);\n                                    });\n                                } else {\n                                    __WEBPACK_IMPORTED_MODULE_3__App_Services_MessageService__[\"a\" /* MessageService */].showMessage('error', res.message, RV_MEDIA_CONFIG.translations.message.error_header);\n                                }\n                            },\n                            error: function error(data) {\n                                __WEBPACK_IMPORTED_MODULE_3__App_Services_MessageService__[\"a\" /* MessageService */].handleError(data);\n                            }\n                        });\n                    }\n                } else {\n                    var selectedItem = _.first(selectedItems);\n\n                    if (selectedItem.is_public) {\n                        $shareOption.val('everyone').trigger('change');\n                    } else {\n                        $.ajax({\n                            url: RV_MEDIA_URL.get_shared_users,\n                            type: 'GET',\n                            data: {\n                                share_id: selectedItem.id,\n                                is_folder: selectedItem.is_folder\n                            },\n                            dataType: 'json',\n                            success: function success(res) {\n                                if (!res.error) {\n                                    $shareToUsers.html('');\n                                    users = res.data.users;\n                                    var totalSelected = 0;\n                                    _.each(users, function (value) {\n                                        var isSelected = value.is_selected;\n                                        if (isSelected) {\n                                            totalSelected++;\n                                        }\n                                        var option = '<option value=\"' + value.id + '\" ' + (isSelected ? 'selected' : '') + '>' + value.name + '</option>';\n                                        $shareToUsers.append(option);\n                                    });\n                                    if (totalSelected > 0) {\n                                        $shareOption.val('user').trigger('change');\n                                    }\n                                } else {\n                                    __WEBPACK_IMPORTED_MODULE_3__App_Services_MessageService__[\"a\" /* MessageService */].showMessage('error', res.message, RV_MEDIA_CONFIG.translations.message.error_header);\n                                }\n                            },\n                            error: function error(data) {\n                                __WEBPACK_IMPORTED_MODULE_3__App_Services_MessageService__[\"a\" /* MessageService */].handleError(data);\n                            }\n                        });\n                    }\n                }\n            }).on('submit', '#modal_share_items .rv-form', function (event) {\n                event.preventDefault();\n                var $form = $(this);\n\n                var items = [];\n                _.each(__WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].getSelectedItems(), function (value) {\n                    items.push({\n                        id: value.id,\n                        is_folder: value.is_folder\n                    });\n                });\n\n                __WEBPACK_IMPORTED_MODULE_6__App_Services_ActionsService__[\"a\" /* ActionsService */].processAction({\n                    action: $form.data('action'),\n                    selected: items,\n                    share_option: $shareOption.val(),\n                    users: $shareToUsers.val()\n                }, function (res) {\n                    $form.closest('.modal').modal('hide');\n                    _self.MediaService.getMedia(true);\n                });\n            }).on('submit', '#modal_set_focus_point .rv-form', function (event) {\n                event.preventDefault();\n                var $form = $(this);\n\n                var items = [];\n                var selected_items = __WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].getSelectedItems();\n                _.each(selected_items, function (value) {\n                    items.push({\n                        id: value.id,\n                        is_folder: value.is_folder\n                    });\n                });\n\n                __WEBPACK_IMPORTED_MODULE_6__App_Services_ActionsService__[\"a\" /* ActionsService */].processAction({\n                    action: $form.data('action'),\n                    selected: items,\n                    data_attribute: $('.helper-tool-data-attr').val(),\n                    css_bg_position: $('.helper-tool-css3-val').val(),\n                    retice_css: $('.helper-tool-reticle-css').val()\n                }, function (res) {\n                    $form.closest('.modal').modal('hide');\n                    _.each(selected_items, function (value) {\n                        if (value.id === res.data.id) {\n                            $('.js-media-list-title[data-id=' + value.id + ']').data(res.data);\n                        }\n                    });\n                });\n            });\n\n            if (__WEBPACK_IMPORTED_MODULE_0__App_Config_MediaConfig__[\"a\" /* MediaConfig */].request_params.view_in === 'trash') {\n                $(document).find('.js-insert-to-editor').prop('disabled', true);\n            } else {\n                $(document).find('.js-insert-to-editor').prop('disabled', false);\n            }\n\n            this.bindIntegrateModalEvents();\n        }\n    }, {\n        key: 'checkFileTypeSelect',\n        value: function checkFileTypeSelect(selectedFiles) {\n            if (typeof window.rvMedia.$el !== 'undefined') {\n                var firstItem = _.first(selectedFiles);\n                var ele_options = window.rvMedia.$el.data('rv-media');\n                if (typeof ele_options !== 'undefined' && typeof ele_options[0] !== 'undefined' && typeof ele_options[0].file_type !== 'undefined' && firstItem !== 'undefined' && firstItem.type !== 'undefined' && !ele_options[0].file_type.match(firstItem.type)) {\n                    return false;\n                }\n            }\n            return true;\n        }\n    }, {\n        key: 'bindIntegrateModalEvents',\n        value: function bindIntegrateModalEvents() {\n            var $main_modal = $('#rv_media_modal');\n            var _self = this;\n            $main_modal.off('click', '.js-insert-to-editor').on('click', '.js-insert-to-editor', function (event) {\n                event.preventDefault();\n                var selectedFiles = __WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].getSelectedFiles();\n                if (_.size(selectedFiles) > 0) {\n                    window.rvMedia.options.onSelectFiles(selectedFiles, window.rvMedia.$el);\n                    if (_self.checkFileTypeSelect(selectedFiles)) {\n                        $main_modal.find('.close').trigger('click');\n                    }\n                }\n            });\n\n            $main_modal.off('dblclick', '.js-media-list-title').on('dblclick', '.js-media-list-title', function (event) {\n                event.preventDefault();\n                if (__WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].getConfigs().request_params.view_in !== 'trash') {\n                    var selectedFiles = __WEBPACK_IMPORTED_MODULE_1__App_Helpers_Helpers__[\"a\" /* Helpers */].getSelectedFiles();\n                    if (_.size(selectedFiles) > 0) {\n                        window.rvMedia.options.onSelectFiles(selectedFiles, window.rvMedia.$el);\n                        if (_self.checkFileTypeSelect(selectedFiles)) {\n                            $main_modal.find('.close').trigger('click');\n                        }\n                    }\n                } else {\n                    __WEBPACK_IMPORTED_MODULE_6__App_Services_ActionsService__[\"a\" /* ActionsService */].handlePreview();\n                }\n            });\n        }\n    }, {\n        key: 'scrollGetMore',\n\n\n        //scroll get more media\n        value: function scrollGetMore() {\n            var _self = this;\n            $('.rv-media-main .rv-media-items').bind('DOMMouseScroll mousewheel', function (e) {\n                if (e.originalEvent.detail > 0 || e.originalEvent.wheelDelta < 0) {\n                    if ($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight - 350) {\n                        if (typeof RV_MEDIA_CONFIG.pagination != 'undefined' && RV_MEDIA_CONFIG.pagination.has_more) {\n                            _self.MediaService.getMedia(false, false, true);\n                        } else {\n                            return;\n                        }\n                    }\n                }\n            });\n        }\n    }], [{\n        key: 'setupSecurity',\n        value: function setupSecurity() {\n            $.ajaxSetup({\n                headers: {\n                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n                }\n            });\n        }\n    }]);\n\n    return MediaManagement;\n}();\n\n$(document).ready(function () {\n    window.rvMedia = window.rvMedia || {};\n\n    MediaManagement.setupSecurity();\n    new MediaManagement().init();\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9yZXNvdXJjZXMvYXNzZXRzL2pzL21lZGlhLmpzPzI5NWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtNZWRpYUNvbmZpZ30gZnJvbSAnLi9BcHAvQ29uZmlnL01lZGlhQ29uZmlnJztcbmltcG9ydCB7SGVscGVyc30gZnJvbSAnLi9BcHAvSGVscGVycy9IZWxwZXJzJztcbmltcG9ydCB7TWVkaWFTZXJ2aWNlfSBmcm9tICcuL0FwcC9TZXJ2aWNlcy9NZWRpYVNlcnZpY2UnO1xuaW1wb3J0IHtNZXNzYWdlU2VydmljZX0gZnJvbSAnLi9BcHAvU2VydmljZXMvTWVzc2FnZVNlcnZpY2UnO1xuaW1wb3J0IHtGb2xkZXJTZXJ2aWNlfSBmcm9tICcuL0FwcC9TZXJ2aWNlcy9Gb2xkZXJTZXJ2aWNlJztcbmltcG9ydCB7VXBsb2FkU2VydmljZX0gZnJvbSAnLi9BcHAvU2VydmljZXMvVXBsb2FkU2VydmljZSc7XG5pbXBvcnQge0FjdGlvbnNTZXJ2aWNlfSBmcm9tICcuL0FwcC9TZXJ2aWNlcy9BY3Rpb25zU2VydmljZSc7XG5pbXBvcnQge0V4dGVybmFsU2VydmljZXN9IGZyb20gJy4vQXBwL0V4dGVybmFscy9FeHRlcm5hbFNlcnZpY2VzJztcbmltcG9ydCB7RWRpdG9yU2VydmljZX0gZnJvbSAnLi9pbnRlZ3JhdGUnO1xuXG5jbGFzcyBNZWRpYU1hbmFnZW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLk1lZGlhU2VydmljZSA9IG5ldyBNZWRpYVNlcnZpY2UoKTtcbiAgICAgICAgdGhpcy5VcGxvYWRTZXJ2aWNlID0gbmV3IFVwbG9hZFNlcnZpY2UoKTtcbiAgICAgICAgdGhpcy5Gb2xkZXJTZXJ2aWNlID0gbmV3IEZvbGRlclNlcnZpY2UoKTtcblxuICAgICAgICBuZXcgRXh0ZXJuYWxTZXJ2aWNlcygpO1xuXG4gICAgICAgIHRoaXMuJGJvZHkgPSAkKCdib2R5Jyk7XG4gICAgfVxuXG4gICAgaW5pdCgpIHtcbiAgICAgICAgSGVscGVycy5yZXNldFBhZ2luYXRpb24oKTtcbiAgICAgICAgdGhpcy5zZXR1cExheW91dCgpO1xuXG4gICAgICAgIHRoaXMuaGFuZGxlTWVkaWFMaXN0KCk7XG4gICAgICAgIHRoaXMuY2hhbmdlVmlld1R5cGUoKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VGaWx0ZXIoKTtcbiAgICAgICAgdGhpcy5zZWFyY2goKTtcbiAgICAgICAgdGhpcy5oYW5kbGVBY3Rpb25zKCk7XG5cbiAgICAgICAgdGhpcy5VcGxvYWRTZXJ2aWNlLmluaXQoKTtcblxuICAgICAgICB0aGlzLmhhbmRsZU1vZGFscygpO1xuICAgICAgICB0aGlzLnNjcm9sbEdldE1vcmUoKTtcbiAgICB9XG5cbiAgICBzZXR1cExheW91dCgpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNpZGViYXJcbiAgICAgICAgICovXG4gICAgICAgIGxldCAkY3VycmVudF9maWx0ZXIgPSAkKCcuanMtcnYtbWVkaWEtY2hhbmdlLWZpbHRlcltkYXRhLXR5cGU9XCJmaWx0ZXJcIl1bZGF0YS12YWx1ZT1cIicgKyBIZWxwZXJzLmdldFJlcXVlc3RQYXJhbXMoKS5maWx0ZXIgKyAnXCJdJyk7XG5cbiAgICAgICAgJGN1cnJlbnRfZmlsdGVyLmNsb3Nlc3QoJ2xpJylcbiAgICAgICAgICAgIC5hZGRDbGFzcygnYWN0aXZlJylcbiAgICAgICAgICAgIC5jbG9zZXN0KCcuZHJvcGRvd24nKS5maW5kKCcuanMtcnYtbWVkaWEtZmlsdGVyLWN1cnJlbnQnKS5odG1sKCcoJyArICRjdXJyZW50X2ZpbHRlci5odG1sKCkgKyAnKScpO1xuXG4gICAgICAgIGxldCAkY3VycmVudF92aWV3X2luID0gJCgnLmpzLXJ2LW1lZGlhLWNoYW5nZS1maWx0ZXJbZGF0YS10eXBlPVwidmlld19pblwiXVtkYXRhLXZhbHVlPVwiJyArIEhlbHBlcnMuZ2V0UmVxdWVzdFBhcmFtcygpLnZpZXdfaW4gKyAnXCJdJyk7XG5cbiAgICAgICAgJGN1cnJlbnRfdmlld19pbi5jbG9zZXN0KCdsaScpXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ2FjdGl2ZScpXG4gICAgICAgICAgICAuY2xvc2VzdCgnLmRyb3Bkb3duJykuZmluZCgnLmpzLXJ2LW1lZGlhLWZpbHRlci1jdXJyZW50JykuaHRtbCgnKCcgKyAkY3VycmVudF92aWV3X2luLmh0bWwoKSArICcpJyk7XG5cbiAgICAgICAgaWYgKEhlbHBlcnMuaXNVc2VJbk1vZGFsKCkpIHtcbiAgICAgICAgICAgICQoJy5ydi1tZWRpYS1mb290ZXInKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU29ydFxuICAgICAgICAgKi9cbiAgICAgICAgJCgnLmpzLXJ2LW1lZGlhLWNoYW5nZS1maWx0ZXJbZGF0YS10eXBlPVwic29ydF9ieVwiXVtkYXRhLXZhbHVlPVwiJyArIEhlbHBlcnMuZ2V0UmVxdWVzdFBhcmFtcygpLnNvcnRfYnkgKyAnXCJdJylcbiAgICAgICAgICAgIC5jbG9zZXN0KCdsaScpXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRhaWxzIHBhbmVcbiAgICAgICAgICovXG4gICAgICAgIGxldCAkbWVkaWFEZXRhaWxzQ2hlY2tib3ggPSAkKCcjbWVkaWFfZGV0YWlsc19jb2xsYXBzZScpO1xuICAgICAgICAkbWVkaWFEZXRhaWxzQ2hlY2tib3gucHJvcCgnY2hlY2tlZCcsIE1lZGlhQ29uZmlnLmhpZGVfZGV0YWlsc19wYW5lIHx8IGZhbHNlKTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAkKCcucnYtbWVkaWEtZGV0YWlscycpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgJG1lZGlhRGV0YWlsc0NoZWNrYm94Lm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBNZWRpYUNvbmZpZy5oaWRlX2RldGFpbHNfcGFuZSA9ICQodGhpcykuaXMoJzpjaGVja2VkJyk7XG4gICAgICAgICAgICBIZWxwZXJzLnN0b3JlQ29uZmlnKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdidXR0b25bZGF0YS1kaXNtaXNzLW1vZGFsXScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbGV0IG1vZGFsID0gJCh0aGlzKS5kYXRhKCdkaXNtaXNzLW1vZGFsJyk7XG4gICAgICAgICAgICAkKG1vZGFsKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBoYW5kbGVNZWRpYUxpc3QoKSB7XG4gICAgICAgIGxldCBfc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgLypDdHJsIGtleSBpbiBXaW5kb3dzKi9cbiAgICAgICAgbGV0IGN0cmxfa2V5ID0gZmFsc2U7XG5cbiAgICAgICAgLypDb21tYW5kIGtleSBpbiBNQUMqL1xuICAgICAgICBsZXQgbWV0YV9rZXkgPSBmYWxzZTtcblxuICAgICAgICAvKlNoaWZ0IGtleSovXG4gICAgICAgIGxldCBzaGlmdF9rZXkgPSBmYWxzZTtcblxuICAgICAgICAkKGRvY3VtZW50KS5vbigna2V5dXAga2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAvKlVzZXIgaG9sZCBjdHJsIGtleSovXG4gICAgICAgICAgICBjdHJsX2tleSA9IGUuY3RybEtleTtcbiAgICAgICAgICAgIC8qVXNlciBob2xkIGNvbW1hbmQga2V5Ki9cbiAgICAgICAgICAgIG1ldGFfa2V5ID0gZS5tZXRhS2V5O1xuICAgICAgICAgICAgLypVc2VyIGhvbGQgc2hpZnQga2V5Ki9cbiAgICAgICAgICAgIHNoaWZ0X2tleSA9IGUuc2hpZnRLZXk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIF9zZWxmLiRib2R5XG4gICAgICAgICAgICAub24oJ2NsaWNrJywgJy5qcy1tZWRpYS1saXN0LXRpdGxlJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBsZXQgJGN1cnJlbnQgPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHNoaWZ0X2tleSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZmlyc3RJdGVtID0gXy5maXJzdChIZWxwZXJzLmdldFNlbGVjdGVkSXRlbXMoKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdEl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaXJzdEluZGV4ID0gZmlyc3RJdGVtLmluZGV4X2tleTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50SW5kZXggPSAkY3VycmVudC5pbmRleCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnJ2LW1lZGlhLWl0ZW1zIGxpJykuZWFjaChmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiBmaXJzdEluZGV4ICYmIGluZGV4IDw9IGN1cnJlbnRJbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2lucHV0W3R5cGU9Y2hlY2tib3hdJykucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjdHJsX2tleSAmJiAhbWV0YV9rZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjdXJyZW50LmNsb3Nlc3QoJy5ydi1tZWRpYS1pdGVtcycpLmZpbmQoJ2lucHV0W3R5cGU9Y2hlY2tib3hdJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxldCAkbGluZUNoZWNrQm94ID0gJGN1cnJlbnQuZmluZCgnaW5wdXRbdHlwZT1jaGVja2JveF0nKTtcbiAgICAgICAgICAgICAgICAkbGluZUNoZWNrQm94LnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBBY3Rpb25zU2VydmljZS5oYW5kbGVEcm9wZG93bigpO1xuXG4gICAgICAgICAgICAgICAgX3NlbGYuTWVkaWFTZXJ2aWNlLmdldEZpbGVEZXRhaWxzKCRjdXJyZW50LmRhdGEoKSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCdkYmxjbGljaycsICcuanMtbWVkaWEtbGlzdC10aXRsZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgbGV0IGRhdGEgPSAkKHRoaXMpLmRhdGEoKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5pc19mb2xkZXIgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgSGVscGVycy5yZXNldFBhZ2luYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgX3NlbGYuRm9sZGVyU2VydmljZS5jaGFuZ2VGb2xkZXIoZGF0YS5pZCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFIZWxwZXJzLmlzVXNlSW5Nb2RhbCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBY3Rpb25zU2VydmljZS5oYW5kbGVQcmV2aWV3KCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoSGVscGVycy5nZXRDb25maWdzKCkucmVxdWVzdF9wYXJhbXMudmlld19pbiAhPT0gJ3RyYXNoJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkRmlsZXMgPSBIZWxwZXJzLmdldFNlbGVjdGVkRmlsZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfLnNpemUoc2VsZWN0ZWRGaWxlcykgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRWRpdG9yU2VydmljZS5lZGl0b3JTZWxlY3RGaWxlKHNlbGVjdGVkRmlsZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbignZGJsY2xpY2snLCAnLmpzLXVwLW9uZS1sZXZlbCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgbGV0IGNvdW50ID0gJCgnLnJ2LW1lZGlhLWJyZWFkY3J1bWIgLmJyZWFkY3J1bWIgbGknKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgJCgnLnJ2LW1lZGlhLWJyZWFkY3J1bWIgLmJyZWFkY3J1bWIgbGk6bnRoLWNoaWxkKCcgKyAoY291bnQgLSAxKSArICcpIGEnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbignY29udGV4dG1lbnUnLCAnLmpzLWNvbnRleHQtbWVudScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEkKHRoaXMpLmZpbmQoJ2lucHV0W3R5cGU9Y2hlY2tib3hdJykuaXMoJzpjaGVja2VkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAub24oJ2NsaWNrIGNvbnRleHRtZW51JywgJy5ydi1tZWRpYS1pdGVtcycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfLnNpemUoZS50YXJnZXQuY2xvc2VzdCgnLmpzLWNvbnRleHQtbWVudScpKSkge1xuICAgICAgICAgICAgICAgICAgICAkKCcucnYtbWVkaWEtaXRlbXMgaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnJ2LWRyb3Bkb3duLWFjdGlvbnMnKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgX3NlbGYuTWVkaWFTZXJ2aWNlLmdldEZpbGVEZXRhaWxzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdmYSBmYS1waWN0dXJlLW8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbm90aGluZ19zZWxlY3RlZDogJycsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIDtcbiAgICB9XG5cbiAgICBjaGFuZ2VWaWV3VHlwZSgpIHtcbiAgICAgICAgbGV0IF9zZWxmID0gdGhpcztcbiAgICAgICAgX3NlbGYuJGJvZHkub24oJ2NsaWNrJywgJy5qcy1ydi1tZWRpYS1jaGFuZ2Utdmlldy10eXBlIC5idG4nLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBsZXQgJGN1cnJlbnQgPSAkKHRoaXMpO1xuICAgICAgICAgICAgaWYgKCRjdXJyZW50Lmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRjdXJyZW50LmNsb3Nlc3QoJy5qcy1ydi1tZWRpYS1jaGFuZ2Utdmlldy10eXBlJykuZmluZCgnLmJ0bicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICRjdXJyZW50LmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgTWVkaWFDb25maWcucmVxdWVzdF9wYXJhbXMudmlld190eXBlID0gJGN1cnJlbnQuZGF0YSgndHlwZScpO1xuXG4gICAgICAgICAgICBpZiAoJGN1cnJlbnQuZGF0YSgndHlwZScpID09PSAndHJhc2gnKSB7XG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkuZmluZCgnLmpzLWluc2VydC10by1lZGl0b3InKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5maW5kKCcuanMtaW5zZXJ0LXRvLWVkaXRvcicpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBIZWxwZXJzLnN0b3JlQ29uZmlnKCk7XG5cbiAgICAgICAgICAgIF9zZWxmLk1lZGlhU2VydmljZS5nZXRNZWRpYSh0cnVlLCB0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoJy5qcy1ydi1tZWRpYS1jaGFuZ2Utdmlldy10eXBlIC5idG5bZGF0YS10eXBlPVwiJyArIEhlbHBlcnMuZ2V0UmVxdWVzdFBhcmFtcygpLnZpZXdfdHlwZSArICdcIl0nKS50cmlnZ2VyKCdjbGljaycpO1xuXG4gICAgICAgIHRoaXMuYmluZEludGVncmF0ZU1vZGFsRXZlbnRzKCk7XG4gICAgfVxuXG4gICAgY2hhbmdlRmlsdGVyKCkge1xuICAgICAgICBsZXQgX3NlbGYgPSB0aGlzO1xuICAgICAgICBfc2VsZi4kYm9keS5vbignY2xpY2snLCAnLmpzLXJ2LW1lZGlhLWNoYW5nZS1maWx0ZXInLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBpZiAoIUhlbHBlcnMuaXNPbkFqYXhMb2FkaW5nKCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgJGN1cnJlbnQgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgIGxldCAkcGFyZW50ID0gJGN1cnJlbnQuY2xvc2VzdCgndWwnKTtcbiAgICAgICAgICAgICAgICBsZXQgZGF0YSA9ICRjdXJyZW50LmRhdGEoKTtcblxuICAgICAgICAgICAgICAgIE1lZGlhQ29uZmlnLnJlcXVlc3RfcGFyYW1zW2RhdGEudHlwZV0gPSBkYXRhLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ3ZpZXdfaW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIE1lZGlhQ29uZmlnLnJlcXVlc3RfcGFyYW1zLmZvbGRlcl9pZCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnZhbHVlID09PSAndHJhc2gnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5maW5kKCcuanMtaW5zZXJ0LXRvLWVkaXRvcicpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5maW5kKCcuanMtaW5zZXJ0LXRvLWVkaXRvcicpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJGN1cnJlbnQuY2xvc2VzdCgnLmRyb3Bkb3duJykuZmluZCgnLmpzLXJ2LW1lZGlhLWZpbHRlci1jdXJyZW50JykuaHRtbCgnKCcgKyAkY3VycmVudC5odG1sKCkgKyAnKScpO1xuXG4gICAgICAgICAgICAgICAgSGVscGVycy5zdG9yZUNvbmZpZygpO1xuICAgICAgICAgICAgICAgIE1lZGlhU2VydmljZS5yZWZyZXNoRmlsdGVyKCk7XG5cbiAgICAgICAgICAgICAgICBIZWxwZXJzLnJlc2V0UGFnaW5hdGlvbigpO1xuICAgICAgICAgICAgICAgIF9zZWxmLk1lZGlhU2VydmljZS5nZXRNZWRpYSh0cnVlKTtcblxuICAgICAgICAgICAgICAgICRwYXJlbnQuZmluZCgnPiBsaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAkY3VycmVudC5jbG9zZXN0KCdsaScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2VhcmNoKCkge1xuICAgICAgICBsZXQgX3NlbGYgPSB0aGlzO1xuICAgICAgICAkKCcuaW5wdXQtc2VhcmNoLXdyYXBwZXIgaW5wdXRbdHlwZT1cInRleHRcIl0nKS52YWwoSGVscGVycy5nZXRSZXF1ZXN0UGFyYW1zKCkuc2VhcmNoIHx8ICcnKTtcbiAgICAgICAgX3NlbGYuJGJvZHkub24oJ3N1Ym1pdCcsICcuaW5wdXQtc2VhcmNoLXdyYXBwZXInLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBNZWRpYUNvbmZpZy5yZXF1ZXN0X3BhcmFtcy5zZWFyY2ggPSAkKHRoaXMpLmZpbmQoJ2lucHV0W3R5cGU9XCJ0ZXh0XCJdJykudmFsKCk7XG5cbiAgICAgICAgICAgIEhlbHBlcnMuc3RvcmVDb25maWcoKTtcbiAgICAgICAgICAgIF9zZWxmLnJlc2V0UGFnaW5hdGlvbigpO1xuICAgICAgICAgICAgX3NlbGYuTWVkaWFTZXJ2aWNlLmdldE1lZGlhKHRydWUpO1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIGhhbmRsZUFjdGlvbnMoKSB7XG4gICAgICAgIGxldCBfc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgX3NlbGYuJGJvZHlcbiAgICAgICAgICAgIC5vbignY2xpY2snLCAnLnJ2LW1lZGlhLWFjdGlvbnMgLmpzLWNoYW5nZS1hY3Rpb25bZGF0YS10eXBlPVwicmVmcmVzaFwiXScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICBIZWxwZXJzLnJlc2V0UGFnaW5hdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgbGV0IGVsZV9vcHRpb25zID0gdHlwZW9mIHdpbmRvdy5ydk1lZGlhLiRlbCAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cucnZNZWRpYS4kZWwuZGF0YSgncnYtbWVkaWEnKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGVsZV9vcHRpb25zICE9PSAndW5kZWZpbmVkJyAmJiBlbGVfb3B0aW9ucy5sZW5ndGggPiAwICYmIHR5cGVvZiBlbGVfb3B0aW9uc1swXS5zZWxlY3RlZF9maWxlX2lkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICBfc2VsZi5NZWRpYVNlcnZpY2UuZ2V0TWVkaWEodHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlXG4gICAgICAgICAgICAgICAgICAgIF9zZWxmLk1lZGlhU2VydmljZS5nZXRNZWRpYSh0cnVlLCBmYWxzZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCdjbGljaycsICcucnYtbWVkaWEtaXRlbXMgbGkubm8taXRlbXMnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICQoJy5ydi1tZWRpYS1oZWFkZXIgLnJ2LW1lZGlhLXRvcC1oZWFkZXIgLnJ2LW1lZGlhLWFjdGlvbnMgLmpzLWRyb3B6b25lLXVwbG9hZCcpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCdzdWJtaXQnLCAnLmZvcm0tYWRkLWZvbGRlcicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgbGV0ICRpbnB1dCA9ICQodGhpcykuZmluZCgnaW5wdXRbdHlwZT10ZXh0XScpO1xuICAgICAgICAgICAgICAgIGxldCBmb2xkZXJOYW1lID0gJGlucHV0LnZhbCgpO1xuICAgICAgICAgICAgICAgIF9zZWxmLkZvbGRlclNlcnZpY2UuY3JlYXRlKGZvbGRlck5hbWUpO1xuICAgICAgICAgICAgICAgICRpbnB1dC52YWwoJycpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbignY2xpY2snLCAnLmpzLWNoYW5nZS1mb2xkZXInLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGxldCBmb2xkZXJJZCA9ICQodGhpcykuZGF0YSgnZm9sZGVyJyk7XG4gICAgICAgICAgICAgICAgSGVscGVycy5yZXNldFBhZ2luYXRpb24oKTtcbiAgICAgICAgICAgICAgICBfc2VsZi5Gb2xkZXJTZXJ2aWNlLmNoYW5nZUZvbGRlcihmb2xkZXJJZCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCdjbGljaycsICcuanMtZmlsZXMtYWN0aW9uJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBBY3Rpb25zU2VydmljZS5oYW5kbGVHbG9iYWxBY3Rpb24oJCh0aGlzKS5kYXRhKCdhY3Rpb24nKSwgZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICBIZWxwZXJzLnJlc2V0UGFnaW5hdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBfc2VsZi5NZWRpYVNlcnZpY2UuZ2V0TWVkaWEodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICA7XG4gICAgfVxuXG4gICAgaGFuZGxlTW9kYWxzKCkge1xuICAgICAgICBsZXQgX3NlbGYgPSB0aGlzO1xuICAgICAgICAvKlJlbmFtZSBmaWxlcyovXG4gICAgICAgIF9zZWxmLiRib2R5Lm9uKCdzaG93LmJzLm1vZGFsJywgJyNtb2RhbF9yZW5hbWVfaXRlbXMnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIEFjdGlvbnNTZXJ2aWNlLnJlbmRlclJlbmFtZUl0ZW1zKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBfc2VsZi4kYm9keS5vbignc3VibWl0JywgJyNtb2RhbF9yZW5hbWVfaXRlbXMgLmZvcm0tcmVuYW1lJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbGV0IGl0ZW1zID0gW107XG4gICAgICAgICAgICBsZXQgJGZvcm0gPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAkKCcjbW9kYWxfcmVuYW1lX2l0ZW1zIC5mb3JtLWNvbnRyb2wnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBsZXQgJGN1cnJlbnQgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgIGxldCBkYXRhID0gJGN1cnJlbnQuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKS5kYXRhKCk7XG4gICAgICAgICAgICAgICAgZGF0YS5uYW1lID0gJGN1cnJlbnQudmFsKCk7XG4gICAgICAgICAgICAgICAgaXRlbXMucHVzaChkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBBY3Rpb25zU2VydmljZS5wcm9jZXNzQWN0aW9uKHtcbiAgICAgICAgICAgICAgICBhY3Rpb246ICRmb3JtLmRhdGEoJ2FjdGlvbicpLFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBpdGVtc1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgIGlmICghcmVzLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICRmb3JtLmNsb3Nlc3QoJy5tb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgICAgIF9zZWxmLk1lZGlhU2VydmljZS5nZXRNZWRpYSh0cnVlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkKCcjbW9kYWxfcmVuYW1lX2l0ZW1zIC5mb3JtLWdyb3VwJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgJGN1cnJlbnQgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF8uY29udGFpbnMocmVzLmRhdGEsICRjdXJyZW50LmRhdGEoJ2lkJykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGN1cnJlbnQuYWRkQ2xhc3MoJ2hhcy1lcnJvcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY3VycmVudC5yZW1vdmVDbGFzcygnaGFzLWVycm9yJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvKkRlbGV0ZSBmaWxlcyovXG4gICAgICAgIF9zZWxmLiRib2R5Lm9uKCdzdWJtaXQnLCAnLmZvcm0tZGVsZXRlLWl0ZW1zJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbGV0IGl0ZW1zID0gW107XG4gICAgICAgICAgICBsZXQgJGZvcm0gPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICBfLmVhY2goSGVscGVycy5nZXRTZWxlY3RlZEl0ZW1zKCksIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBpZDogdmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgIGlzX2ZvbGRlcjogdmFsdWUuaXNfZm9sZGVyLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgQWN0aW9uc1NlcnZpY2UucHJvY2Vzc0FjdGlvbih7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiAkZm9ybS5kYXRhKCdhY3Rpb24nKSxcbiAgICAgICAgICAgICAgICBzZWxlY3RlZDogaXRlbXNcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAkZm9ybS5jbG9zZXN0KCcubW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICAgICAgICAgIGlmICghcmVzLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIF9zZWxmLk1lZGlhU2VydmljZS5nZXRNZWRpYSh0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLypFbXB0eSB0cmFzaCovXG4gICAgICAgIF9zZWxmLiRib2R5Lm9uKCdzdWJtaXQnLCAnI21vZGFsX2VtcHR5X3RyYXNoIC5ydi1mb3JtJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbGV0ICRmb3JtID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgQWN0aW9uc1NlcnZpY2UucHJvY2Vzc0FjdGlvbih7XG4gICAgICAgICAgICAgICAgYWN0aW9uOiAkZm9ybS5kYXRhKCdhY3Rpb24nKVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICRmb3JtLmNsb3Nlc3QoJy5tb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgX3NlbGYuTWVkaWFTZXJ2aWNlLmdldE1lZGlhKHRydWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qU2hhcmUgZmlsZXMqL1xuICAgICAgICBsZXQgdXNlcnMgPSBbXTtcbiAgICAgICAgbGV0ICRzaGFyZU9wdGlvbiA9ICQoJyNzaGFyZV9vcHRpb24nKTtcbiAgICAgICAgbGV0ICRzaGFyZVRvVXNlcnMgPSAkKCcjc2hhcmVfdG9fdXNlcnMnKTtcbiAgICAgICAgJHNoYXJlT3B0aW9uLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKSA9PT0gJ3VzZXInKSB7XG4gICAgICAgICAgICAgICAgJHNoYXJlVG9Vc2Vycy5jbG9zZXN0KCcuZm9ybS1ncm91cCcpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJHNoYXJlVG9Vc2Vycy5jbG9zZXN0KCcuZm9ybS1ncm91cCcpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgIF9zZWxmLiRib2R5XG4gICAgICAgICAgICAub24oJ3Nob3cuYnMubW9kYWwnLCAnI21vZGFsX3NoYXJlX2l0ZW1zJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgJHNoYXJlT3B0aW9uLnZhbCgnbm9fc2hhcmUnKS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICAkc2hhcmVUb1VzZXJzLnZhbCgnJyk7XG5cbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRJdGVtcyA9IEhlbHBlcnMuZ2V0U2VsZWN0ZWRJdGVtcygpO1xuXG4gICAgICAgICAgICAgICAgaWYgKF8uc2l6ZShzZWxlY3RlZEl0ZW1zKSAhPT0gMSkge1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBpc19wdWJsaWMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkLmVhY2goc2VsZWN0ZWRJdGVtcywgZnVuY3Rpb24gKGluZGV4LCBlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsLmlzX3B1YmxpYyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfcHVibGljID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc19wdWJsaWMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzaGFyZU9wdGlvbi52YWwoJ2V2ZXJ5b25lJykudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogUlZfTUVESUFfVVJMLmdldF91c2VycyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXMuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzaGFyZVRvVXNlcnMuaHRtbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VycyA9IHJlcy5kYXRhO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5lYWNoKHVzZXJzLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgb3B0aW9uID0gJzxvcHRpb24gdmFsdWU9XCInICsgdmFsdWUuaWQgKyAnXCI+JyArIHZhbHVlLm5hbWUgKyAnPC9vcHRpb24+JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2hhcmVUb1VzZXJzLmFwcGVuZChvcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5zaG93TWVzc2FnZSgnZXJyb3InLCByZXMubWVzc2FnZSwgUlZfTUVESUFfQ09ORklHLnRyYW5zbGF0aW9ucy5tZXNzYWdlLmVycm9yX2hlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5oYW5kbGVFcnJvcihkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzZWxlY3RlZEl0ZW0gPSBfLmZpcnN0KHNlbGVjdGVkSXRlbXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZEl0ZW0uaXNfcHVibGljKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2hhcmVPcHRpb24udmFsKCdldmVyeW9uZScpLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IFJWX01FRElBX1VSTC5nZXRfc2hhcmVkX3VzZXJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVfaWQ6IHNlbGVjdGVkSXRlbS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfZm9sZGVyOiBzZWxlY3RlZEl0ZW0uaXNfZm9sZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzLmVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2hhcmVUb1VzZXJzLmh0bWwoJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcnMgPSByZXMuZGF0YS51c2VycztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0b3RhbFNlbGVjdGVkID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uZWFjaCh1c2VycywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGlzU2VsZWN0ZWQgPSB2YWx1ZS5pc19zZWxlY3RlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFNlbGVjdGVkKys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvcHRpb24gPSAnPG9wdGlvbiB2YWx1ZT1cIicgKyB2YWx1ZS5pZCArICdcIiAnICsgKGlzU2VsZWN0ZWQgPyAnc2VsZWN0ZWQnIDogJycpICsgJz4nICsgdmFsdWUubmFtZSArICc8L29wdGlvbj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzaGFyZVRvVXNlcnMuYXBwZW5kKG9wdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b3RhbFNlbGVjdGVkID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzaGFyZU9wdGlvbi52YWwoJ3VzZXInKS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNob3dNZXNzYWdlKCdlcnJvcicsIHJlcy5tZXNzYWdlLCBSVl9NRURJQV9DT05GSUcudHJhbnNsYXRpb25zLm1lc3NhZ2UuZXJyb3JfaGVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLmhhbmRsZUVycm9yKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbignc3VibWl0JywgJyNtb2RhbF9zaGFyZV9pdGVtcyAucnYtZm9ybScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgbGV0ICRmb3JtID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgIGxldCBpdGVtcyA9IFtdO1xuICAgICAgICAgICAgICAgIF8uZWFjaChIZWxwZXJzLmdldFNlbGVjdGVkSXRlbXMoKSwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHZhbHVlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNfZm9sZGVyOiB2YWx1ZS5pc19mb2xkZXIsXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBBY3Rpb25zU2VydmljZS5wcm9jZXNzQWN0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAkZm9ybS5kYXRhKCdhY3Rpb24nKSxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IGl0ZW1zLFxuICAgICAgICAgICAgICAgICAgICBzaGFyZV9vcHRpb246ICRzaGFyZU9wdGlvbi52YWwoKSxcbiAgICAgICAgICAgICAgICAgICAgdXNlcnM6ICRzaGFyZVRvVXNlcnMudmFsKClcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICRmb3JtLmNsb3Nlc3QoJy5tb2RhbCcpLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgICAgICAgICAgICAgIF9zZWxmLk1lZGlhU2VydmljZS5nZXRNZWRpYSh0cnVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAub24oJ3N1Ym1pdCcsICcjbW9kYWxfc2V0X2ZvY3VzX3BvaW50IC5ydi1mb3JtJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBsZXQgJGZvcm0gPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgbGV0IGl0ZW1zID0gW107XG4gICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkX2l0ZW1zID0gSGVscGVycy5nZXRTZWxlY3RlZEl0ZW1zKCk7XG4gICAgICAgICAgICAgICAgXy5lYWNoKHNlbGVjdGVkX2l0ZW1zLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogdmFsdWUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc19mb2xkZXI6IHZhbHVlLmlzX2ZvbGRlclxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIEFjdGlvbnNTZXJ2aWNlLnByb2Nlc3NBY3Rpb24oe1xuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICRmb3JtLmRhdGEoJ2FjdGlvbicpLFxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZDogaXRlbXMsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFfYXR0cmlidXRlOiAkKCcuaGVscGVyLXRvb2wtZGF0YS1hdHRyJykudmFsKCksXG4gICAgICAgICAgICAgICAgICAgIGNzc19iZ19wb3NpdGlvbjogJCgnLmhlbHBlci10b29sLWNzczMtdmFsJykudmFsKCksXG4gICAgICAgICAgICAgICAgICAgIHJldGljZV9jc3M6ICQoJy5oZWxwZXItdG9vbC1yZXRpY2xlLWNzcycpLnZhbCgpXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgICAgICAkZm9ybS5jbG9zZXN0KCcubW9kYWwnKS5tb2RhbCgnaGlkZScpO1xuICAgICAgICAgICAgICAgICAgICBfLmVhY2goc2VsZWN0ZWRfaXRlbXMsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmlkID09PSByZXMuZGF0YS5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5qcy1tZWRpYS1saXN0LXRpdGxlW2RhdGEtaWQ9JyArIHZhbHVlLmlkICsgJ10nKS5kYXRhKHJlcy5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBpZiAoTWVkaWFDb25maWcucmVxdWVzdF9wYXJhbXMudmlld19pbiA9PT0gJ3RyYXNoJykge1xuICAgICAgICAgICAgJChkb2N1bWVudCkuZmluZCgnLmpzLWluc2VydC10by1lZGl0b3InKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChkb2N1bWVudCkuZmluZCgnLmpzLWluc2VydC10by1lZGl0b3InKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYmluZEludGVncmF0ZU1vZGFsRXZlbnRzKCk7XG4gICAgfVxuXG4gICAgY2hlY2tGaWxlVHlwZVNlbGVjdChzZWxlY3RlZEZpbGVzKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93LnJ2TWVkaWEuJGVsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgbGV0IGZpcnN0SXRlbSA9IF8uZmlyc3Qoc2VsZWN0ZWRGaWxlcyk7XG4gICAgICAgICAgICBsZXQgZWxlX29wdGlvbnMgPSB3aW5kb3cucnZNZWRpYS4kZWwuZGF0YSgncnYtbWVkaWEnKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZWxlX29wdGlvbnMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBlbGVfb3B0aW9uc1swXSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGVsZV9vcHRpb25zWzBdLmZpbGVfdHlwZSAhPT0gJ3VuZGVmaW5lZCcgJiYgZmlyc3RJdGVtICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgICYmIGZpcnN0SXRlbS50eXBlICE9PSAndW5kZWZpbmVkJyAmJiAhZWxlX29wdGlvbnNbMF0uZmlsZV90eXBlLm1hdGNoKGZpcnN0SXRlbS50eXBlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBiaW5kSW50ZWdyYXRlTW9kYWxFdmVudHMoKSB7XG4gICAgICAgIGxldCAkbWFpbl9tb2RhbCA9ICQoJyNydl9tZWRpYV9tb2RhbCcpO1xuICAgICAgICBsZXQgX3NlbGYgPSB0aGlzO1xuICAgICAgICAkbWFpbl9tb2RhbC5vZmYoJ2NsaWNrJywgJy5qcy1pbnNlcnQtdG8tZWRpdG9yJykub24oJ2NsaWNrJywgJy5qcy1pbnNlcnQtdG8tZWRpdG9yJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgbGV0IHNlbGVjdGVkRmlsZXMgPSBIZWxwZXJzLmdldFNlbGVjdGVkRmlsZXMoKTtcbiAgICAgICAgICAgIGlmIChfLnNpemUoc2VsZWN0ZWRGaWxlcykgPiAwKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LnJ2TWVkaWEub3B0aW9ucy5vblNlbGVjdEZpbGVzKHNlbGVjdGVkRmlsZXMsIHdpbmRvdy5ydk1lZGlhLiRlbCk7XG4gICAgICAgICAgICAgICAgaWYgKF9zZWxmLmNoZWNrRmlsZVR5cGVTZWxlY3Qoc2VsZWN0ZWRGaWxlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgJG1haW5fbW9kYWwuZmluZCgnLmNsb3NlJykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRtYWluX21vZGFsLm9mZignZGJsY2xpY2snLCAnLmpzLW1lZGlhLWxpc3QtdGl0bGUnKS5vbignZGJsY2xpY2snLCAnLmpzLW1lZGlhLWxpc3QtdGl0bGUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBpZiAoSGVscGVycy5nZXRDb25maWdzKCkucmVxdWVzdF9wYXJhbXMudmlld19pbiAhPT0gJ3RyYXNoJykge1xuICAgICAgICAgICAgICAgIGxldCBzZWxlY3RlZEZpbGVzID0gSGVscGVycy5nZXRTZWxlY3RlZEZpbGVzKCk7XG4gICAgICAgICAgICAgICAgaWYgKF8uc2l6ZShzZWxlY3RlZEZpbGVzKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnJ2TWVkaWEub3B0aW9ucy5vblNlbGVjdEZpbGVzKHNlbGVjdGVkRmlsZXMsIHdpbmRvdy5ydk1lZGlhLiRlbCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfc2VsZi5jaGVja0ZpbGVUeXBlU2VsZWN0KHNlbGVjdGVkRmlsZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkbWFpbl9tb2RhbC5maW5kKCcuY2xvc2UnKS50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBBY3Rpb25zU2VydmljZS5oYW5kbGVQcmV2aWV3KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyBzZXR1cFNlY3VyaXR5KCkge1xuICAgICAgICAkLmFqYXhTZXR1cCh7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ1gtQ1NSRi1UT0tFTic6ICQoJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKS5hdHRyKCdjb250ZW50JylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG5cblxuICAgIC8vc2Nyb2xsIGdldCBtb3JlIG1lZGlhXG4gICAgc2Nyb2xsR2V0TW9yZSgpIHtcbiAgICAgICAgbGV0IF9zZWxmID0gdGhpcztcbiAgICAgICAgJCgnLnJ2LW1lZGlhLW1haW4gLnJ2LW1lZGlhLWl0ZW1zJykuYmluZCgnRE9NTW91c2VTY3JvbGwgbW91c2V3aGVlbCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS5vcmlnaW5hbEV2ZW50LmRldGFpbCA+IDAgfHwgZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGEgPCAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKCQodGhpcykuc2Nyb2xsVG9wKCkgKyAkKHRoaXMpLmlubmVySGVpZ2h0KCkgPj0gJCh0aGlzKVswXS5zY3JvbGxIZWlnaHQgLSAzNTApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBSVl9NRURJQV9DT05GSUcucGFnaW5hdGlvbiAhPSAndW5kZWZpbmVkJyAmJiBSVl9NRURJQV9DT05GSUcucGFnaW5hdGlvbi5oYXNfbW9yZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3NlbGYuTWVkaWFTZXJ2aWNlLmdldE1lZGlhKGZhbHNlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgIHdpbmRvdy5ydk1lZGlhID0gd2luZG93LnJ2TWVkaWEgfHwge307XG5cbiAgICBNZWRpYU1hbmFnZW1lbnQuc2V0dXBTZWN1cml0eSgpO1xuICAgIG5ldyBNZWRpYU1hbmFnZW1lbnQoKS5pbml0KCk7XG59KTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gcmVzb3VyY2VzL2Fzc2V0cy9qcy9tZWRpYS5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBR0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFFQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbEJBO0FBb0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE5QkE7QUFnQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQXhCQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBREE7QUFLQTs7Ozs7O0FBcUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///8\n");

/***/ }),
/* 9 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ContextMenuService; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__ActionsService__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__ = __webpack_require__(0);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar ContextMenuService = function () {\n    function ContextMenuService() {\n        _classCallCheck(this, ContextMenuService);\n    }\n\n    _createClass(ContextMenuService, null, [{\n        key: 'initContext',\n        value: function initContext() {\n            if (jQuery().contextMenu) {\n                $.contextMenu({\n                    selector: '.js-context-menu[data-context=\"file\"]',\n                    build: function build($element, event) {\n                        return {\n                            items: ContextMenuService._fileContextMenu()\n                        };\n                    }\n                });\n\n                $.contextMenu({\n                    selector: '.js-context-menu[data-context=\"folder\"]',\n                    build: function build($element, event) {\n                        return {\n                            items: ContextMenuService._folderContextMenu()\n                        };\n                    }\n                });\n            }\n        }\n    }, {\n        key: '_fileContextMenu',\n        value: function _fileContextMenu() {\n            var items = {\n                preview: {\n                    name: 'Preview',\n                    icon: function icon(opt, $itemElement, itemKey, item) {\n                        $itemElement.html('<i class=\"fa fa-eye\" aria-hidden=\"true\"></i> ' + item.name);\n\n                        return 'context-menu-icon-updated';\n                    },\n                    callback: function callback(key, opt) {\n                        __WEBPACK_IMPORTED_MODULE_0__ActionsService__[\"a\" /* ActionsService */].handlePreview();\n                    }\n                },\n                set_focus_point: {\n                    name: \"Set focus point\",\n                    icon: function icon(opt, $itemElement, itemKey, item) {\n                        $itemElement.html('<i class=\"fa fa-dot-circle-o\" aria-hidden=\"true\"></i> ' + item.name);\n\n                        return 'context-menu-icon-updated';\n                    },\n                    callback: function callback(key, opt) {\n                        $('.js-files-action[data-action=\"set_focus_point\"]').trigger('click');\n                    }\n                }\n            };\n\n            _.each(__WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getConfigs().actions_list, function (actionGroup, key) {\n                _.each(actionGroup, function (value) {\n                    items[value.action] = {\n                        name: value.name,\n                        icon: function icon(opt, $itemElement, itemKey, item) {\n                            $itemElement.html('<i class=\"' + value.icon + '\" aria-hidden=\"true\"></i> ' + (RV_MEDIA_CONFIG.translations.actions_list[key][value.action] || item.name));\n\n                            return 'context-menu-icon-updated';\n                        },\n                        callback: function callback(key, opt) {\n                            $('.js-files-action[data-action=\"' + value.action + '\"]').trigger('click');\n                        }\n                    };\n                });\n            });\n\n            var except = [];\n\n            switch (__WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getRequestParams().view_in) {\n                case 'my_media':\n                    except = ['remove_favorite', 'delete', 'restore', 'remove_share'];\n                    break;\n                case 'public':\n                    except = ['remove_favorite', 'delete', 'restore', 'remove_share'];\n                    break;\n                case 'shared':\n                    except = ['make_copy', 'remove_favorite', 'delete', 'restore', 'remove_share'];\n                    break;\n                case 'shared_with_me':\n                    except = ['share', 'remove_favorite', 'delete', 'restore', 'make_copy'];\n                    break;\n                case 'recent':\n                    except = ['remove_favorite', 'delete', 'restore', 'remove_share', 'make_copy'];\n                    break;\n                case 'favorites':\n                    except = ['favorite', 'delete', 'restore', 'remove_share', 'make_copy'];\n                    break;\n                case 'trash':\n                    items = {\n                        preview: items.preview,\n                        rename: items.rename,\n                        download: items.download,\n                        delete: items.delete,\n                        restore: items.restore\n                    };\n                    break;\n            }\n\n            _.each(except, function (value) {\n                items[value] = undefined;\n            });\n\n            if (__WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getSelectedItems().length > 1) {\n                items.set_focus_point = undefined;\n            }\n\n            var hasFolderSelected = __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getSelectedFolder().length > 0;\n\n            if (hasFolderSelected) {\n                items.preview = undefined;\n                items.set_focus_point = undefined;\n                items.copy_link = undefined;\n\n                if (!_.contains(RV_MEDIA_CONFIG.permissions, 'folders.create')) {\n                    items.make_copy = undefined;\n                }\n\n                if (!_.contains(RV_MEDIA_CONFIG.permissions, 'folders.edit')) {\n                    items.rename = undefined;\n                    items.share = undefined;\n                    items.remove_share = undefined;\n                    items.un_share = undefined;\n                }\n\n                if (!_.contains(RV_MEDIA_CONFIG.permissions, 'folders.trash')) {\n                    items.trash = undefined;\n                    items.restore = undefined;\n                }\n\n                if (!_.contains(RV_MEDIA_CONFIG.permissions, 'folders.delete')) {\n                    items.delete = undefined;\n                }\n            }\n\n            var selectedFiles = __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getSelectedFiles();\n            if (selectedFiles.length > 0 && selectedFiles[0].type !== 'image') {\n                items.set_focus_point = undefined;\n            }\n\n            if (selectedFiles.length > 0) {\n                if (!_.contains(RV_MEDIA_CONFIG.permissions, 'files.create')) {\n                    items.make_copy = undefined;\n                }\n\n                if (!_.contains(RV_MEDIA_CONFIG.permissions, 'files.edit')) {\n                    items.rename = undefined;\n                    items.set_focus_point = undefined;\n                    items.share = undefined;\n                    items.remove_share = undefined;\n                    items.un_share = undefined;\n                }\n\n                if (!_.contains(RV_MEDIA_CONFIG.permissions, 'files.trash')) {\n                    items.trash = undefined;\n                    items.restore = undefined;\n                }\n\n                if (!_.contains(RV_MEDIA_CONFIG.permissions, 'files.delete')) {\n                    items.delete = undefined;\n                }\n            }\n\n            var can_preview = false;\n            _.each(selectedFiles, function (value) {\n                if (_.contains(['image', 'youtube', 'pdf', 'text', 'video'], value.type)) {\n                    can_preview = true;\n                }\n            });\n\n            if (!can_preview) {\n                items.preview = undefined;\n            }\n\n            if (RV_MEDIA_CONFIG.mode === 'simple') {\n                items.share = undefined;\n                items.un_share = undefined;\n                items.remove_share = undefined;\n            }\n\n            return items;\n        }\n    }, {\n        key: '_folderContextMenu',\n        value: function _folderContextMenu() {\n            var items = ContextMenuService._fileContextMenu();\n\n            items.preview = undefined;\n            items.set_focus_point = undefined;\n            items.copy_link = undefined;\n\n            return items;\n        }\n    }, {\n        key: 'destroyContext',\n        value: function destroyContext() {\n            if (jQuery().contextMenu) {\n                $.contextMenu('destroy');\n            }\n        }\n    }]);\n\n    return ContextMenuService;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9yZXNvdXJjZXMvYXNzZXRzL2pzL0FwcC9TZXJ2aWNlcy9Db250ZXh0TWVudVNlcnZpY2UuanM/ZWE4MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0FjdGlvbnNTZXJ2aWNlfSBmcm9tICcuL0FjdGlvbnNTZXJ2aWNlJztcbmltcG9ydCB7SGVscGVyc30gZnJvbSAnLi4vSGVscGVycy9IZWxwZXJzJztcblxuZXhwb3J0IGNsYXNzIENvbnRleHRNZW51U2VydmljZSB7XG4gICAgc3RhdGljIGluaXRDb250ZXh0KCkge1xuICAgICAgICBpZiAoalF1ZXJ5KCkuY29udGV4dE1lbnUpIHtcbiAgICAgICAgICAgICQuY29udGV4dE1lbnUoe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnLmpzLWNvbnRleHQtbWVudVtkYXRhLWNvbnRleHQ9XCJmaWxlXCJdJyxcbiAgICAgICAgICAgICAgICBidWlsZDogZnVuY3Rpb24gKCRlbGVtZW50LCBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IENvbnRleHRNZW51U2VydmljZS5fZmlsZUNvbnRleHRNZW51KCksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkLmNvbnRleHRNZW51KHtcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJy5qcy1jb250ZXh0LW1lbnVbZGF0YS1jb250ZXh0PVwiZm9sZGVyXCJdJyxcbiAgICAgICAgICAgICAgICBidWlsZDogZnVuY3Rpb24gKCRlbGVtZW50LCBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IENvbnRleHRNZW51U2VydmljZS5fZm9sZGVyQ29udGV4dE1lbnUoKSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgX2ZpbGVDb250ZXh0TWVudSgpIHtcbiAgICAgICAgbGV0IGl0ZW1zID0ge1xuICAgICAgICAgICAgcHJldmlldzoge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdQcmV2aWV3JyxcbiAgICAgICAgICAgICAgICBpY29uOiBmdW5jdGlvbiAob3B0LCAkaXRlbUVsZW1lbnQsIGl0ZW1LZXksIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgJGl0ZW1FbGVtZW50Lmh0bWwoJzxpIGNsYXNzPVwiZmEgZmEtZXllXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9pPiAnICsgaXRlbS5uYW1lKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2NvbnRleHQtbWVudS1pY29uLXVwZGF0ZWQnO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChrZXksIG9wdCkge1xuICAgICAgICAgICAgICAgICAgICBBY3Rpb25zU2VydmljZS5oYW5kbGVQcmV2aWV3KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldF9mb2N1c19wb2ludDoge1xuICAgICAgICAgICAgICAgIG5hbWU6IFwiU2V0IGZvY3VzIHBvaW50XCIsXG4gICAgICAgICAgICAgICAgaWNvbjogZnVuY3Rpb24gKG9wdCwgJGl0ZW1FbGVtZW50LCBpdGVtS2V5LCBpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICRpdGVtRWxlbWVudC5odG1sKCc8aSBjbGFzcz1cImZhIGZhLWRvdC1jaXJjbGUtb1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4gJyArIGl0ZW0ubmFtZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdjb250ZXh0LW1lbnUtaWNvbi11cGRhdGVkJztcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoa2V5LCBvcHQpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmpzLWZpbGVzLWFjdGlvbltkYXRhLWFjdGlvbj1cInNldF9mb2N1c19wb2ludFwiXScpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICBfLmVhY2goSGVscGVycy5nZXRDb25maWdzKCkuYWN0aW9uc19saXN0LCBmdW5jdGlvbiAoYWN0aW9uR3JvdXAsIGtleSkge1xuICAgICAgICAgICAgXy5lYWNoKGFjdGlvbkdyb3VwLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpdGVtc1t2YWx1ZS5hY3Rpb25dID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB2YWx1ZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBpY29uOiBmdW5jdGlvbiAob3B0LCAkaXRlbUVsZW1lbnQsIGl0ZW1LZXksIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRpdGVtRWxlbWVudC5odG1sKCc8aSBjbGFzcz1cIicgKyB2YWx1ZS5pY29uICsgJ1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4gJyArIChSVl9NRURJQV9DT05GSUcudHJhbnNsYXRpb25zLmFjdGlvbnNfbGlzdFtrZXldW3ZhbHVlLmFjdGlvbl0gfHwgaXRlbS5uYW1lKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnY29udGV4dC1tZW51LWljb24tdXBkYXRlZCc7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoa2V5LCBvcHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5qcy1maWxlcy1hY3Rpb25bZGF0YS1hY3Rpb249XCInICsgdmFsdWUuYWN0aW9uICsgJ1wiXScpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGV4Y2VwdCA9IFtdO1xuXG4gICAgICAgIHN3aXRjaCAoSGVscGVycy5nZXRSZXF1ZXN0UGFyYW1zKCkudmlld19pbikge1xuICAgICAgICAgICAgY2FzZSAnbXlfbWVkaWEnOlxuICAgICAgICAgICAgICAgIGV4Y2VwdCA9IFsncmVtb3ZlX2Zhdm9yaXRlJywgJ2RlbGV0ZScsICdyZXN0b3JlJywgJ3JlbW92ZV9zaGFyZSddO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncHVibGljJzpcbiAgICAgICAgICAgICAgICBleGNlcHQgPSBbJ3JlbW92ZV9mYXZvcml0ZScsICdkZWxldGUnLCAncmVzdG9yZScsICdyZW1vdmVfc2hhcmUnXTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3NoYXJlZCc6XG4gICAgICAgICAgICAgICAgZXhjZXB0ID0gWydtYWtlX2NvcHknLCAncmVtb3ZlX2Zhdm9yaXRlJywgJ2RlbGV0ZScsICdyZXN0b3JlJywgJ3JlbW92ZV9zaGFyZSddO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnc2hhcmVkX3dpdGhfbWUnOlxuICAgICAgICAgICAgICAgIGV4Y2VwdCA9IFsnc2hhcmUnLCAncmVtb3ZlX2Zhdm9yaXRlJywgJ2RlbGV0ZScsICdyZXN0b3JlJywgJ21ha2VfY29weSddO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncmVjZW50JzpcbiAgICAgICAgICAgICAgICBleGNlcHQgPSBbJ3JlbW92ZV9mYXZvcml0ZScsICdkZWxldGUnLCAncmVzdG9yZScsICdyZW1vdmVfc2hhcmUnLCAnbWFrZV9jb3B5J107XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdmYXZvcml0ZXMnOlxuICAgICAgICAgICAgICAgIGV4Y2VwdCA9IFsnZmF2b3JpdGUnLCAnZGVsZXRlJywgJ3Jlc3RvcmUnLCAncmVtb3ZlX3NoYXJlJywgJ21ha2VfY29weSddO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndHJhc2gnOlxuICAgICAgICAgICAgICAgIGl0ZW1zID0ge1xuICAgICAgICAgICAgICAgICAgICBwcmV2aWV3OiBpdGVtcy5wcmV2aWV3LFxuICAgICAgICAgICAgICAgICAgICByZW5hbWU6IGl0ZW1zLnJlbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZG93bmxvYWQ6IGl0ZW1zLmRvd25sb2FkLFxuICAgICAgICAgICAgICAgICAgICBkZWxldGU6IGl0ZW1zLmRlbGV0ZSxcbiAgICAgICAgICAgICAgICAgICAgcmVzdG9yZTogaXRlbXMucmVzdG9yZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgXy5lYWNoKGV4Y2VwdCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpdGVtc1t2YWx1ZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChIZWxwZXJzLmdldFNlbGVjdGVkSXRlbXMoKS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBpdGVtcy5zZXRfZm9jdXNfcG9pbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGFzRm9sZGVyU2VsZWN0ZWQgPSBIZWxwZXJzLmdldFNlbGVjdGVkRm9sZGVyKCkubGVuZ3RoID4gMDtcblxuICAgICAgICBpZiAoaGFzRm9sZGVyU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGl0ZW1zLnByZXZpZXcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpdGVtcy5zZXRfZm9jdXNfcG9pbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpdGVtcy5jb3B5X2xpbmsgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIGlmICghXy5jb250YWlucyhSVl9NRURJQV9DT05GSUcucGVybWlzc2lvbnMsICdmb2xkZXJzLmNyZWF0ZScpKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMubWFrZV9jb3B5ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIV8uY29udGFpbnMoUlZfTUVESUFfQ09ORklHLnBlcm1pc3Npb25zLCAnZm9sZGVycy5lZGl0JykpIHtcbiAgICAgICAgICAgICAgICBpdGVtcy5yZW5hbWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaXRlbXMuc2hhcmUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaXRlbXMucmVtb3ZlX3NoYXJlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGl0ZW1zLnVuX3NoYXJlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIV8uY29udGFpbnMoUlZfTUVESUFfQ09ORklHLnBlcm1pc3Npb25zLCAnZm9sZGVycy50cmFzaCcpKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMudHJhc2ggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaXRlbXMucmVzdG9yZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFfLmNvbnRhaW5zKFJWX01FRElBX0NPTkZJRy5wZXJtaXNzaW9ucywgJ2ZvbGRlcnMuZGVsZXRlJykpIHtcbiAgICAgICAgICAgICAgICBpdGVtcy5kZWxldGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc2VsZWN0ZWRGaWxlcyA9IEhlbHBlcnMuZ2V0U2VsZWN0ZWRGaWxlcygpO1xuICAgICAgICBpZiAoc2VsZWN0ZWRGaWxlcy5sZW5ndGggPiAwICYmIHNlbGVjdGVkRmlsZXNbMF0udHlwZSAhPT0gJ2ltYWdlJykge1xuICAgICAgICAgICAgaXRlbXMuc2V0X2ZvY3VzX3BvaW50ID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNlbGVjdGVkRmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaWYgKCFfLmNvbnRhaW5zKFJWX01FRElBX0NPTkZJRy5wZXJtaXNzaW9ucywgJ2ZpbGVzLmNyZWF0ZScpKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMubWFrZV9jb3B5ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIV8uY29udGFpbnMoUlZfTUVESUFfQ09ORklHLnBlcm1pc3Npb25zLCAnZmlsZXMuZWRpdCcpKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMucmVuYW1lID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGl0ZW1zLnNldF9mb2N1c19wb2ludCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpdGVtcy5zaGFyZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpdGVtcy5yZW1vdmVfc2hhcmUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaXRlbXMudW5fc2hhcmUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghXy5jb250YWlucyhSVl9NRURJQV9DT05GSUcucGVybWlzc2lvbnMsICdmaWxlcy50cmFzaCcpKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMudHJhc2ggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgaXRlbXMucmVzdG9yZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFfLmNvbnRhaW5zKFJWX01FRElBX0NPTkZJRy5wZXJtaXNzaW9ucywgJ2ZpbGVzLmRlbGV0ZScpKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMuZGVsZXRlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGNhbl9wcmV2aWV3ID0gZmFsc2U7XG4gICAgICAgIF8uZWFjaChzZWxlY3RlZEZpbGVzLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChfLmNvbnRhaW5zKFsnaW1hZ2UnLCAneW91dHViZScsICdwZGYnLCAndGV4dCcsICd2aWRlbyddLCB2YWx1ZS50eXBlKSkge1xuICAgICAgICAgICAgICAgIGNhbl9wcmV2aWV3ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFjYW5fcHJldmlldykge1xuICAgICAgICAgICAgaXRlbXMucHJldmlldyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChSVl9NRURJQV9DT05GSUcubW9kZSA9PT0gJ3NpbXBsZScpIHtcbiAgICAgICAgICAgIGl0ZW1zLnNoYXJlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgaXRlbXMudW5fc2hhcmUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBpdGVtcy5yZW1vdmVfc2hhcmUgPSB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgfVxuXG4gICAgc3RhdGljIF9mb2xkZXJDb250ZXh0TWVudSgpIHtcbiAgICAgICAgbGV0IGl0ZW1zID0gQ29udGV4dE1lbnVTZXJ2aWNlLl9maWxlQ29udGV4dE1lbnUoKTtcblxuICAgICAgICBpdGVtcy5wcmV2aWV3ID0gdW5kZWZpbmVkO1xuICAgICAgICBpdGVtcy5zZXRfZm9jdXNfcG9pbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGl0ZW1zLmNvcHlfbGluayA9IHVuZGVmaW5lZDtcblxuICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgfVxuXG4gICAgc3RhdGljIGRlc3Ryb3lDb250ZXh0KCkge1xuICAgICAgICBpZiAoalF1ZXJ5KCkuY29udGV4dE1lbnUpIHtcbiAgICAgICAgICAgICQuY29udGV4dE1lbnUoJ2Rlc3Ryb3knKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyByZXNvdXJjZXMvYXNzZXRzL2pzL0FwcC9TZXJ2aWNlcy9Db250ZXh0TWVudVNlcnZpY2UuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQU5BO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQU5BO0FBUUE7QUFDQTtBQXJCQTtBQUFBO0FBQUE7QUF3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFUQTtBQVpBO0FBQ0E7QUF3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUEzQkE7QUFDQTtBQTZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkxBO0FBQUE7QUFBQTtBQXNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBN0xBO0FBQUE7QUFBQTtBQWdNQTtBQUNBO0FBQ0E7QUFDQTtBQW5NQTtBQUNBO0FBREE7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///9\n");

/***/ }),
/* 10 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return MediaDetails; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Helpers_Helpers__ = __webpack_require__(0);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar MediaDetails = function () {\n    function MediaDetails() {\n        _classCallCheck(this, MediaDetails);\n\n        this.$detailsWrapper = $('.rv-media-main .rv-media-details');\n\n        this.descriptionItemTemplate = '<div class=\"rv-media-name\"><p>__title__</p>__url__</div>';\n\n        this.onlyFields = ['name', 'full_url', 'size', 'mime_type', 'created_at', 'updated_at', 'nothing_selected'];\n\n        this.externalTypes = ['youtube', 'vimeo', 'metacafe', 'dailymotion', 'vine', 'instagram'];\n    }\n\n    _createClass(MediaDetails, [{\n        key: 'renderData',\n        value: function renderData(data) {\n            var _self = this;\n            var thumb = data.type === 'image' ? '<img src=\"' + data.full_url + '\" alt=\"' + data.name + '\">' : data.mime_type === 'youtube' ? '<img src=\"' + data.options.thumb + '\" alt=\"' + data.name + '\">' : '<i class=\"' + data.icon + '\"></i>';\n            var description = '';\n            var useClipboard = false;\n            _.forEach(data, function (val, index) {\n                if (_.contains(_self.onlyFields, index)) {\n                    if (!_.contains(_self.externalTypes, data.type) || _.contains(_self.externalTypes, data.type) && !_.contains(['size', 'mime_type'], index)) {\n                        description += _self.descriptionItemTemplate.replace(/__title__/gi, RV_MEDIA_CONFIG.translations[index]).replace(/__url__/gi, val ? index === 'full_url' ? '<div class=\"input-group\"><input id=\"file_details_url\" type=\"text\" value=\"' + val + '\" class=\"form-control\"><span class=\"input-group-btn\"><button class=\"btn btn-default js-btn-copy-to-clipboard\" type=\"button\" data-clipboard-target=\"#file_details_url\" title=\"Copied\" data-trigger=\"click\"><img class=\"clippy\" src=\"' + __WEBPACK_IMPORTED_MODULE_0__Helpers_Helpers__[\"a\" /* Helpers */].asset('/vendor/media/images/clippy.svg') + '\" width=\"13\" alt=\"Copy to clipboard\"></button></span></div>' : '<span title=\"' + val + '\">' + val + '</span>' : '');\n                        if (index === 'full_url') {\n                            useClipboard = true;\n                        }\n                    }\n                }\n            });\n            _self.$detailsWrapper.find('.rv-media-thumbnail').html(thumb);\n            _self.$detailsWrapper.find('.rv-media-description').html(description);\n            if (useClipboard) {\n                var clipboard = new Clipboard('.js-btn-copy-to-clipboard');\n                $('.js-btn-copy-to-clipboard').tooltip().on('mouseleave', function (event) {\n                    $(this).tooltip('hide');\n                });\n            }\n        }\n    }]);\n\n    return MediaDetails;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vcmVzb3VyY2VzL2Fzc2V0cy9qcy9BcHAvVmlld3MvTWVkaWFEZXRhaWxzLmpzPzY2ZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtIZWxwZXJzfSBmcm9tICcuLi9IZWxwZXJzL0hlbHBlcnMnO1xuXG5leHBvcnQgY2xhc3MgTWVkaWFEZXRhaWxzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy4kZGV0YWlsc1dyYXBwZXIgPSAkKCcucnYtbWVkaWEtbWFpbiAucnYtbWVkaWEtZGV0YWlscycpO1xuXG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb25JdGVtVGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cInJ2LW1lZGlhLW5hbWVcIj48cD5fX3RpdGxlX188L3A+X191cmxfXzwvZGl2Pic7XG5cbiAgICAgICAgdGhpcy5vbmx5RmllbGRzID0gW1xuICAgICAgICAgICAgJ25hbWUnLFxuICAgICAgICAgICAgJ2Z1bGxfdXJsJyxcbiAgICAgICAgICAgICdzaXplJyxcbiAgICAgICAgICAgICdtaW1lX3R5cGUnLFxuICAgICAgICAgICAgJ2NyZWF0ZWRfYXQnLFxuICAgICAgICAgICAgJ3VwZGF0ZWRfYXQnLFxuICAgICAgICAgICAgJ25vdGhpbmdfc2VsZWN0ZWQnLFxuICAgICAgICBdO1xuXG4gICAgICAgIHRoaXMuZXh0ZXJuYWxUeXBlcyA9IFtcbiAgICAgICAgICAgICd5b3V0dWJlJyxcbiAgICAgICAgICAgICd2aW1lbycsXG4gICAgICAgICAgICAnbWV0YWNhZmUnLFxuICAgICAgICAgICAgJ2RhaWx5bW90aW9uJyxcbiAgICAgICAgICAgICd2aW5lJyxcbiAgICAgICAgICAgICdpbnN0YWdyYW0nLFxuICAgICAgICBdO1xuICAgIH1cblxuICAgIHJlbmRlckRhdGEoZGF0YSkge1xuICAgICAgICBsZXQgX3NlbGYgPSB0aGlzO1xuICAgICAgICBsZXQgdGh1bWIgPSBkYXRhLnR5cGUgPT09ICdpbWFnZScgPyAnPGltZyBzcmM9XCInICsgZGF0YS5mdWxsX3VybCArICdcIiBhbHQ9XCInICsgZGF0YS5uYW1lICsgJ1wiPicgOiBkYXRhLm1pbWVfdHlwZSA9PT0gJ3lvdXR1YmUnID8gJzxpbWcgc3JjPVwiJyArIGRhdGEub3B0aW9ucy50aHVtYiArICdcIiBhbHQ9XCInICsgZGF0YS5uYW1lICsgJ1wiPicgOiAnPGkgY2xhc3M9XCInICsgZGF0YS5pY29uICsgJ1wiPjwvaT4nO1xuICAgICAgICBsZXQgZGVzY3JpcHRpb24gPSAnJztcbiAgICAgICAgbGV0IHVzZUNsaXBib2FyZCA9IGZhbHNlO1xuICAgICAgICBfLmZvckVhY2goZGF0YSwgZnVuY3Rpb24gKHZhbCwgaW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChfLmNvbnRhaW5zKF9zZWxmLm9ubHlGaWVsZHMsIGluZGV4KSkge1xuICAgICAgICAgICAgICAgIGlmICgoIV8uY29udGFpbnMoX3NlbGYuZXh0ZXJuYWxUeXBlcywgZGF0YS50eXBlKSkgfHwgKF8uY29udGFpbnMoX3NlbGYuZXh0ZXJuYWxUeXBlcywgZGF0YS50eXBlKSAmJiAhXy5jb250YWlucyhbJ3NpemUnLCAnbWltZV90eXBlJ10sIGluZGV4KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gKz0gX3NlbGYuZGVzY3JpcHRpb25JdGVtVGVtcGxhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9fX3RpdGxlX18vZ2ksIFJWX01FRElBX0NPTkZJRy50cmFuc2xhdGlvbnNbaW5kZXhdKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL19fdXJsX18vZ2ksIHZhbCA/IGluZGV4ID09PSAnZnVsbF91cmwnID8gJzxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cFwiPjxpbnB1dCBpZD1cImZpbGVfZGV0YWlsc191cmxcIiB0eXBlPVwidGV4dFwiIHZhbHVlPVwiJyArIHZhbCArICdcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiPjxzcGFuIGNsYXNzPVwiaW5wdXQtZ3JvdXAtYnRuXCI+PGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBqcy1idG4tY29weS10by1jbGlwYm9hcmRcIiB0eXBlPVwiYnV0dG9uXCIgZGF0YS1jbGlwYm9hcmQtdGFyZ2V0PVwiI2ZpbGVfZGV0YWlsc191cmxcIiB0aXRsZT1cIkNvcGllZFwiIGRhdGEtdHJpZ2dlcj1cImNsaWNrXCI+PGltZyBjbGFzcz1cImNsaXBweVwiIHNyYz1cIicgKyBIZWxwZXJzLmFzc2V0KCcvdmVuZG9yL21lZGlhL2ltYWdlcy9jbGlwcHkuc3ZnJykgKyAnXCIgd2lkdGg9XCIxM1wiIGFsdD1cIkNvcHkgdG8gY2xpcGJvYXJkXCI+PC9idXR0b24+PC9zcGFuPjwvZGl2PicgOiAnPHNwYW4gdGl0bGU9XCInICsgdmFsICsgJ1wiPicgKyB2YWwgKyAnPC9zcGFuPicgOiAnJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gJ2Z1bGxfdXJsJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlQ2xpcGJvYXJkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIF9zZWxmLiRkZXRhaWxzV3JhcHBlci5maW5kKCcucnYtbWVkaWEtdGh1bWJuYWlsJykuaHRtbCh0aHVtYik7XG4gICAgICAgIF9zZWxmLiRkZXRhaWxzV3JhcHBlci5maW5kKCcucnYtbWVkaWEtZGVzY3JpcHRpb24nKS5odG1sKGRlc2NyaXB0aW9uKTtcbiAgICAgICAgaWYgKHVzZUNsaXBib2FyZCkge1xuICAgICAgICAgICAgbGV0IGNsaXBib2FyZCA9IG5ldyBDbGlwYm9hcmQoJy5qcy1idG4tY29weS10by1jbGlwYm9hcmQnKTtcbiAgICAgICAgICAgICQoJy5qcy1idG4tY29weS10by1jbGlwYm9hcmQnKS50b29sdGlwKCkub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnRvb2x0aXAoJ2hpZGUnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHJlc291cmNlcy9hc3NldHMvanMvQXBwL1ZpZXdzL01lZGlhRGV0YWlscy5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBU0E7QUFRQTtBQUNBO0FBekJBO0FBQUE7QUFBQTtBQTJCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbkRBO0FBQ0E7QUFEQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///10\n");

/***/ }),
/* 11 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return FolderService; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Views_MediaList__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Config_MediaConfig__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__MediaService__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Services_MessageService__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__Helpers_Helpers__ = __webpack_require__(0);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\n\nvar FolderService = function () {\n    function FolderService() {\n        _classCallCheck(this, FolderService);\n\n        this.MediaList = new __WEBPACK_IMPORTED_MODULE_0__Views_MediaList__[\"a\" /* MediaList */]();\n        this.MediaService = new __WEBPACK_IMPORTED_MODULE_2__MediaService__[\"a\" /* MediaService */]();\n\n        $('body').on('shown.bs.modal', '#modal_add_folder', function () {\n            $(this).find('.form-add-folder input[type=text]').focus();\n        });\n    }\n\n    _createClass(FolderService, [{\n        key: 'create',\n        value: function create(folderName) {\n            var _self = this;\n            $.ajax({\n                url: RV_MEDIA_URL.create_folder,\n                type: 'POST',\n                data: {\n                    parent_id: __WEBPACK_IMPORTED_MODULE_4__Helpers_Helpers__[\"a\" /* Helpers */].getRequestParams().folder_id,\n                    name: folderName\n                },\n                dataType: 'json',\n                beforeSend: function beforeSend() {\n                    __WEBPACK_IMPORTED_MODULE_4__Helpers_Helpers__[\"a\" /* Helpers */].showAjaxLoading();\n                },\n                success: function success(res) {\n                    if (res.error) {\n                        __WEBPACK_IMPORTED_MODULE_3__Services_MessageService__[\"a\" /* MessageService */].showMessage('error', res.message, RV_MEDIA_CONFIG.translations.message.error_header);\n                    } else {\n                        __WEBPACK_IMPORTED_MODULE_3__Services_MessageService__[\"a\" /* MessageService */].showMessage('success', res.message, RV_MEDIA_CONFIG.translations.message.success_header);\n                        __WEBPACK_IMPORTED_MODULE_4__Helpers_Helpers__[\"a\" /* Helpers */].resetPagination();\n                        _self.MediaService.getMedia(true);\n                        FolderService.closeModal();\n                    }\n                },\n                complete: function complete(data) {\n                    __WEBPACK_IMPORTED_MODULE_4__Helpers_Helpers__[\"a\" /* Helpers */].hideAjaxLoading();\n                },\n                error: function error(data) {\n                    __WEBPACK_IMPORTED_MODULE_3__Services_MessageService__[\"a\" /* MessageService */].handleError(data);\n                }\n            });\n        }\n    }, {\n        key: 'changeFolder',\n        value: function changeFolder(folderId) {\n            __WEBPACK_IMPORTED_MODULE_1__Config_MediaConfig__[\"a\" /* MediaConfig */].request_params.folder_id = folderId;\n            __WEBPACK_IMPORTED_MODULE_4__Helpers_Helpers__[\"a\" /* Helpers */].storeConfig();\n            this.MediaService.getMedia(true);\n        }\n    }], [{\n        key: 'closeModal',\n        value: function closeModal() {\n            $('#modal_add_folder').modal('hide');\n        }\n    }]);\n\n    return FolderService;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vcmVzb3VyY2VzL2Fzc2V0cy9qcy9BcHAvU2VydmljZXMvRm9sZGVyU2VydmljZS5qcz9kZjEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7TWVkaWFMaXN0fSBmcm9tICcuLi9WaWV3cy9NZWRpYUxpc3QnO1xuaW1wb3J0IHtNZWRpYUNvbmZpZ30gZnJvbSAnLi4vQ29uZmlnL01lZGlhQ29uZmlnJztcbmltcG9ydCB7TWVkaWFTZXJ2aWNlfSBmcm9tICcuL01lZGlhU2VydmljZSc7XG5pbXBvcnQge01lc3NhZ2VTZXJ2aWNlfSBmcm9tICcuLi9TZXJ2aWNlcy9NZXNzYWdlU2VydmljZSc7XG5pbXBvcnQge0hlbHBlcnN9IGZyb20gJy4uL0hlbHBlcnMvSGVscGVycyc7XG5cbmV4cG9ydCBjbGFzcyBGb2xkZXJTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5NZWRpYUxpc3QgPSBuZXcgTWVkaWFMaXN0KCk7XG4gICAgICAgIHRoaXMuTWVkaWFTZXJ2aWNlID0gbmV3IE1lZGlhU2VydmljZSgpO1xuXG4gICAgICAgICQoJ2JvZHknKS5vbignc2hvd24uYnMubW9kYWwnLCAnI21vZGFsX2FkZF9mb2xkZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoJy5mb3JtLWFkZC1mb2xkZXIgaW5wdXRbdHlwZT10ZXh0XScpLmZvY3VzKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNyZWF0ZShmb2xkZXJOYW1lKSB7XG4gICAgICAgIGxldCBfc2VsZiA9IHRoaXM7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6IFJWX01FRElBX1VSTC5jcmVhdGVfZm9sZGVyLFxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIHBhcmVudF9pZDogSGVscGVycy5nZXRSZXF1ZXN0UGFyYW1zKCkuZm9sZGVyX2lkLFxuICAgICAgICAgICAgICAgIG5hbWU6IGZvbGRlck5hbWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgYmVmb3JlU2VuZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIEhlbHBlcnMuc2hvd0FqYXhMb2FkaW5nKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICAgIGlmIChyZXMuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2Uuc2hvd01lc3NhZ2UoJ2Vycm9yJywgcmVzLm1lc3NhZ2UsIFJWX01FRElBX0NPTkZJRy50cmFuc2xhdGlvbnMubWVzc2FnZS5lcnJvcl9oZWFkZXIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNob3dNZXNzYWdlKCdzdWNjZXNzJywgcmVzLm1lc3NhZ2UsIFJWX01FRElBX0NPTkZJRy50cmFuc2xhdGlvbnMubWVzc2FnZS5zdWNjZXNzX2hlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgIEhlbHBlcnMucmVzZXRQYWdpbmF0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIF9zZWxmLk1lZGlhU2VydmljZS5nZXRNZWRpYSh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgRm9sZGVyU2VydmljZS5jbG9zZU1vZGFsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIEhlbHBlcnMuaGlkZUFqYXhMb2FkaW5nKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgTWVzc2FnZVNlcnZpY2UuaGFuZGxlRXJyb3IoZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGNoYW5nZUZvbGRlcihmb2xkZXJJZCkge1xuICAgICAgICBNZWRpYUNvbmZpZy5yZXF1ZXN0X3BhcmFtcy5mb2xkZXJfaWQgPSBmb2xkZXJJZDtcbiAgICAgICAgSGVscGVycy5zdG9yZUNvbmZpZygpO1xuICAgICAgICB0aGlzLk1lZGlhU2VydmljZS5nZXRNZWRpYSh0cnVlKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgY2xvc2VNb2RhbCgpIHtcbiAgICAgICAgJCgnI21vZGFsX2FkZF9mb2xkZXInKS5tb2RhbCgnaGlkZScpO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyByZXNvdXJjZXMvYXNzZXRzL2pzL0FwcC9TZXJ2aWNlcy9Gb2xkZXJTZXJ2aWNlLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFBQTtBQUFBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUExQkE7QUE0QkE7QUF4Q0E7QUFBQTtBQUFBO0FBMkNBO0FBQ0E7QUFDQTtBQUNBO0FBOUNBO0FBQUE7QUFBQTtBQWlEQTtBQUNBO0FBbERBO0FBQ0E7QUFEQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///11\n");

/***/ }),
/* 12 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return UploadService; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Services_MediaService__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__ = __webpack_require__(0);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\nvar UploadService = function () {\n    function UploadService() {\n        _classCallCheck(this, UploadService);\n\n        this.$body = $('body');\n\n        this.dropZone = null;\n\n        this.uploadUrl = RV_MEDIA_URL.upload_file;\n\n        this.uploadProgressBox = $('.rv-upload-progress');\n\n        this.uploadProgressContainer = $('.rv-upload-progress .rv-upload-progress-table');\n\n        this.uploadProgressTemplate = $('#rv_media_upload_progress_item').html();\n\n        this.totalQueued = 1;\n\n        this.MediaService = new __WEBPACK_IMPORTED_MODULE_0__Services_MediaService__[\"a\" /* MediaService */]();\n\n        this.totalError = 0;\n    }\n\n    _createClass(UploadService, [{\n        key: 'init',\n        value: function init() {\n            if (_.contains(RV_MEDIA_CONFIG.permissions, 'files.create') && $('.rv-media-items').length > 0) {\n                this.setupDropZone();\n            }\n            this.handleEvents();\n        }\n    }, {\n        key: 'setupDropZone',\n        value: function setupDropZone() {\n            var _self = this;\n\n            _self.dropZone = new Dropzone(document.querySelector('.rv-media-items'), {\n                url: _self.uploadUrl,\n                thumbnailWidth: false,\n                thumbnailHeight: false,\n                parallelUploads: 1,\n                autoQueue: true,\n                clickable: '.js-dropzone-upload',\n                previewTemplate: false,\n                previewsContainer: false,\n                uploadMultiple: true,\n                sending: function sending(file, xhr, formData) {\n                    formData.append('_token', $('meta[name=\"csrf-token\"]').attr('content'));\n                    formData.append('folder_id', __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getRequestParams().folder_id);\n                    formData.append('view_in', __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].getRequestParams().view_in);\n                }\n            });\n\n            _self.dropZone.on('addedfile', function (file) {\n                file.index = _self.totalQueued;\n                _self.totalQueued++;\n            });\n\n            _self.dropZone.on('sending', function (file) {\n                _self.initProgress(file.name, file.size);\n            });\n\n            _self.dropZone.on('success', function (file) {});\n\n            _self.dropZone.on('complete', function (file) {\n                _self.changeProgressStatus(file);\n            });\n\n            _self.dropZone.on('queuecomplete', function () {\n                __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].resetPagination();\n                _self.MediaService.getMedia(true);\n                if (_self.totalError === 0) {\n                    setTimeout(function () {\n                        $('.rv-upload-progress .close-pane').trigger('click');\n                    }, 5000);\n                }\n            });\n        }\n    }, {\n        key: 'handleEvents',\n        value: function handleEvents() {\n            var _self = this;\n            /**\n             * Close upload progress pane\n             */\n            _self.$body.on('click', '.rv-upload-progress .close-pane', function (event) {\n                event.preventDefault();\n                $('.rv-upload-progress').addClass('hide-the-pane');\n                _self.totalError = 0;\n                setTimeout(function () {\n                    $('.rv-upload-progress li').remove();\n                    _self.totalQueued = 1;\n                }, 300);\n            });\n        }\n    }, {\n        key: 'initProgress',\n        value: function initProgress($fileName, $fileSize) {\n            var template = this.uploadProgressTemplate.replace(/__fileName__/gi, $fileName).replace(/__fileSize__/gi, UploadService.formatFileSize($fileSize)).replace(/__status__/gi, 'warning').replace(/__message__/gi, 'Uploading');\n            this.uploadProgressContainer.append(template);\n            this.uploadProgressBox.removeClass('hide-the-pane');\n            this.uploadProgressBox.find('.panel-body').animate({ scrollTop: this.uploadProgressContainer.height() }, 150);\n        }\n    }, {\n        key: 'changeProgressStatus',\n        value: function changeProgressStatus(file) {\n            var _self = this;\n            var $progressLine = _self.uploadProgressContainer.find('li:nth-child(' + file.index + ')');\n            var $label = $progressLine.find('.label');\n            $label.removeClass('label-success label-danger label-warning');\n\n            var response = __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].jsonDecode(file.xhr.responseText || '', {});\n\n            _self.totalError = _self.totalError + (response.error === true || file.status === 'error' ? 1 : 0);\n\n            $label.addClass(response.error === true || file.status === 'error' ? 'label-danger' : 'label-success');\n            $label.html(response.error === true || file.status === 'error' ? 'Error' : 'Uploaded');\n            if (file.status === 'error') {\n                if (file.xhr.status === 422) {\n                    var error_html = '';\n                    $.each(response, function (key, item) {\n                        error_html += '<span class=\"text-danger\">' + item + '</span><br>';\n                    });\n                    $progressLine.find('.file-error').html(error_html);\n                } else if (file.xhr.status === 500) {\n                    $progressLine.find('.file-error').html('<span class=\"text-danger\">' + file.xhr.statusText + '</span>');\n                }\n            } else if (response.error) {\n                $progressLine.find('.file-error').html('<span class=\"text-danger\">' + response.message + '</span>');\n            } else {\n                __WEBPACK_IMPORTED_MODULE_1__Helpers_Helpers__[\"a\" /* Helpers */].addToRecent(response.data.id);\n            }\n        }\n    }], [{\n        key: 'formatFileSize',\n        value: function formatFileSize(bytes) {\n            var si = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n            var thresh = si ? 1000 : 1024;\n            if (Math.abs(bytes) < thresh) {\n                return bytes + ' B';\n            }\n            var units = ['KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n            var u = -1;\n            do {\n                bytes /= thresh;\n                ++u;\n            } while (Math.abs(bytes) >= thresh && u < units.length - 1);\n            return bytes.toFixed(1) + ' ' + units[u];\n        }\n    }]);\n\n    return UploadService;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vcmVzb3VyY2VzL2Fzc2V0cy9qcy9BcHAvU2VydmljZXMvVXBsb2FkU2VydmljZS5qcz9kNmU0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7TWVkaWFTZXJ2aWNlfSBmcm9tICcuLi9TZXJ2aWNlcy9NZWRpYVNlcnZpY2UnO1xuaW1wb3J0IHtIZWxwZXJzfSBmcm9tICcuLi9IZWxwZXJzL0hlbHBlcnMnO1xuXG5leHBvcnQgY2xhc3MgVXBsb2FkU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuJGJvZHkgPSAkKCdib2R5Jyk7XG5cbiAgICAgICAgdGhpcy5kcm9wWm9uZSA9IG51bGw7XG5cbiAgICAgICAgdGhpcy51cGxvYWRVcmwgPSBSVl9NRURJQV9VUkwudXBsb2FkX2ZpbGU7XG5cbiAgICAgICAgdGhpcy51cGxvYWRQcm9ncmVzc0JveCA9ICQoJy5ydi11cGxvYWQtcHJvZ3Jlc3MnKTtcblxuICAgICAgICB0aGlzLnVwbG9hZFByb2dyZXNzQ29udGFpbmVyID0gJCgnLnJ2LXVwbG9hZC1wcm9ncmVzcyAucnYtdXBsb2FkLXByb2dyZXNzLXRhYmxlJyk7XG5cbiAgICAgICAgdGhpcy51cGxvYWRQcm9ncmVzc1RlbXBsYXRlID0gJCgnI3J2X21lZGlhX3VwbG9hZF9wcm9ncmVzc19pdGVtJykuaHRtbCgpO1xuXG4gICAgICAgIHRoaXMudG90YWxRdWV1ZWQgPSAxO1xuXG4gICAgICAgIHRoaXMuTWVkaWFTZXJ2aWNlID0gbmV3IE1lZGlhU2VydmljZSgpO1xuXG4gICAgICAgIHRoaXMudG90YWxFcnJvciA9IDA7XG4gICAgfVxuXG4gICAgaW5pdCgpIHtcbiAgICAgICAgaWYgKF8uY29udGFpbnMoUlZfTUVESUFfQ09ORklHLnBlcm1pc3Npb25zLCAnZmlsZXMuY3JlYXRlJykgJiYgJCgnLnJ2LW1lZGlhLWl0ZW1zJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5zZXR1cERyb3Bab25lKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVFdmVudHMoKTtcbiAgICB9XG5cbiAgICBzZXR1cERyb3Bab25lKCkge1xuICAgICAgICBsZXQgX3NlbGYgPSB0aGlzO1xuXG4gICAgICAgIF9zZWxmLmRyb3Bab25lID0gbmV3IERyb3B6b25lKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ydi1tZWRpYS1pdGVtcycpLCB7XG4gICAgICAgICAgICB1cmw6IF9zZWxmLnVwbG9hZFVybCxcbiAgICAgICAgICAgIHRodW1ibmFpbFdpZHRoOiBmYWxzZSxcbiAgICAgICAgICAgIHRodW1ibmFpbEhlaWdodDogZmFsc2UsXG4gICAgICAgICAgICBwYXJhbGxlbFVwbG9hZHM6IDEsXG4gICAgICAgICAgICBhdXRvUXVldWU6IHRydWUsXG4gICAgICAgICAgICBjbGlja2FibGU6ICcuanMtZHJvcHpvbmUtdXBsb2FkJyxcbiAgICAgICAgICAgIHByZXZpZXdUZW1wbGF0ZTogZmFsc2UsXG4gICAgICAgICAgICBwcmV2aWV3c0NvbnRhaW5lcjogZmFsc2UsXG4gICAgICAgICAgICB1cGxvYWRNdWx0aXBsZTogdHJ1ZSxcbiAgICAgICAgICAgIHNlbmRpbmc6IGZ1bmN0aW9uIChmaWxlLCB4aHIsIGZvcm1EYXRhKSB7XG4gICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdfdG9rZW4nLCAkKCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJykuYXR0cignY29udGVudCcpKTtcbiAgICAgICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZvbGRlcl9pZCcsIEhlbHBlcnMuZ2V0UmVxdWVzdFBhcmFtcygpLmZvbGRlcl9pZCk7XG4gICAgICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCd2aWV3X2luJywgSGVscGVycy5nZXRSZXF1ZXN0UGFyYW1zKCkudmlld19pbik7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBfc2VsZi5kcm9wWm9uZS5vbignYWRkZWRmaWxlJywgZmlsZSA9PiB7XG4gICAgICAgICAgICBmaWxlLmluZGV4ID0gX3NlbGYudG90YWxRdWV1ZWQ7XG4gICAgICAgICAgICBfc2VsZi50b3RhbFF1ZXVlZCsrO1xuICAgICAgICB9KTtcblxuICAgICAgICBfc2VsZi5kcm9wWm9uZS5vbignc2VuZGluZycsIGZpbGUgPT4ge1xuICAgICAgICAgICAgX3NlbGYuaW5pdFByb2dyZXNzKGZpbGUubmFtZSwgZmlsZS5zaXplKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgX3NlbGYuZHJvcFpvbmUub24oJ3N1Y2Nlc3MnLCBmaWxlID0+IHtcblxuICAgICAgICB9KTtcblxuICAgICAgICBfc2VsZi5kcm9wWm9uZS5vbignY29tcGxldGUnLCBmaWxlID0+IHtcbiAgICAgICAgICAgIF9zZWxmLmNoYW5nZVByb2dyZXNzU3RhdHVzKGZpbGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBfc2VsZi5kcm9wWm9uZS5vbigncXVldWVjb21wbGV0ZScsICgpID0+IHtcbiAgICAgICAgICAgIEhlbHBlcnMucmVzZXRQYWdpbmF0aW9uKCk7XG4gICAgICAgICAgICBfc2VsZi5NZWRpYVNlcnZpY2UuZ2V0TWVkaWEodHJ1ZSk7XG4gICAgICAgICAgICBpZiAoX3NlbGYudG90YWxFcnJvciA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKCcucnYtdXBsb2FkLXByb2dyZXNzIC5jbG9zZS1wYW5lJykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgICAgICAgICB9LCA1MDAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaGFuZGxlRXZlbnRzKCkge1xuICAgICAgICBsZXQgX3NlbGYgPSB0aGlzO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2xvc2UgdXBsb2FkIHByb2dyZXNzIHBhbmVcbiAgICAgICAgICovXG4gICAgICAgIF9zZWxmLiRib2R5Lm9uKCdjbGljaycsICcucnYtdXBsb2FkLXByb2dyZXNzIC5jbG9zZS1wYW5lJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgJCgnLnJ2LXVwbG9hZC1wcm9ncmVzcycpLmFkZENsYXNzKCdoaWRlLXRoZS1wYW5lJyk7XG4gICAgICAgICAgICBfc2VsZi50b3RhbEVycm9yID0gMDtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICQoJy5ydi11cGxvYWQtcHJvZ3Jlc3MgbGknKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBfc2VsZi50b3RhbFF1ZXVlZCA9IDE7XG4gICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBpbml0UHJvZ3Jlc3MoJGZpbGVOYW1lLCAkZmlsZVNpemUpIHtcbiAgICAgICAgbGV0IHRlbXBsYXRlID0gdGhpcy51cGxvYWRQcm9ncmVzc1RlbXBsYXRlXG4gICAgICAgICAgICAgICAgLnJlcGxhY2UoL19fZmlsZU5hbWVfXy9naSwgJGZpbGVOYW1lKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9fX2ZpbGVTaXplX18vZ2ksIFVwbG9hZFNlcnZpY2UuZm9ybWF0RmlsZVNpemUoJGZpbGVTaXplKSlcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvX19zdGF0dXNfXy9naSwgJ3dhcm5pbmcnKVxuICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9fX21lc3NhZ2VfXy9naSwgJ1VwbG9hZGluZycpXG4gICAgICAgICAgICA7XG4gICAgICAgIHRoaXMudXBsb2FkUHJvZ3Jlc3NDb250YWluZXIuYXBwZW5kKHRlbXBsYXRlKTtcbiAgICAgICAgdGhpcy51cGxvYWRQcm9ncmVzc0JveC5yZW1vdmVDbGFzcygnaGlkZS10aGUtcGFuZScpO1xuICAgICAgICB0aGlzLnVwbG9hZFByb2dyZXNzQm94LmZpbmQoJy5wYW5lbC1ib2R5JylcbiAgICAgICAgICAgIC5hbmltYXRlKHtzY3JvbGxUb3A6IHRoaXMudXBsb2FkUHJvZ3Jlc3NDb250YWluZXIuaGVpZ2h0KCl9LCAxNTApO1xuICAgIH1cblxuICAgIGNoYW5nZVByb2dyZXNzU3RhdHVzKGZpbGUpIHtcbiAgICAgICAgbGV0IF9zZWxmID0gdGhpcztcbiAgICAgICAgbGV0ICRwcm9ncmVzc0xpbmUgPSBfc2VsZi51cGxvYWRQcm9ncmVzc0NvbnRhaW5lci5maW5kKCdsaTpudGgtY2hpbGQoJyArIChmaWxlLmluZGV4KSArICcpJyk7XG4gICAgICAgIGxldCAkbGFiZWwgPSAkcHJvZ3Jlc3NMaW5lLmZpbmQoJy5sYWJlbCcpO1xuICAgICAgICAkbGFiZWwucmVtb3ZlQ2xhc3MoJ2xhYmVsLXN1Y2Nlc3MgbGFiZWwtZGFuZ2VyIGxhYmVsLXdhcm5pbmcnKTtcblxuICAgICAgICBsZXQgcmVzcG9uc2UgPSBIZWxwZXJzLmpzb25EZWNvZGUoZmlsZS54aHIucmVzcG9uc2VUZXh0IHx8ICcnLCB7fSk7XG5cbiAgICAgICAgX3NlbGYudG90YWxFcnJvciA9IF9zZWxmLnRvdGFsRXJyb3IgKyAocmVzcG9uc2UuZXJyb3IgPT09IHRydWUgfHwgZmlsZS5zdGF0dXMgPT09ICdlcnJvcicgPyAxIDogMCk7XG5cbiAgICAgICAgJGxhYmVsLmFkZENsYXNzKHJlc3BvbnNlLmVycm9yID09PSB0cnVlIHx8IGZpbGUuc3RhdHVzID09PSAnZXJyb3InID8gJ2xhYmVsLWRhbmdlcicgOiAnbGFiZWwtc3VjY2VzcycpO1xuICAgICAgICAkbGFiZWwuaHRtbChyZXNwb25zZS5lcnJvciA9PT0gdHJ1ZSB8fCBmaWxlLnN0YXR1cyA9PT0gJ2Vycm9yJyA/ICdFcnJvcicgOiAnVXBsb2FkZWQnKTtcbiAgICAgICAgaWYgKGZpbGUuc3RhdHVzID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICBpZiAoZmlsZS54aHIuc3RhdHVzID09PSA0MjIpIHtcbiAgICAgICAgICAgICAgICBsZXQgZXJyb3JfaHRtbCA9ICcnO1xuICAgICAgICAgICAgICAgICQuZWFjaChyZXNwb25zZSwgZnVuY3Rpb24gKGtleSwgaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvcl9odG1sICs9ICc8c3BhbiBjbGFzcz1cInRleHQtZGFuZ2VyXCI+JyArIGl0ZW0gKyAnPC9zcGFuPjxicj4nO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICRwcm9ncmVzc0xpbmUuZmluZCgnLmZpbGUtZXJyb3InKS5odG1sKGVycm9yX2h0bWwpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChmaWxlLnhoci5zdGF0dXMgPT09IDUwMCkge1xuICAgICAgICAgICAgICAgICRwcm9ncmVzc0xpbmUuZmluZCgnLmZpbGUtZXJyb3InKS5odG1sKCc8c3BhbiBjbGFzcz1cInRleHQtZGFuZ2VyXCI+JyArIGZpbGUueGhyLnN0YXR1c1RleHQgKyAnPC9zcGFuPicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgICAgICAkcHJvZ3Jlc3NMaW5lLmZpbmQoJy5maWxlLWVycm9yJykuaHRtbCgnPHNwYW4gY2xhc3M9XCJ0ZXh0LWRhbmdlclwiPicgKyByZXNwb25zZS5tZXNzYWdlICsgJzwvc3Bhbj4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIEhlbHBlcnMuYWRkVG9SZWNlbnQocmVzcG9uc2UuZGF0YS5pZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgZm9ybWF0RmlsZVNpemUoYnl0ZXMsIHNpID0gZmFsc2UpIHtcbiAgICAgICAgbGV0IHRocmVzaCA9IHNpID8gMTAwMCA6IDEwMjQ7XG4gICAgICAgIGlmIChNYXRoLmFicyhieXRlcykgPCB0aHJlc2gpIHtcbiAgICAgICAgICAgIHJldHVybiBieXRlcyArICcgQic7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHVuaXRzID0gWydLQicsICdNQicsICdHQicsICdUQicsICdQQicsICdFQicsICdaQicsICdZQiddO1xuICAgICAgICBsZXQgdSA9IC0xO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICBieXRlcyAvPSB0aHJlc2g7XG4gICAgICAgICAgICArK3U7XG4gICAgICAgIH0gd2hpbGUgKE1hdGguYWJzKGJ5dGVzKSA+PSB0aHJlc2ggJiYgdSA8IHVuaXRzLmxlbmd0aCAtIDEpO1xuICAgICAgICByZXR1cm4gYnl0ZXMudG9GaXhlZCgxKSArICcgJyArIHVuaXRzW3VdO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyByZXNvdXJjZXMvYXNzZXRzL2pzL0FwcC9TZXJ2aWNlcy9VcGxvYWRTZXJ2aWNlLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXBCQTtBQUFBO0FBQUE7QUFzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTFCQTtBQUFBO0FBQUE7QUE2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWRBO0FBQ0E7QUFnQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUExRUE7QUFBQTtBQUFBO0FBNkVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMUZBO0FBQUE7QUFBQTtBQTZGQTtBQU1BO0FBQ0E7QUFDQTtBQUVBO0FBdkdBO0FBQUE7QUFBQTtBQTBHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFwSUE7QUFBQTtBQUFBO0FBc0lBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFsSkE7QUFDQTtBQURBO0FBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///12\n");

/***/ }),
/* 13 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ExternalServices; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Youtube__ = __webpack_require__(14);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar ExternalServices = function ExternalServices() {\n    _classCallCheck(this, ExternalServices);\n\n    new __WEBPACK_IMPORTED_MODULE_0__Youtube__[\"a\" /* Youtube */]();\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vcmVzb3VyY2VzL2Fzc2V0cy9qcy9BcHAvRXh0ZXJuYWxzL0V4dGVybmFsU2VydmljZXMuanM/OTY2YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1lvdXR1YmV9IGZyb20gJy4vWW91dHViZSc7XG5cbmV4cG9ydCBjbGFzcyBFeHRlcm5hbFNlcnZpY2VzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgbmV3IFlvdXR1YmUoKTtcbiAgICB9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHJlc291cmNlcy9hc3NldHMvanMvQXBwL0V4dGVybmFscy9FeHRlcm5hbFNlcnZpY2VzLmpzIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///13\n");

/***/ }),
/* 14 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Youtube; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Helpers_Helpers__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Config_ExternalServiceConfig__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Services_MediaService__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Services_MessageService__ = __webpack_require__(2);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\nvar Youtube = function () {\n    function Youtube() {\n        _classCallCheck(this, Youtube);\n\n        this.MediaService = new __WEBPACK_IMPORTED_MODULE_2__Services_MediaService__[\"a\" /* MediaService */]();\n\n        this.$body = $('body');\n\n        this.$modal = $('#modal_add_from_youtube');\n\n        var _self = this;\n\n        this.setMessage(RV_MEDIA_CONFIG.translations.add_from.youtube.original_msg);\n\n        this.$modal.on('hidden.bs.modal', function () {\n            _self.setMessage(RV_MEDIA_CONFIG.translations.add_from.youtube.original_msg);\n        });\n\n        this.$body.on('click', '#modal_add_from_youtube .rv-btn-add-youtube-url', function (event) {\n            event.preventDefault();\n\n            _self.checkYouTubeVideo($(this).closest('#modal_add_from_youtube').find('.rv-youtube-url'));\n        });\n    }\n\n    _createClass(Youtube, [{\n        key: 'setMessage',\n        value: function setMessage(msg) {\n            this.$modal.find('.modal-notice').html(msg);\n        }\n    }, {\n        key: 'checkYouTubeVideo',\n        value: function checkYouTubeVideo($input) {\n            var _self = this;\n            if (!Youtube.validateYouTubeLink($input.val()) || !__WEBPACK_IMPORTED_MODULE_1__Config_ExternalServiceConfig__[\"a\" /* ExternalServiceConfig */].youtube.api_key) {\n                if (__WEBPACK_IMPORTED_MODULE_1__Config_ExternalServiceConfig__[\"a\" /* ExternalServiceConfig */].youtube.api_key) {\n                    _self.setMessage(RV_MEDIA_CONFIG.translations.add_from.youtube.invalid_url_msg);\n                } else {\n                    _self.setMessage(RV_MEDIA_CONFIG.translations.add_from.youtube.no_api_key_msg);\n                }\n            } else {\n                var youtubeId = Youtube.getYouTubeId($input.val());\n                var requestUrl = 'https://www.googleapis.com/youtube/v3/videos?id=' + youtubeId;\n                var isPlaylist = _self.$modal.find('.custom-checkbox input[type=\"checkbox\"]').is(':checked');\n\n                if (isPlaylist) {\n                    youtubeId = Youtube.getYoutubePlaylistId($input.val());\n                    requestUrl = 'https://www.googleapis.com/youtube/v3/playlistItems?playlistId=' + youtubeId;\n                }\n\n                $.ajax({\n                    url: requestUrl + '&key=' + __WEBPACK_IMPORTED_MODULE_1__Config_ExternalServiceConfig__[\"a\" /* ExternalServiceConfig */].youtube.api_key + '&part=snippet',\n                    type: \"GET\",\n                    success: function success(data) {\n                        if (isPlaylist) {\n                            playlistVideoCallback(data, $input.val());\n                        } else {\n                            singleVideoCallback(data, $input.val());\n                        }\n                    },\n                    error: function error(data) {\n                        _self.setMessage(RV_MEDIA_CONFIG.translations.add_from.youtube.error_msg);\n                    }\n                });\n            }\n\n            function singleVideoCallback(data, url) {\n                $.ajax({\n                    url: RV_MEDIA_URL.add_external_service,\n                    type: \"POST\",\n                    dataType: 'json',\n                    data: {\n                        type: 'youtube',\n                        name: data.items[0].snippet.title,\n                        folder_id: __WEBPACK_IMPORTED_MODULE_0__Helpers_Helpers__[\"a\" /* Helpers */].getRequestParams().folder_id,\n                        url: url,\n                        options: {\n                            thumb: 'https://img.youtube.com/vi/' + data.items[0].id + '/maxresdefault.jpg'\n                        }\n                    },\n                    success: function success(res) {\n                        if (res.error) {\n                            __WEBPACK_IMPORTED_MODULE_3__Services_MessageService__[\"a\" /* MessageService */].showMessage('error', res.message, RV_MEDIA_CONFIG.translations.message.error_header);\n                        } else {\n                            __WEBPACK_IMPORTED_MODULE_3__Services_MessageService__[\"a\" /* MessageService */].showMessage('success', res.message, RV_MEDIA_CONFIG.translations.message.success_header);\n                            _self.MediaService.getMedia(true);\n                        }\n                    },\n                    error: function error(data) {\n                        __WEBPACK_IMPORTED_MODULE_3__Services_MessageService__[\"a\" /* MessageService */].handleError(data);\n                    }\n                });\n                _self.$modal.modal('hide');\n            }\n\n            function playlistVideoCallback(data, url) {\n                _self.$modal.modal('hide');\n            }\n        }\n    }], [{\n        key: 'validateYouTubeLink',\n        value: function validateYouTubeLink(url) {\n            var p = /^(?:https?:\\/\\/)?(?:www\\.)?youtube\\.com\\/watch\\?(?=.*v=((\\w|-){11}))(?:\\S+)?$/;\n            return url.match(p) ? RegExp.$1 : false;\n        }\n    }, {\n        key: 'getYouTubeId',\n        value: function getYouTubeId(url) {\n            var regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|\\&v=)([^#\\&\\?]*).*/;\n            var match = url.match(regExp);\n            if (match && match[2].length === 11) {\n                return match[2];\n            }\n            return null;\n        }\n    }, {\n        key: 'getYoutubePlaylistId',\n        value: function getYoutubePlaylistId(url) {\n            var regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?list=|\\&list=)([^#\\&\\?]*).*/;\n            var match = url.match(regExp);\n            if (match) {\n                return match[2];\n            }\n            return null;\n        }\n    }]);\n\n    return Youtube;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vcmVzb3VyY2VzL2Fzc2V0cy9qcy9BcHAvRXh0ZXJuYWxzL1lvdXR1YmUuanM/ZjJiMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0hlbHBlcnN9IGZyb20gJy4uL0hlbHBlcnMvSGVscGVycyc7XG5pbXBvcnQge0V4dGVybmFsU2VydmljZUNvbmZpZ30gZnJvbSAnLi4vQ29uZmlnL0V4dGVybmFsU2VydmljZUNvbmZpZyc7XG5pbXBvcnQge01lZGlhU2VydmljZX0gZnJvbSAnLi4vU2VydmljZXMvTWVkaWFTZXJ2aWNlJztcbmltcG9ydCB7TWVzc2FnZVNlcnZpY2V9IGZyb20gJy4uL1NlcnZpY2VzL01lc3NhZ2VTZXJ2aWNlJztcblxuZXhwb3J0IGNsYXNzIFlvdXR1YmUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLk1lZGlhU2VydmljZSA9IG5ldyBNZWRpYVNlcnZpY2UoKTtcblxuICAgICAgICB0aGlzLiRib2R5ID0gJCgnYm9keScpO1xuXG4gICAgICAgIHRoaXMuJG1vZGFsID0gJCgnI21vZGFsX2FkZF9mcm9tX3lvdXR1YmUnKTtcblxuICAgICAgICBsZXQgX3NlbGYgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuc2V0TWVzc2FnZShSVl9NRURJQV9DT05GSUcudHJhbnNsYXRpb25zLmFkZF9mcm9tLnlvdXR1YmUub3JpZ2luYWxfbXNnKTtcblxuICAgICAgICB0aGlzLiRtb2RhbC5vbignaGlkZGVuLmJzLm1vZGFsJywgKCkgPT4ge1xuICAgICAgICAgICAgX3NlbGYuc2V0TWVzc2FnZShSVl9NRURJQV9DT05GSUcudHJhbnNsYXRpb25zLmFkZF9mcm9tLnlvdXR1YmUub3JpZ2luYWxfbXNnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy4kYm9keS5vbignY2xpY2snLCAnI21vZGFsX2FkZF9mcm9tX3lvdXR1YmUgLnJ2LWJ0bi1hZGQteW91dHViZS11cmwnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIF9zZWxmLmNoZWNrWW91VHViZVZpZGVvKCQodGhpcykuY2xvc2VzdCgnI21vZGFsX2FkZF9mcm9tX3lvdXR1YmUnKS5maW5kKCcucnYteW91dHViZS11cmwnKSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyB2YWxpZGF0ZVlvdVR1YmVMaW5rKHVybCkge1xuICAgICAgICBsZXQgcCA9IC9eKD86aHR0cHM/OlxcL1xcLyk/KD86d3d3XFwuKT95b3V0dWJlXFwuY29tXFwvd2F0Y2hcXD8oPz0uKnY9KChcXHd8LSl7MTF9KSkoPzpcXFMrKT8kLztcbiAgICAgICAgcmV0dXJuICh1cmwubWF0Y2gocCkpID8gUmVnRXhwLiQxIDogZmFsc2U7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldFlvdVR1YmVJZCh1cmwpIHtcbiAgICAgICAgbGV0IHJlZ0V4cCA9IC9eLiooeW91dHUuYmVcXC98dlxcL3x1XFwvXFx3XFwvfGVtYmVkXFwvfHdhdGNoXFw/dj18XFwmdj0pKFteI1xcJlxcP10qKS4qLztcbiAgICAgICAgbGV0IG1hdGNoID0gdXJsLm1hdGNoKHJlZ0V4cCk7XG4gICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsyXS5sZW5ndGggPT09IDExKSB7XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hbMl07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgc3RhdGljIGdldFlvdXR1YmVQbGF5bGlzdElkKHVybCkge1xuICAgICAgICBsZXQgcmVnRXhwID0gL14uKih5b3V0dS5iZVxcL3x2XFwvfHVcXC9cXHdcXC98ZW1iZWRcXC98d2F0Y2hcXD9saXN0PXxcXCZsaXN0PSkoW14jXFwmXFw/XSopLiovO1xuICAgICAgICBsZXQgbWF0Y2ggPSB1cmwubWF0Y2gocmVnRXhwKTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hbMl07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgc2V0TWVzc2FnZShtc2cpIHtcbiAgICAgICAgdGhpcy4kbW9kYWwuZmluZCgnLm1vZGFsLW5vdGljZScpLmh0bWwobXNnKTtcbiAgICB9XG5cbiAgICBjaGVja1lvdVR1YmVWaWRlbygkaW5wdXQpIHtcbiAgICAgICAgbGV0IF9zZWxmID0gdGhpcztcbiAgICAgICAgaWYgKCFZb3V0dWJlLnZhbGlkYXRlWW91VHViZUxpbmsoJGlucHV0LnZhbCgpKSB8fCAhRXh0ZXJuYWxTZXJ2aWNlQ29uZmlnLnlvdXR1YmUuYXBpX2tleSkge1xuICAgICAgICAgICAgaWYgKEV4dGVybmFsU2VydmljZUNvbmZpZy55b3V0dWJlLmFwaV9rZXkpIHtcbiAgICAgICAgICAgICAgICBfc2VsZi5zZXRNZXNzYWdlKFJWX01FRElBX0NPTkZJRy50cmFuc2xhdGlvbnMuYWRkX2Zyb20ueW91dHViZS5pbnZhbGlkX3VybF9tc2cpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfc2VsZi5zZXRNZXNzYWdlKFJWX01FRElBX0NPTkZJRy50cmFuc2xhdGlvbnMuYWRkX2Zyb20ueW91dHViZS5ub19hcGlfa2V5X21zZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsZXQgeW91dHViZUlkID0gWW91dHViZS5nZXRZb3VUdWJlSWQoJGlucHV0LnZhbCgpKTtcbiAgICAgICAgICAgIGxldCByZXF1ZXN0VXJsID0gJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3lvdXR1YmUvdjMvdmlkZW9zP2lkPScgKyB5b3V0dWJlSWQ7XG4gICAgICAgICAgICBsZXQgaXNQbGF5bGlzdCA9IF9zZWxmLiRtb2RhbC5maW5kKCcuY3VzdG9tLWNoZWNrYm94IGlucHV0W3R5cGU9XCJjaGVja2JveFwiXScpLmlzKCc6Y2hlY2tlZCcpO1xuXG4gICAgICAgICAgICBpZiAoaXNQbGF5bGlzdCkge1xuICAgICAgICAgICAgICAgIHlvdXR1YmVJZCA9IFlvdXR1YmUuZ2V0WW91dHViZVBsYXlsaXN0SWQoJGlucHV0LnZhbCgpKTtcbiAgICAgICAgICAgICAgICByZXF1ZXN0VXJsID0gJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3lvdXR1YmUvdjMvcGxheWxpc3RJdGVtcz9wbGF5bGlzdElkPScgKyB5b3V0dWJlSWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiByZXF1ZXN0VXJsICsgJyZrZXk9JyArIEV4dGVybmFsU2VydmljZUNvbmZpZy55b3V0dWJlLmFwaV9rZXkgKyAnJnBhcnQ9c25pcHBldCcsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNQbGF5bGlzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGxheWxpc3RWaWRlb0NhbGxiYWNrKGRhdGEsICRpbnB1dC52YWwoKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaW5nbGVWaWRlb0NhbGxiYWNrKGRhdGEsICRpbnB1dC52YWwoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBfc2VsZi5zZXRNZXNzYWdlKFJWX01FRElBX0NPTkZJRy50cmFuc2xhdGlvbnMuYWRkX2Zyb20ueW91dHViZS5lcnJvcl9tc2cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2luZ2xlVmlkZW9DYWxsYmFjayhkYXRhLCB1cmwpIHtcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiBSVl9NRURJQV9VUkwuYWRkX2V4dGVybmFsX3NlcnZpY2UsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd5b3V0dWJlJyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZGF0YS5pdGVtc1swXS5zbmlwcGV0LnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICBmb2xkZXJfaWQ6IEhlbHBlcnMuZ2V0UmVxdWVzdFBhcmFtcygpLmZvbGRlcl9pZCxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRodW1iOiAnaHR0cHM6Ly9pbWcueW91dHViZS5jb20vdmkvJyArIGRhdGEuaXRlbXNbMF0uaWQgKyAnL21heHJlc2RlZmF1bHQuanBnJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXMuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNob3dNZXNzYWdlKCdlcnJvcicsIHJlcy5tZXNzYWdlLCBSVl9NRURJQV9DT05GSUcudHJhbnNsYXRpb25zLm1lc3NhZ2UuZXJyb3JfaGVhZGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1lc3NhZ2VTZXJ2aWNlLnNob3dNZXNzYWdlKCdzdWNjZXNzJywgcmVzLm1lc3NhZ2UsIFJWX01FRElBX0NPTkZJRy50cmFuc2xhdGlvbnMubWVzc2FnZS5zdWNjZXNzX2hlYWRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBfc2VsZi5NZWRpYVNlcnZpY2UuZ2V0TWVkaWEodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBNZXNzYWdlU2VydmljZS5oYW5kbGVFcnJvcihkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF9zZWxmLiRtb2RhbC5tb2RhbCgnaGlkZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcGxheWxpc3RWaWRlb0NhbGxiYWNrKGRhdGEsIHVybCkge1xuICAgICAgICAgICAgX3NlbGYuJG1vZGFsLm1vZGFsKCdoaWRlJyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gcmVzb3VyY2VzL2Fzc2V0cy9qcy9BcHAvRXh0ZXJuYWxzL1lvdXR1YmUuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXRCQTtBQUFBO0FBQUE7QUErQ0E7QUFDQTtBQWhEQTtBQUFBO0FBQUE7QUFtREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFMQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2QkE7QUF5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFwSEE7QUFBQTtBQUFBO0FBd0JBO0FBQ0E7QUFDQTtBQTFCQTtBQUFBO0FBQUE7QUE2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFuQ0E7QUFBQTtBQUFBO0FBc0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBNUNBO0FBQ0E7QUFEQTtBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///14\n");

/***/ }),
/* 15 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ExternalServiceConfig; });\nvar ExternalServiceConfig = {\n    youtube: {\n        api_key: \"AIzaSyCV4fmfdgsValGNR3sc-0W3cbpEZ8uOd60\"\n    }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vcmVzb3VyY2VzL2Fzc2V0cy9qcy9BcHAvQ29uZmlnL0V4dGVybmFsU2VydmljZUNvbmZpZy5qcz8yYjI5Il0sInNvdXJjZXNDb250ZW50IjpbImxldCBFeHRlcm5hbFNlcnZpY2VDb25maWcgPSB7XG4gICAgeW91dHViZToge1xuICAgICAgICBhcGlfa2V5OiBcIkFJemFTeUNWNGZtZmRnc1ZhbEdOUjNzYy0wVzNjYnBFWjh1T2Q2MFwiXG4gICAgfVxufTtcblxuZXhwb3J0IHtFeHRlcm5hbFNlcnZpY2VDb25maWd9O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHJlc291cmNlcy9hc3NldHMvanMvQXBwL0NvbmZpZy9FeHRlcm5hbFNlcnZpY2VDb25maWcuanMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///15\n");

/***/ }),
/* 16 */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvYXNzZXRzL3Nhc3MvbWVkaWEuc2Nzcz8wODljIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9yZXNvdXJjZXMvYXNzZXRzL3Nhc3MvbWVkaWEuc2Nzc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///16\n");

/***/ })
/******/ ]);